{"version":3,"sources":["bliss.shy.min.js","jsep.min.js","stretchy.min.js","mavo.js","util.js","locale.js","locale.en.js","plugins.js","ui.bar.js","ui.message.js","permissions.js","backend.js","formats.js","node.js","group.js","primitive.js","ui.popup.js","elements.js","collection.js","ui.itembar.js","expression.js","domexpression.js","expressions.js","mv-if.js","functions.js","mavoscript.js","backend.dropbox.js","backend.github.js"],"names":["constructor","element","index","Object","keys","length","defineProperty","_","attributes","selector","attribute","setAttribute","id","Mavo","getAttribute","i","lang","closest","locale","autoEdit","hasAttribute","hooks","$$","selectors","primitive","isCollection","is","expressions","Expressions","permissions","backendTypes","roles","records","role","changed","$","bind","evt","backend","source","storage","UI","addEventListener","document","activeElement","preventDefault","needsEdit","calculateNeedsEdit","onchange","value","modeObserver","nodeloop","nodes","mode","node","previousMode","requestAnimationFrame","dataLoaded","fire","callback","observer","target","Observer","debouncedSave","debounce","autoSaveDelay","keyCode","nextNode","editor","edit","immediately","getData","toJSON","dismiss","log","render","data","env","run","root","parent","classList","setUnsavedChanges","unsavedChanges","done","unbind","previous","init","primaryBackend","Promise","resolve","then","reject","err","catch","xhr","status","inProgress","store","message","XMLHttpRequest","saved","upload","path","uploadBackend","save","lastSaved","now","walk","live","toggleAttribute","style","toggle","_storage","_primaryBackend","get","static","all","Element","superKey","navigator","base","dependencies","ret","Hooks","lazy","documentElement","toNode","Symbol","s","property","specificProperty","multiple","formControl","textInput","container","split","or","test","loaded","url","readFile","reader","format","file","JSON","safeToJSON","cache","add","objectify","toPrimitive","extend","properties","toArray","arr","indexOf","reduce","union","set1","filter","elements","matches","trim","name","elementPath","acc","last","sibling","offset","countNonElementSiblings","isRemoved","appendChild","remove","comment","commentText","parentNode","replaceChild","previousValue","restoreAttribute","inView","bottom","innerHeight","r","observe","scrollIntoViewIfNeeded","getTarget","in","getCanonicalProperty","toLowerCase","propertyL","arguments","undefined","meta","obj","parse","delay","code","fn","clearTimeout","timer","timeout","escapeRegExp","match","str","ResizeObserver","previousRect","contentRect","callbackOrObserver","ro","Class","characterData","childList","subtree","characterDataOldValue","stop","running","sneak","res","rej","promise","iterable","thenAll","rr","f","wrap","options","pair","proxy","set","Locale","fallback","phrase","key","vars","slice","baseLang","register","phrases","getBaseLang","prototype","ready","o","option","textContent","Plugins","load","plugins","fetch","responseType","response","map","filename","plugin","inside","existing","custom","template","mavo","controls","start","console","targetHeight","innerHTML","forEach","create","permission","events","action","delegate","resizeObserver","disconnect","offsetHeight","resize","revocably","getControls","replace","ids","positive","lastIndexOf","drop","keep","className","prepare","user","html","cleanup","condition","a","around","mousedown","export","href","optional","button","tabIndex","focus","input","type","change","onerror","Message","closed","click","bar","prop","close","closeTimeout","mouseenter","mouseleave","Permissions","parentChanged","off","actions","can","cannot","triggers","push","prev","current","fireTriggers","from","trigger","active","oldParent","setter","able","Backend","update","URL","Formats","searchParams","serialize","serialized","login","put","isAuthenticated","oAuthParams","toString","equals","request","method","req","headers","join","call","Date","error","oAuthenticate","passive","accessToken","width","height","min","popup","screen","Error","authPopup","appid","localStorage","Functions","types","Remote","body","stringify","extensions","json","extends","text","csv","CSV","defaultOptions","header","dynamicTyping","me","delimiter","aborted","abstract","maxId","alias","copies","getProperty","DOMExpression","item","et","search","originalAttribute","expressionText","collection","editing","isRoot","postInit","delete","expression","destroy","itembar","result","walker","walkUp","group","propagate","children","fromTemplate","oldData","context","getClosestCollection","closestItem","isDeleted","deleted","relativizeData","proxyCache","isArray","liveData","pathFrom","nodePath","getDescendant","getCousin","distance","ind","relativePath","inPath","nodeType","modes","_modes","elementContents","createDocumentFragment","contents","tag","_deleted","WeakMap","Group","getValueAttribute","propertyNames","mutable","Collection","childrenNames","vocab","find","returnArray","results","propagated","wasPrimitive","score","reverse","propertyData","copy","config","originalEditor","defaultSource","setValue","force","silent","datatype","editorValue","changeEvents","getValue","templateValue","_default","default","initialValue","emptyValue","setAttributeShy","output","super","defaultObserver","savedValue","initEdit","cloneNode","Elements","stopPropagation","multiline","select","placeholder","dataInput","preEdit","dataRender","editorDefaults","dataChanged","empty","hide","safeCast","existingType","cast","getConfig","newValue","presentational","namespaceURI","Popup","bounds","left","pointDown","y","top","hidden","keyup","contains","transitionend","Math","show","hideCallback","position","transition","setTimeout","window","removeEventListener","parseFloat","getComputedStyle","parts","lastMatch","selectorloop","defaultConfig","isSVG","mainInput","self","FileReader","tempURL","createObjectURL","attempts","revokeObjectURL","onload","uploadEvents","defaultName","getAsFile","accept","checked","toCheck","clicked","range","getBoundingClientRect","mod","step","increment","cs","display","whiteSpace","offsetWidth","setEditorValue","dateFormat","datetime","dateTypes","defaultFormats","date","time","accepts","templateElement","like","likeNode","createItem","j","rendered","subset","adopt","bottomUp","splice","closestCollection","hard","move","editItem","when","after","fragment","marker","has","items","c","flatten","createComment","ref","dragula","containers","isContainer","moves","Node","nextElementSibling","el","previousElementSibling","order","dragHandle","buttons","title","drag","newItem","sticky","instance","visible","removeAttribute","adjacent","hideTimeout","handleEvent","isWithinItem","itemBar","Primitive","reposition","buttonSelector","Set","eval","function","info","changedBy","intersects","identifiers","Syntax","regex","lastIndex","Expression","syntax","parsed","normalize","firstChild","childNodes","splitText","insertBefore","oldValue","mavoNode","special","event","expr","domexpression","unobserve","scheduled","rootObject","extract","directives","traverse","THROTTLE","parentIf","treeBuilt","parentValue","childProperties","childIfs","timezone","fields","canonicalProperty","functions","Array","passes","query","location","first","unique","arr1","every","sum","array","numbers","max","count","round","num","decimals","useGrouping","maximumFractionDigits","ordinal","iffalse","counter","haystack","starts","ends","needle","idify","readable","$1","$0","toUpperCase","uppercase","lowercase","between","tofirst","to","i1","tight","$startup","$today","year","$u","getDateComponent","hour","second","ms","minutes","hours","days","month","weekday","minute","weeks","months","years","abs","localTimezone","args","$mouse","util","fixDateString","hasDate","hasTime","_Trap","val","addUnaryOperator","symbol","addBinaryOperator","Script","symbols","precedence","jsep","addBinaryOp","operands","raw","b","unarySymbols","getOperatorName","unary","operators","scalar","identity","isNaN","dateA","dateB","logical","getNumericalOperands","da","db","serializers","transformations","getURL","username","avatar","profile_photo_url","logout","oAuthLogout","extension","apiData","errors","content","responseText","repoCall","fileCall","commitPrefix","repoInfo","isEncoded","forkInfo","branch","sha","fileInfo","pullRequest","classes","notice","state","html_url","form","description","head","prInfo","getUser","on","canPush","oAuth","shift","pathname","apiCall","lastSegment"],"mappings":"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","file":"../mavo.es5.min.js","sourcesContent":["!function(){\"use strict\";function t(e,n,i){return n=void 0===n?1:n,i=i||n+1,i-n<=1?function(){if(arguments.length<=n||\"string\"===r.type(arguments[n]))return e.apply(this,arguments);var t,i=arguments[n];for(var o in i){var s=Array.prototype.slice.call(arguments);s.splice(n,1,o,i[o]),t=e.apply(this,s)}return t}:t(t(e,n+1,i),n,i-1)}function e(t,r,i){var o=n(i);if(\"string\"===o){var s=Object.getOwnPropertyDescriptor(r,i);!s||s.writable&&s.configurable&&s.enumerable&&!s.get&&!s.set?t[i]=r[i]:(delete t[i],Object.defineProperty(t,i,s))}else if(\"array\"===o)i.forEach(function(n){n in r&&e(t,r,n)});else for(var a in r)i&&(\"regexp\"===o&&!i.test(a)||\"function\"===o&&!i.call(r,a))||e(t,r,a);return t}function n(t){if(null===t)return\"null\";if(void 0===t)return\"undefined\";var e=(Object.prototype.toString.call(t).match(/^\\[object\\s+(.*?)\\]$/)[1]||\"\").toLowerCase();return\"number\"==e&&isNaN(t)?\"nan\":e}var r=self.Bliss=e(function(t,e){return 2==arguments.length&&!e||!t?null:\"string\"===r.type(t)?(e||document).querySelector(t):t||null},self.Bliss);e(r,{extend:e,overload:t,type:n,property:r.property||\"_\",listeners:self.WeakMap?new WeakMap:new Map,original:{addEventListener:(self.EventTarget||Node).prototype.addEventListener,removeEventListener:(self.EventTarget||Node).prototype.removeEventListener},sources:{},noop:function(){},$:function(t,e){return t instanceof Node||t instanceof Window?[t]:2!=arguments.length||e?Array.prototype.slice.call(\"string\"==typeof t?(e||document).querySelectorAll(t):t||[]):[]},defined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},create:function(t,e){return t instanceof Node?r.set(t,e):(1===arguments.length&&(\"string\"===r.type(t)?e={}:(e=t,t=e.tag,e=r.extend({},e,function(t){return\"tag\"!==t}))),r.set(document.createElement(t||\"div\"),e))},each:function(t,e,n){n=n||{};for(var r in t)n[r]=e.call(t,r,t[r]);return n},ready:function(t,e,n){if(\"function\"!=typeof t||e||(e=t,t=void 0),t=t||document,e&&(\"loading\"!==t.readyState?e():r.once(t,\"DOMContentLoaded\",function(){e()})),!n)return new Promise(function(e){r.ready(t,e,!0)})},Class:function(t){var e,n=[\"constructor\",\"extends\",\"abstract\",\"static\"].concat(Object.keys(r.classProps)),i=t.hasOwnProperty(\"constructor\")?t.constructor:r.noop;2==arguments.length?(e=arguments[0],t=arguments[1]):(e=function(){if(this.constructor.__abstract&&this.constructor===e)throw new Error(\"Abstract classes cannot be directly instantiated.\");e[\"super\"]&&e[\"super\"].apply(this,arguments),i.apply(this,arguments)},e[\"super\"]=t[\"extends\"]||null,e.prototype=r.extend(Object.create(e[\"super\"]?e[\"super\"].prototype:Object),{constructor:e}),e.prototype[\"super\"]=e[\"super\"]?e[\"super\"].prototype:null,e.__abstract=!!t[\"abstract\"]);var o=function(t){return this.hasOwnProperty(t)&&n.indexOf(t)===-1};if(t[\"static\"]){r.extend(e,t[\"static\"],o);for(var s in r.classProps)s in t[\"static\"]&&r.classProps[s](e,t[\"static\"][s])}r.extend(e.prototype,t,o);for(var s in r.classProps)s in t&&r.classProps[s](e.prototype,t[s]);return e},classProps:{lazy:t(function(t,e,n){return Object.defineProperty(t,e,{get:function(){var t=n.call(this);return Object.defineProperty(this,e,{value:t,configurable:!0,enumerable:!0,writable:!0}),t},set:function(t){Object.defineProperty(this,e,{value:t,configurable:!0,enumerable:!0,writable:!0})},configurable:!0,enumerable:!0}),t}),live:t(function(t,e,n){return\"function\"===r.type(n)&&(n={set:n}),Object.defineProperty(t,e,{get:function(){var t=this[\"_\"+e],r=n.get&&n.get.call(this,t);return void 0!==r?r:t},set:function(t){var r=this[\"_\"+e],i=n.set&&n.set.call(this,t,r);this[\"_\"+e]=void 0!==i?i:t},configurable:n.configurable,enumerable:n.enumerable}),t})},include:function(){var t=arguments[arguments.length-1],e=2===arguments.length&&arguments[0],n=document.createElement(\"script\");return e?Promise.resolve():new Promise(function(e,i){r.set(n,{async:!0,onload:function(){e(),n.parentNode&&n.parentNode.removeChild(n)},onerror:function(){i()},src:t,inside:document.head})})},fetch:function(t,n){if(!t)throw new TypeError(\"URL parameter is mandatory and cannot be \"+t);var i=e({url:new URL(t,location),data:\"\",method:\"GET\",headers:{},xhr:new XMLHttpRequest},n);i.method=i.method.toUpperCase(),r.hooks.run(\"fetch-args\",i),\"GET\"===i.method&&i.data&&(i.url.search+=i.data),document.body.setAttribute(\"data-loading\",i.url),i.xhr.open(i.method,i.url.href,i.async!==!1,i.user,i.password);for(var o in n)if(\"upload\"===o)i.xhr.upload&&\"object\"==typeof n[o]&&r.extend(i.xhr.upload,n[o]);else if(o in i.xhr)try{i.xhr[o]=n[o]}catch(s){self.console&&console.error(s)}var a=Object.keys(i.headers).map(function(t){return t.toLowerCase()});\"GET\"!==i.method&&a.indexOf(\"content-type\")===-1&&i.xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");for(var c in i.headers)void 0!==i.headers[c]&&i.xhr.setRequestHeader(c,i.headers[c]);var u=new Promise(function(t,e){i.xhr.onload=function(){document.body.removeAttribute(\"data-loading\"),0===i.xhr.status||i.xhr.status>=200&&i.xhr.status<300||304===i.xhr.status?t(i.xhr):e(r.extend(Error(i.xhr.statusText),{xhr:i.xhr,get status(){return this.xhr.status}}))},i.xhr.onerror=function(){document.body.removeAttribute(\"data-loading\"),e(r.extend(Error(\"Network Error\"),{xhr:i.xhr}))},i.xhr.ontimeout=function(){document.body.removeAttribute(\"data-loading\"),e(r.extend(Error(\"Network Timeout\"),{xhr:i.xhr}))},i.xhr.send(\"GET\"===i.method?null:i.data)});return u.xhr=i.xhr,u},value:function(t){var e=\"string\"!==r.type(t);return r.$(arguments).slice(+e).reduce(function(t,e){return t&&t[e]},e?t:self)}}),r.Hooks=new r.Class({add:function(t,e,n){if(\"string\"==typeof arguments[0])(Array.isArray(t)?t:[t]).forEach(function(t){this[t]=this[t]||[],e&&this[t][n?\"unshift\":\"push\"](e)},this);else for(var t in arguments[0])this.add(t,arguments[0][t],arguments[1])},run:function(t,e){this[t]=this[t]||[],this[t].forEach(function(t){t.call(e&&e.context?e.context:e,e)})}}),r.hooks=new r.Hooks;r.property;r.Element=function(t){this.subject=t,this.data={},this.bliss={}},r.Element.prototype={set:t(function(t,e){t in r.setProps?r.setProps[t].call(this,e):t in this?this[t]=e:this.setAttribute(t,e)},0),transition:function(t,e){return e=+e||400,new Promise(function(n,i){if(\"transition\"in this.style){var o=r.extend({},this.style,/^transition(Duration|Property)$/);r.style(this,{transitionDuration:(e||400)+\"ms\",transitionProperty:Object.keys(t).join(\", \")}),r.once(this,\"transitionend\",function(){clearTimeout(s),r.style(this,o),n(this)});var s=setTimeout(n,e+50,this);r.style(this,t)}else r.style(this,t),n(this)}.bind(this))},fire:function(t,e){var n=document.createEvent(\"HTMLEvents\");return n.initEvent(t,!0,!0),this.dispatchEvent(r.extend(n,e))},bind:t(function(t,e){if(arguments.length>1&&(\"function\"===r.type(e)||e.handleEvent)){var n=e;e=\"object\"===r.type(arguments[2])?arguments[2]:{capture:!!arguments[2]},e.callback=n}var i=r.listeners.get(this)||{};t.trim().split(/\\s+/).forEach(function(t){if(t.indexOf(\".\")>-1){t=t.split(\".\");var n=t[1];t=t[0]}i[t]=i[t]||[],0===i[t].filter(function(t){return t.callback===e.callback&&t.capture==e.capture}).length&&i[t].push(r.extend({className:n},e)),r.original.addEventListener.call(this,t,e.callback,e)},this),r.listeners.set(this,i)},0),unbind:t(function(t,e){if(e&&(\"function\"===r.type(e)||e.handleEvent)){var n=e;e=arguments[2]}\"boolean\"==r.type(e)&&(e={capture:e}),e=e||{},e.callback=e.callback||n;var i=r.listeners.get(this);(t||\"\").trim().split(/\\s+/).forEach(function(t){if(t.indexOf(\".\")>-1){t=t.split(\".\");var n=t[1];t=t[0]}if(t&&e.callback)return r.original.removeEventListener.call(this,t,e.callback,e.capture);if(i)for(var o in i)if(!t||o===t)for(var s,a=0;s=i[o][a];a++)n&&n!==s.className||e.callback&&e.callback!==s.callback||!!e.capture!=!!s.capture||(i[o].splice(a,1),r.original.removeEventListener.call(this,o,s.callback,s.capture),a--)},this)},0)},r.setProps={style:function(t){for(var e in t)e in this.style?this.style[e]=t[e]:this.style.setProperty(e,t[e])},attributes:function(t){for(var e in t)this.setAttribute(e,t[e])},properties:function(t){r.extend(this,t)},events:function(t){if(1!=arguments.length||!t||!t.addEventListener)return r.bind.apply(this,[this].concat(r.$(arguments)));var e=this;if(r.listeners){var n=r.listeners.get(t);for(var i in n)n[i].forEach(function(t){r.bind(e,i,t.callback,t.capture)})}for(var o in t)0===o.indexOf(\"on\")&&(this[o]=t[o])},once:t(function(t,e){var n=this,i=function(){return r.unbind(n,t,i),e.apply(n,arguments)};r.bind(this,t,i,{once:!0})},0),delegate:t(function(t,e,n){r.bind(this,t,function(t){t.target.closest(e)&&n.call(this,t)})},0,2),contents:function(t){(t||0===t)&&(Array.isArray(t)?t:[t]).forEach(function(t){var e=r.type(t);/^(string|number)$/.test(e)?t=document.createTextNode(t+\"\"):\"object\"===e&&(t=r.create(t)),t instanceof Node&&this.appendChild(t)},this)},inside:function(t){t&&t.appendChild(this)},before:function(t){t&&t.parentNode.insertBefore(this,t)},after:function(t){t&&t.parentNode.insertBefore(this,t.nextSibling)},start:function(t){t&&t.insertBefore(this,t.firstChild)},around:function(t){t&&t.parentNode&&r.before(this,t),this.appendChild(t)}},r.Array=function(t){this.subject=t},r.Array.prototype={all:function(t){var e=r.$(arguments).slice(1);return this[t].apply(this,e)}},r.add=t(function(t,e,n,i){n=r.extend({$:!0,element:!0,array:!0},n),\"function\"==r.type(e)&&(!n.element||t in r.Element.prototype&&i||(r.Element.prototype[t]=function(){return this.subject&&r.defined(e.apply(this.subject,arguments),this.subject)}),!n.array||t in r.Array.prototype&&i||(r.Array.prototype[t]=function(){var t=arguments;return this.subject.map(function(n){return n&&r.defined(e.apply(n,t),n)})}),n.$&&(r.sources[t]=r[t]=e,(n.array||n.element)&&(r[t]=function(){var e=[].slice.apply(arguments),i=e.shift(),o=n.array&&Array.isArray(i)?\"Array\":\"Element\";return r[o].prototype[t].apply({subject:i},e)})))},0),r.add(r.Array.prototype,{element:!1}),r.add(r.Element.prototype),r.add(r.setProps),r.add(r.classProps,{element:!1,array:!1});var i=document.createElement(\"_\");r.add(r.extend({},HTMLElement.prototype,function(t){return\"function\"===r.type(i[t])}),null,!0)}();","/* jsep v0.3.2 (http://jsep.from.so/) */\n!function(e){\"use strict\";var r=function(e,r){var t=new Error(e+\" at character \"+r);throw t.index=r,t.description=e,t},t={\"-\":!0,\"!\":!0,\"~\":!0,\"+\":!0},n={\"||\":1,\"&&\":2,\"|\":3,\"^\":4,\"&\":5,\"==\":6,\"!=\":6,\"===\":6,\"!==\":6,\"<\":7,\">\":7,\"<=\":7,\">=\":7,\"<<\":8,\">>\":8,\">>>\":8,\"+\":9,\"-\":9,\"*\":10,\"/\":10,\"%\":10},o=function(e){var r,t=0;for(var n in e)(r=n.length)>t&&e.hasOwnProperty(n)&&(t=r);return t},i=o(t),a=o(n),u={true:!0,false:!1,null:null},s=function(e){return n[e]||0},p=function(e,r,t){return{type:\"||\"===e||\"&&\"===e?\"LogicalExpression\":\"BinaryExpression\",operator:e,left:r,right:t}},f=function(e){return e>=48&&e<=57},c=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=128&&!n[String.fromCharCode(e)]},l=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e>=128&&!n[String.fromCharCode(e)]},d=function(e){for(var o,d,h=0,v=e.charAt,x=e.charCodeAt,y=function(r){return v.call(e,r)},m=function(r){return x.call(e,r)},b=e.length,E=function(){for(var e=m(h);32===e||9===e||10===e||13===e;)e=m(++h)},g=function(){var e,t,n=w();return E(),63!==m(h)?n:(h++,(e=g())||r(\"Expected expression\",h),E(),58===m(h)?(h++,(t=g())||r(\"Expected expression\",h),{type:\"ConditionalExpression\",test:n,consequent:e,alternate:t}):void r(\"Expected :\",h))},C=function(){E();for(var r=e.substr(h,a),t=r.length;t>0;){if(n.hasOwnProperty(r))return h+=t,r;r=r.substr(0,--t)}return!1},w=function(){var e,t,n,o,i,a,u,f;if(a=O(),!(t=C()))return a;for(i={value:t,prec:s(t)},(u=O())||r(\"Expected expression after \"+t,h),o=[a,i,u];(t=C())&&0!==(n=s(t));){for(i={value:t,prec:n};o.length>2&&n<=o[o.length-2].prec;)u=o.pop(),t=o.pop().value,a=o.pop(),e=p(t,a,u),o.push(e);(e=O())||r(\"Expected expression after \"+t,h),o.push(i,e)}for(e=o[f=o.length-1];f>1;)e=p(o[f-1].value,o[f-2],e),f-=2;return e},O=function(){var r,n,o;if(E(),r=m(h),f(r)||46===r)return U();if(39===r||34===r)return k();if(91===r)return S();for(o=(n=e.substr(h,i)).length;o>0;){if(t.hasOwnProperty(n))return h+=o,{type:\"UnaryExpression\",operator:n,argument:O(),prefix:!0};n=n.substr(0,--o)}return!(!c(r)&&40!==r)&&A()},U=function(){for(var e,t,n=\"\";f(m(h));)n+=y(h++);if(46===m(h))for(n+=y(h++);f(m(h));)n+=y(h++);if(\"e\"===(e=y(h))||\"E\"===e){for(n+=y(h++),\"+\"!==(e=y(h))&&\"-\"!==e||(n+=y(h++));f(m(h));)n+=y(h++);f(m(h-1))||r(\"Expected exponent (\"+n+y(h)+\")\",h)}return t=m(h),c(t)?r(\"Variable names cannot start with a number (\"+n+y(h)+\")\",h):46===t&&r(\"Unexpected period\",h),{type:\"Literal\",value:parseFloat(n),raw:n}},k=function(){for(var e,t=\"\",n=y(h++),o=!1;h<b;){if((e=y(h++))===n){o=!0;break}if(\"\\\\\"===e)switch(e=y(h++)){case\"n\":t+=\"\\n\";break;case\"r\":t+=\"\\r\";break;case\"t\":t+=\"\\t\";break;case\"b\":t+=\"\\b\";break;case\"f\":t+=\"\\f\";break;case\"v\":t+=\"\\v\";break;default:t+=e}else t+=e}return o||r('Unclosed quote after \"'+t+'\"',h),{type:\"Literal\",value:t,raw:n+t+n}},L=function(){var t,n=m(h),o=h;for(c(n)?h++:r(\"Unexpected \"+y(h),h);h<b&&(n=m(h),l(n));)h++;return t=e.slice(o,h),u.hasOwnProperty(t)?{type:\"Literal\",value:u[t],raw:t}:\"this\"===t?{type:\"ThisExpression\"}:{type:\"Identifier\",name:t}},j=function(e){for(var t,n,o=[],i=!1;h<b;){if(E(),(t=m(h))===e){i=!0,h++;break}44===t?h++:((n=g())&&\"Compound\"!==n.type||r(\"Expected comma\",h),o.push(n))}return i||r(\"Expected \"+String.fromCharCode(e),h),o},A=function(){var e,t;for(t=40===(e=m(h))?P():L(),E(),e=m(h);46===e||91===e||40===e;)h++,46===e?(E(),t={type:\"MemberExpression\",computed:!1,object:t,property:L()}):91===e?(t={type:\"MemberExpression\",computed:!0,object:t,property:g()},E(),93!==(e=m(h))&&r(\"Unclosed [\",h),h++):40===e&&(t={type:\"CallExpression\",arguments:j(41),callee:t}),E(),e=m(h);return t},P=function(){h++;var e=g();if(E(),41===m(h))return h++,e;r(\"Unclosed (\",h)},S=function(){return h++,{type:\"ArrayExpression\",elements:j(93)}},B=[];h<b;)59===(o=m(h))||44===o?h++:(d=g())?B.push(d):h<b&&r('Unexpected \"'+y(h)+'\"',h);return 1===B.length?B[0]:{type:\"Compound\",body:B}};if(d.version=\"0.3.2\",d.toString=function(){return\"JavaScript Expression Parser (JSEP) v\"+d.version},d.addUnaryOp=function(e){return i=Math.max(e.length,i),t[e]=!0,this},d.addBinaryOp=function(e,r){return a=Math.max(e.length,a),n[e]=r,this},d.addLiteral=function(e,r){return u[e]=r,this},d.removeUnaryOp=function(e){return delete t[e],e.length===i&&(i=o(t)),this},d.removeAllUnaryOps=function(){return t={},i=0,this},d.removeBinaryOp=function(e){return delete n[e],e.length===a&&(a=o(n)),this},d.removeAllBinaryOps=function(){return n={},a=0,this},d.removeLiteral=function(e){return delete u[e],this},d.removeAllLiterals=function(){return u={},this},\"undefined\"==typeof exports){var h=e.jsep;e.jsep=d,d.noConflict=function(){return e.jsep===d&&(e.jsep=h),d}}else\"undefined\"!=typeof module&&module.exports?exports=module.exports=d:exports.parse=d}(this);\n//# sourceMappingURL=jsep.min.js.map","!function(){function e(e,t){return e instanceof Node||e instanceof Window?[e]:[].slice.call(\"string\"==typeof e?(t||document).querySelectorAll(e):e||[])}if(self.Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||null),Element.prototype.matches)){var t=self.Stretchy={selectors:{base:'textarea, select:not([size]), input:not([type]), input[type=\"'+\"text number url email tel\".split(\" \").join('\"], input[type=\"')+'\"]',filter:\"*\"},script:document.currentScript||e(\"script\").pop(),resize:function(e){if(t.resizes(e)){var i,n=getComputedStyle(e),o=0;!e.value&&e.placeholder&&(i=!0,e.value=e.placeholder);var l=e.nodeName.toLowerCase();if(\"textarea\"==l)e.style.height=\"0\",\"border-box\"==n.boxSizing?o=e.offsetHeight:\"content-box\"==n.boxSizing&&(o=-e.clientHeight+parseFloat(n.minHeight)),\ne.style.height=e.scrollHeight+o+\"px\";else if(\"input\"==l)if(e.style.width=\"1000px\",e.offsetWidth){e.style.width=\"0\",\"border-box\"==n.boxSizing?o=e.offsetWidth:\"padding-box\"==n.boxSizing?o=e.clientWidth:\"content-box\"==n.boxSizing&&(o=parseFloat(n.minWidth));var r=Math.max(o,e.scrollWidth-e.clientWidth);e.style.width=r+\"px\";for(var s=0;s<10&&(e.scrollLeft=1e10,0!=e.scrollLeft);s++)r+=e.scrollLeft,e.style.width=r+\"px\"}else e.style.width=e.value.length+1+\"ch\";else if(\"select\"==l){var c=e.selectedIndex>0?e.selectedIndex:0,a=document.createElement(\"_\");a.textContent=e.options[c].textContent,e.parentNode.insertBefore(a,e.nextSibling);var d;for(var h in n){var p=n[h];/^(width|webkitLogicalWidth|length)$/.test(h)||\"string\"!=typeof p||(a.style[h]=p,/appearance$/i.test(h)&&(d=h))}a.style.width=\"\",a.offsetWidth>0&&(e.style.width=a.offsetWidth+\"px\",n[d]&&\"none\"===n[d]||(e.style.width=\"calc(\"+e.style.width+\" + 2em)\")),a.parentNode.removeChild(a),a=null}i&&(e.value=\"\")}},resizeAll:function(i){\ne(i||t.selectors.base).forEach(function(e){t.resize(e)})},active:!0,resizes:function(e){return e&&e.parentNode&&e.matches&&e.matches(t.selectors.base)&&e.matches(t.selectors.filter)},init:function(){t.selectors.filter=t.script.getAttribute(\"data-filter\")||(e(\"[data-stretchy-filter]\").pop()||document.body).getAttribute(\"data-stretchy-filter\")||Stretchy.selectors.filter||\"*\",t.resizeAll()},$$:e};\"loading\"!==document.readyState?t.init():document.addEventListener(\"DOMContentLoaded\",t.init);var i=function(e){t.active&&t.resize(e.target)};document.documentElement.addEventListener(\"input\",i),document.documentElement.addEventListener(\"change\",i),self.MutationObserver&&new MutationObserver(function(e){t.active&&e.forEach(function(e){\"childList\"==e.type&&Stretchy.resizeAll(e.addedNodes)})}).observe(document.documentElement,{childList:!0,subtree:!0})}}();\n//# sourceMappingURL=stretchy.min.js.map\n","/**\n * Mavo: Create web applications by writing HTML and CSS!\n * @author Lea Verou and contributors\n * @version v0.1.5\n */\n(function ($, $$) {\n\nvar _ = self.Mavo = $.Class({\n\tconstructor: function (element) {\n\t\tthis.treeBuilt = Mavo.defer();\n\t\tthis.dataLoaded = Mavo.defer();\n\n\t\tthis.element = element;\n\n\t\tthis.inProgress = false;\n\n\t\t// Index among other mavos in the page, 1 is first\n\t\tthis.index = Object.keys(_.all).length + 1;\n\t\tObject.defineProperty(_.all, this.index - 1, {value: this});\n\n\t\t// Convert any data-mv-* attributes to mv-*\n\t\tvar selector = _.attributes.map(attribute => `[data-${attribute}]`).join(\", \");\n\n\t\t[this.element, ...$$(selector, this.element)].forEach(element => {\n\t\t\t_.attributes.forEach(attribute => {\n\t\t\t\tvar value = element.getAttribute(\"data-\" + attribute);\n\n\t\t\t\tif (value !== null) {\n\t\t\t\t\telement.setAttribute(attribute, value);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// Assign a unique (for the page) id to this mavo instance\n\t\tthis.id = Mavo.getAttribute(this.element, \"mv-app\", \"id\") || `mavo${this.index}`;\n\n\t\tif (this.id in _.all) {\n\t\t\t// Duplicate app name\n\t\t\tfor (var i=2; this.id + i in _.all; i++) {}\n\t\t\tthis.id = this.id + i;\n\t\t}\n\n\t\t_.all[this.id] = this;\n\t\tthis.element.setAttribute(\"mv-app\", this.id);\n\n\t\tvar lang = $.value(this.element.closest(\"[lang]\"), \"lang\") || Mavo.locale;\n\t\tthis.locale = Mavo.Locale.get(lang);\n\n\t\t// Should we start in edit mode?\n\t\tthis.autoEdit = this.element.classList.contains(\"mv-autoedit\");\n\n\t\t// Should we save automatically?\n\t\tthis.autoSave = this.element.hasAttribute(\"mv-autosave\");\n\t\tthis.autoSaveDelay = (this.element.getAttribute(\"mv-autosave\") || 3) * 1000;\n\n\t\tthis.element.setAttribute(\"typeof\", \"\");\n\n\t\tMavo.hooks.run(\"init-start\", this);\n\n\t\t// Apply heuristic for groups\n\t\t$$(_.selectors.primitive + \",\" + _.selectors.multiple, this.element).forEach(element => {\n\t\t\tvar hasChildren = $(`${_.selectors.not(_.selectors.formControl)}, ${_.selectors.property}`, element);\n\n\t\t\tif (hasChildren) {\n\t\t\t\tvar config = Mavo.Primitive.getConfig(element);\n\t\t\t\tvar isCollection = Mavo.is(\"multiple\", element);\n\n\t\t\t\tif (isCollection || !config.attribute && !config.hasChildren) {\n\t\t\t\t\telement.setAttribute(\"typeof\", \"\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.expressions = new Mavo.Expressions(this);\n\n\t\t// Build mavo objects\n\t\tMavo.hooks.run(\"init-tree-before\", this);\n\n\t\tthis.root = new Mavo.Group(this.element, this);\n\t\tthis.treeBuilt.resolve();\n\n\t\tMavo.hooks.run(\"init-tree-after\", this);\n\n\t\tthis.permissions = new Mavo.Permissions();\n\n\t\tvar backendTypes = [\"source\", \"storage\", \"init\"]; // order is significant!\n\n\t\t// Figure out backends for storage, data reads, and initialization respectively\n\t\tbackendTypes.forEach(role => this.updateBackend(role));\n\n\t\tthis.backendObserver = new Mavo.Observer(this.element, backendTypes.map(role => \"mv-\" + role), records => {\n\t\t\tvar changed = {};\n\n\t\t\tvar roles = records.map(record => {\n\t\t\t\tvar role = record.attributeName.replace(/^mv-/, \"\");\n\t\t\t\tchanged[role] = this.updateBackend(role);\n\n\t\t\t\treturn role;\n\t\t\t});\n\n\t\t\t// Do we need to re-load data?\n\t\t\tif (changed.source) {  // if source changes, always reload\n\t\t\t\tthis.load();\n\t\t\t}\n\t\t\telse if (!this.source) {\n\t\t\t\tif (changed.storage || changed.init && !this.root.data) {\n\t\t\t\t\tthis.load();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.permissions.can(\"login\", () => {\n\t\t\t// We also support a URL param to trigger login, in case the user doesn't want visible login UI\n\t\t\tif (Mavo.Functions.url(\"login\") !== null && this.index == 1 || Mavo.Functions.url(this.id + \"-login\") !== null) {\n\t\t\t\tthis.primaryBackend.login();\n\t\t\t}\n\t\t});\n\n\t\t// Update login status\n\t\t$.bind(this.element, \"mv-login.mavo\", evt => {\n\t\t\tif (evt.backend == (this.source || this.storage)) {\n\t\t\t\t// If last time we rendered we got nothing, maybe now we'll have better luck?\n\t\t\t\tif (!this.root.data && !this.unsavedChanges) {\n\t\t\t\t\tthis.load();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.bar = new Mavo.UI.Bar(this);\n\n\t\t// Prevent editing properties inside <summary> to open and close the summary (fix bug #82)\n\t\tif ($(\"summary [property]:not([typeof])\")) {\n\t\t\tthis.element.addEventListener(\"click\", evt => {\n\t\t\t\tif (evt.target != document.activeElement) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Is there any control that requires an edit button?\n\t\tthis.needsEdit = this.calculateNeedsEdit();\n\n\t\tthis.setUnsavedChanges(false);\n\n\t\tthis.permissions.onchange(({action, value}) => {\n\t\t\tvar permissions = this.element.getAttribute(\"mv-permissions\") || \"\";\n\t\t\tpermissions = permissions.trim().split(/\\s+/).filter(a => a != action);\n\n\t\t\tif (value) {\n\t\t\t\tpermissions.push(action);\n\t\t\t}\n\n\t\t\tthis.element.setAttribute(\"mv-permissions\", permissions.join(\" \"));\n\t\t});\n\n\t\tif (this.needsEdit) {\n\t\t\tthis.permissions.can([\"edit\", \"add\", \"delete\"], () => {\n\t\t\t\t// Observe entire tree for mv-mode changes\n\t\t\t\tthis.modeObserver = new Mavo.Observer(this.element, \"mv-mode\", records => {\n\t\t\t\t\trecords.forEach(record => {\n\t\t\t\t\t\tlet element = record.target;\n\t\t\t\t\t\tlet nodes = _.Node.children(element);\n\n\t\t\t\t\t\tnodeloop: for (let i=0; i<nodes.length; i++) {\n\t\t\t\t\t\t\tlet node = nodes[i];\n\t\t\t\t\t\t\tlet previousMode = node.mode, mode;\n\n\t\t\t\t\t\t\tif (node.element == element) {\n\t\t\t\t\t\t\t\t// If attribute set directly on a Mavo node, then it forces it into that mode\n\t\t\t\t\t\t\t\t// otherwise, descendant nodes still inherit, unless they are also mode-restricted\n\t\t\t\t\t\t\t\tmode = node.element.getAttribute(\"mv-mode\");\n\t\t\t\t\t\t\t\tnode.modes = mode;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Inherited\n\t\t\t\t\t\t\t\tif (node.modes) {\n\t\t\t\t\t\t\t\t\t// Mode-restricted, we cannot change to the other mode\n\t\t\t\t\t\t\t\t\tcontinue nodeloop;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tmode = _.getStyle(node.element.parentNode, \"--mv-mode\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnode.mode = mode;\n\n\t\t\t\t\t\t\tif (previousMode != node.mode) {\n\t\t\t\t\t\t\t\tnode[node.mode == \"edit\"? \"edit\" : \"done\"]();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, {subtree: true});\n\n\t\t\t\tif (this.autoEdit) {\n\t\t\t\t\tthis.edit();\n\t\t\t\t}\n\t\t\t}, () => { // cannot\n\t\t\t\tthis.modeObserver && this.modeObserver.destroy();\n\t\t\t});\n\t\t}\n\n\t\tif (this.storage || this.source) {\n\t\t\t// Fetch existing data\n\t\t\tthis.permissions.can(\"read\", () => this.load());\n\t\t}\n\t\telse {\n\t\t\t// No storage or source\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tthis.dataLoaded.resolve();\n\t\t\t\t$.fire(this.element, \"mv-load\");\n\t\t\t});\n\t\t}\n\n\t\t// Dynamic ids\n\t\t$.bind(this.element, \"mv-load.mavo\", evt => {\n\t\t\tif (location.hash) {\n\t\t\t\tvar callback = records => {\n\t\t\t\t\tvar target = document.getElementById(location.hash.slice(1));\n\n\t\t\t\t\tif (target || !location.hash) {\n\t\t\t\t\t\tif (this.element.contains(target)) {\n\t\t\t\t\t\t\trequestAnimationFrame(() => { // Give the browser a chance to render\n\t\t\t\t\t\t\t\tMavo.scrollIntoViewIfNeeded(target);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (observer) {\n\t\t\t\t\t\t\tobserver.destroy();\n\t\t\t\t\t\t\tobserver = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn target;\n\t\t\t\t};\n\n\t\t\t\tif (!callback()) {\n\t\t\t\t\t// No target, perhaps not yet?\n\t\t\t\t\tvar observer = new Mavo.Observer(this.element, \"id\", callback, {subtree: true});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trequestAnimationFrame(() => Stretchy.resizeAll());\n\t\t});\n\n\n\t\tif (this.autoSave) {\n\t\t\tthis.dataLoaded.then(evt => {\n\t\t\t\tvar debouncedSave = _.debounce(() => {\n\t\t\t\t\tthis.save();\n\t\t\t\t}, this.autoSaveDelay);\n\n\t\t\t\tvar callback = evt => {\n\t\t\t\t\tif (evt.node.saved) {\n\t\t\t\t\t\tdebouncedSave();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tthis.permissions.can(\"save\", () => {\n\t\t\t\t\t\t$.bind(this.element, \"mv-change.mavo:autosave\", callback);\n\t\t\t\t\t}, () => {\n\t\t\t\t\t\t$.unbind(this.element, \"mv-change.mavo:autosave\", callback);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t// Keyboard navigation\n\t\tthis.element.addEventListener(\"keydown\", evt => {\n\t\t\t// Ctrl + S or Cmd + S to save\n\t\t\tif (this.permissions.save && evt.keyCode == 83 && evt[_.superKey] && !evt.altKey) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tthis.save();\n\t\t\t}\n\t\t\telse if (evt.keyCode == 38 || evt.keyCode == 40) {\n\t\t\t\tvar element = evt.target;\n\n\t\t\t\tif (element.matches(\"textarea, input[type=range], input[type=number]\")) {\n\t\t\t\t\t// Arrow keys are meaningful here\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (element.matches(\".mv-editor\")) {\n\t\t\t\t\tvar editor = true;\n\t\t\t\t\telement = element.parentNode;\n\t\t\t\t}\n\n\t\t\t\tvar node = Mavo.Node.get(element);\n\n\t\t\t\tif (node && node.closestCollection) {\n\t\t\t\t\tvar nextNode = node.getCousin(evt.keyCode == 38? -1 : 1, {wrap: true});\n\n\t\t\t\t\tif (nextNode) {\n\t\t\t\t\t\tif (editor && nextNode.editing) {\n\t\t\t\t\t\t\tnextNode.edit({immediately: true}).then(() => nextNode.editor.focus());\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tnextNode.element.focus();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tMavo.hooks.run(\"init-end\", this);\n\t},\n\n\tget editing() {\n\t\treturn this.root.editing;\n\t},\n\n\tgetData: function(o) {\n\t\treturn this.root.getData(o);\n\t},\n\n\ttoJSON: function() {\n\t\treturn _.toJSON(this.getData());\n\t},\n\n\tmessage: function(message, options) {\n\t\treturn new _.UI.Message(this, message, options);\n\t},\n\n\terror: function(message, ...log) {\n\t\tthis.message(message, {\n\t\t\ttype: \"error\",\n\t\t\tdismiss: [\"button\", \"timeout\"]\n\t\t});\n\n\t\t// Log more info for programmers\n\t\tif (log.length > 0) {\n\t\t\tconsole.log(`%c${this.id}: ${message}`, \"color: red; font-weight: bold\", ...log);\n\t\t}\n\t},\n\n\trender: function(data) {\n\t\tthis.expressions.active = false;\n\n\t\tvar env = {context: this, data};\n\t\t_.hooks.run(\"render-start\", env);\n\n\t\tif (env.data) {\n\t\t\tthis.root.render(env.data);\n\t\t}\n\n\t\tthis.unsavedChanges = false;\n\n\t\tthis.expressions.active = true;\n\t\trequestAnimationFrame(() => this.expressions.update());\n\n\t\t_.hooks.run(\"render-end\", env);\n\t},\n\n\tedit: function() {\n\t\tthis.root.edit();\n\n\t\t$.bind(this.element, \"mouseenter.mavo:edit mouseleave.mavo:edit\", evt => {\n\t\t\tif (evt.target.matches(_.selectors.multiple)) {\n\t\t\t\tevt.target.classList.remove(\"mv-has-hovered-item\");\n\n\t\t\t\tvar parent = evt.target.parentNode.closest(_.selectors.multiple);\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tparent.classList.toggle(\"mv-has-hovered-item\", evt.type == \"mouseenter\");\n\t\t\t\t}\n\t\t\t}\n\t\t}, true);\n\n\t\tthis.setUnsavedChanges();\n\t},\n\n\t/**\n\t * Set this mavo instances unsavedChanges flag.\n\t * @param {Boolean} [value]\n\t *        If true, just sets the flag to true, no traversal.\n\t *        If false, sets the flag of the Mavo instance and every tree node to false\n\t *        If not provided, traverses the tree and recalculates the flag value.\n\t */\n\tsetUnsavedChanges: function(value) {\n\t\tvar unsavedChanges = !!value;\n\n\t\tif (!value) {\n\t\t\tthis.walk(obj => {\n\t\t\t\tif (obj.unsavedChanges) {\n\t\t\t\t\tunsavedChanges = true;\n\n\t\t\t\t\tif (value === false) {\n\t\t\t\t\t\tobj.unsavedChanges = false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn this.unsavedChanges = unsavedChanges;\n\t},\n\n\t// Conclude editing\n\tdone: function() {\n\t\tthis.root.done();\n\t\t$.unbind(this.element, \".mavo:edit\");\n\t\tthis.unsavedChanges = false;\n\t},\n\n\t/**\n\t * Update the backend for a given role\n\t * @return {Boolean} true if a change occurred, false otherwise\n\t */\n\tupdateBackend: function(role) {\n\t\tvar previous = this[role], backend, changed;\n\n\t\tif (this.index == 1) {\n\t\t\tbackend = _.Functions.url(role);\n\t\t}\n\n\t\tif (!backend) {\n\t\t\tbackend =  _.Functions.url(`${this.id}-${role}`) || this.element.getAttribute(\"mv-\" + role) || null;\n\t\t}\n\n\t\tif (backend) {\n\t\t\tbackend = backend.trim();\n\n\t\t\tif (backend == \"none\") {\n\t\t\t\tbackend = null;\n\t\t\t}\n\t\t}\n\n\t\tif (backend && (!previous || !previous.equals(backend))) {\n\t\t\t// We have a string, convert to a backend object if different than existing\n\t\t\tthis[role] = backend = _.Backend.create(backend, {\n\t\t\t\tmavo: this,\n\t\t\t\tformat: this.element.getAttribute(`mv-${role}-format`) || this.element.getAttribute(\"mv-format\")\n\t\t\t}, this.element.getAttribute(`mv-${role}-type`), this[role]);\n\n\t\t\tchanged = true;\n\t\t}\n\t\telse if (!backend) {\n\t\t\t// We had a backend and now we will un-have it\n\t\t\tthis[role] = null;\n\t\t}\n\n\t\tchanged = changed || (backend? !backend.equals(previous) : !!previous);\n\n\t\tif (changed) {\n\t\t\t// A change occured\n\t\t\tif (!this.storage && !this.source && this.init) {\n\t\t\t\t// If init is present with no storage and no source, init is equivalent to source\n\t\t\t\tthis.source = this.init;\n\t\t\t\tthis.init = null;\n\t\t\t}\n\n\t\t\tvar permissions = this.storage? this.storage.permissions : new Mavo.Permissions({edit: true, save: false});\n\t\t\tpermissions.parent = this.source && this.source.permissions;\n\t\t\tthis.permissions.parent = permissions;\n\n\t\t\tthis.primaryBackend = this.storage || this.source;\n\t\t}\n\n\t\treturn changed;\n\t},\n\n\t/**\n\t * load - Fetch data from source and render it.\n\t *\n\t * @return {Promise}  A promise that resolves when the data is loaded.\n\t */\n\tload: function() {\n\t\tvar backend = this.source || this.storage;\n\n\t\tif (!backend) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tthis.inProgress = \"Loading\";\n\n\t\treturn backend.ready.then(() => backend.load())\n\t\t.catch(err => {\n\t\t\t// Try again with init\n\t\t\tif (this.init && this.init != backend) {\n\t\t\t\tbackend = this.init;\n\t\t\t\treturn this.init.ready.then(() => this.init.load());\n\t\t\t}\n\n\t\t\t// No init, propagate error\n\t\t\treturn Promise.reject(err);\n\t\t})\n\t\t.catch(err => {\n\t\t\tif (err) {\n\t\t\t\tvar xhr = err instanceof XMLHttpRequest? err : err.xhr;\n\n\t\t\t\tif (xhr && xhr.status == 404) {\n\t\t\t\t\tthis.render(null);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar message = this._(\"problem-loading\");\n\n\t\t\t\t\tif (xhr) {\n\t\t\t\t\t\tmessage += xhr.status? this._(\"http-error\", err) : \": \" + this._(\"cant-connect\");\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.error(message, err);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t})\n\t\t.then(data => this.render(data))\n\t\t.then(() => {\n\t\t\tthis.inProgress = false;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tthis.dataLoaded.resolve();\n\t\t\t\t$.fire(this.element, \"mv-load\");\n\t\t\t});\n\t\t});\n\t},\n\n\tstore: function() {\n\t\tif (!this.storage) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tthis.inProgress = \"Saving\";\n\n\t\treturn this.storage.store(this.getData())\n\t\t\t.catch(err => {\n\t\t\t\tif (err) {\n\t\t\t\t\tvar message = this._(\"problem-saving\");\n\n\t\t\t\t\tif (err instanceof XMLHttpRequest) {\n\t\t\t\t\t\tmessage += \": \" + (err.status? this._(\"http-error\", err) : this._(\"cant-connect\"));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.error(message, err);\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t})\n\t\t\t.then(saved => {\n\t\t\t\tthis.inProgress = false;\n\t\t\t\treturn saved;\n\t\t\t});\n\t},\n\n\tupload: function(file, path = \"images/\" + file.name) {\n\t\tif (!this.uploadBackend) {\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\tthis.inProgress = this._(\"uploading\");\n\n\t\treturn this.uploadBackend.upload(file, path)\n\t\t\t.then(url => {\n\t\t\t\tthis.inProgress = false;\n\t\t\t\treturn url;\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tthis.error(this._(\"error-uploading\"), err);\n\t\t\t\tthis.inProgress = false;\n\t\t\t\treturn null;\n\t\t\t});\n\t},\n\n\tsave: function() {\n\t\treturn this.store().then(saved => {\n\t\t\tif (saved) {\n\t\t\t\t$.fire(this.element, \"mv-save\", saved);\n\n\t\t\t\tthis.lastSaved = Date.now();\n\t\t\t\tthis.root.save();\n\t\t\t\tthis.unsavedChanges = false;\n\t\t\t}\n\t\t});\n\t},\n\n\twalk: function() {\n\t\treturn this.root.walk(...arguments);\n\t},\n\n\tcalculateNeedsEdit: function(test) {\n\t\tvar needsEdit = false;\n\n\t\tthis.walk((obj, path) => {\n\t\t\tif (needsEdit) {\n\t\t\t\t// If already true, no need to descend further\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// True if both modes are allowed and node is not group\n\t\t\tneedsEdit = !obj.modes && obj.nodeType != \"Group\";\n\n\t\t\treturn !obj.modes;\n\t\t}, undefined, {descentReturn: true});\n\n\t\treturn needsEdit;\n\t},\n\n\tlive: {\n\t\tinProgress: function(value) {\n\t\t\t$.toggleAttribute(this.element, \"mv-progress\", value, value);\n\t\t\t$.toggleAttribute(this.element, \"aria-busy\", !!value, !!value);\n\t\t\tthis.element.style.setProperty(\"--mv-progress-text\", value? `\"${this._(value)}\"` : \"\");\n\t\t},\n\n\t\tunsavedChanges: function(value) {\n\t\t\tthis.element.classList.toggle(\"mv-unsaved-changes\", value);\n\t\t},\n\n\t\tneedsEdit: function(value) {\n\t\t\tthis.bar.toggle(\"edit\", value && this.permissions.edit);\n\t\t},\n\n\t\tstorage: function(value) {\n\t\t\tif (value !== this._storage && !value) {\n\t\t\t\tvar permissions = new Mavo.Permissions({edit: true, save: false});\n\t\t\t\tpermissions.parent = this.permissions.parent;\n\t\t\t\tthis.permissions.parent = permissions;\n\t\t\t}\n\t\t},\n\n\t\tprimaryBackend: function(value) {\n\t\t\tvalue = value || null;\n\n\t\t\tif (value != this._primaryBackend) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t},\n\n\t\tuploadBackend: {\n\t\t\tget: function() {\n\t\t\t\tif (this.storage && this.storage.upload) {\n\t\t\t\t\t// Prioritize storage\n\t\t\t\t\treturn this.storage;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tstatic: {\n\t\tversion: \"v0.1.5\",\n\n\t\tall: {},\n\n\t\tget: function(id) {\n\t\t\tif (id instanceof Element) {\n\t\t\t\t// Get by element\n\t\t\t\tfor (var name in _.all) {\n\t\t\t\t\tif (_.all[name].element == id) {\n\t\t\t\t\t\treturn _.all[name];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar name = typeof id === \"number\"? Object.keys(_.all)[id] : id;\n\n\t\t\treturn _.all[name] || null;\n\t\t},\n\n\t\tsuperKey: navigator.platform.indexOf(\"Mac\") === 0? \"metaKey\" : \"ctrlKey\",\n\t\tbase: location.protocol == \"about:\"? (document.currentScript? document.currentScript.src : \"http://mavo.io\") : location,\n\t\tdependencies: [],\n\n\t\tinit: function(container = document) {\n\t\t\tvar mavos = Array.isArray(arguments[0])? arguments[0] : $$(_.selectors.init, container);\n\n\t\t\tvar ret = mavos.filter(element => !_.get(element)) // not already inited\n\t\t\t\t.map(element => new _(element));\n\n\t\t\treturn ret;\n\t\t},\n\n\t\tUI: {},\n\n\t\thooks: new $.Hooks(),\n\n\t\tattributes: [\n\t\t\t\"mv-app\", \"mv-storage\", \"mv-source\", \"mv-init\", \"mv-path\", \"mv-multiple-path\", \"mv-format\",\n\t\t\t\"mv-attribute\", \"mv-default\", \"mv-mode\", \"mv-edit\", \"mv-permisssions\",\n\t\t\t\"mv-rel\", \"mv-value\"\n\t\t],\n\n\t\tlazy: {\n\t\t\tlocale: () => document.documentElement.lang || \"en-GB\",\n\t\t\ttoNode: () => Symbol(\"toNode\"),\n\t\t\ttoProxy: () => Symbol(\"toProxy\")\n\t\t}\n\t}\n});\n\nObject.defineProperty(_.all, \"length\", {\n\tget: function() {\n\t\treturn Object.keys(this).length;\n\t}\n});\n\n{\n\nlet s = _.selectors = {\n\tinit: \".mv-app, [mv-app], [data-mv-app]\",\n\tproperty: \"[property], [itemprop]\",\n\tspecificProperty: name => `[property=${name}], [itemprop=${name}]`,\n\tgroup: \"[typeof], [itemscope], [itemtype], [mv-group]\",\n\tmultiple: \"[mv-multiple]\",\n\tformControl: \"input, select, option, textarea\",\n\ttextInput: [\"text\", \"email\", \"url\", \"tel\", \"search\"].map(t => `input[type=${t}]`).join(\", \") + \", input:not([type]), textarea\",\n\tui: \".mv-ui\",\n\tcontainer: {\n\t\t// \"li\": \"ul, ol\",\n\t\t\"tr\": \"table\",\n\t\t\"option\": \"select\",\n\t\t// \"dt\": \"dl\",\n\t\t// \"dd\": \"dl\"\n\t}\n};\n\nlet arr = s.arr = selector => selector.split(/\\s*,\\s*/g);\nlet not = s.not = selector => arr(selector).map(s => `:not(${s})`).join(\"\");\nlet or = s.or = (selector1, selector2) => selector1 + \", \" + selector2;\nlet and = s.and = (selector1, selector2) => {\n\tvar ret = [], arr2 = arr(selector2);\n\n\tarr(selector1).forEach(s1 => ret.push(...arr2.map(s2 => s1 + s2)));\n\n\treturn ret.join(\", \");\n};\nlet andNot = s.andNot = (selector1, selector2) => and(selector1, not(selector2));\n\n$.extend(_.selectors, {\n\tprimitive: andNot(s.property, s.group),\n\trootGroup: andNot(s.group, s.property),\n\titem: or(s.multiple, s.group),\n\toutput: or(s.specificProperty(\"output\"), \".mv-output\")\n});\n\n}\n\n// Init mavo. Async to give other scripts a chance to modify stuff.\nrequestAnimationFrame(() => {\n\tvar polyfills = [];\n\n\t$.each({\n\t\t\"blissfuljs\": Array.from && document.documentElement.closest && self.URL && \"searchParams\" in URL.prototype,\n\t\t\"Intl.~locale.en\": self.Intl,\n\t\t\"IntersectionObserver\": self.IntersectionObserver,\n\t\t\"Symbol\": self.Symbol,\n\t\t\"Element.prototype.remove\": Element.prototype.remove\n\t}, (id, supported) => {\n\t\tif (!supported) {\n\t\t\tpolyfills.push(id);\n\t\t}\n\t});\n\n\tvar polyfillURL = \"https://cdn.polyfill.io/v2/polyfill.min.js?unknown=polyfill&features=\" + polyfills.map(a => a + \"|gated\").join(\",\");\n\n\t_.dependencies.push(\n\t\t// Plugins.load() must be run after DOM load to pick up all mv-plugins attributes\n\t\t$.ready().then(() => _.Plugins.load()),\n\t\t$.include(!polyfills.length, polyfillURL)\n\t);\n\n\t_.inited = $.ready().then(() => {\n\t\t$.attributes($$(_.selectors.init), {\"mv-progress\": \"Loading\"});\n\t\treturn _.ready;\n\t})\n\t.catch(console.error)\n\t.then(() => Mavo.init());\n\n\t_.ready = _.thenAll(_.dependencies);\n});\n\nStretchy.selectors.filter = \".mv-editor:not([property]), .mv-autosize\";\n\n// Define $ and $$ if they are not already defined\n// Primarily for backwards compat since we used to use Bliss Full.\nself.$ = self.$ || $;\nself.$$ = self.$$ || $$;\n\n})(Bliss, Bliss.$);\n","(function ($, $$) {\n\nvar _ = $.extend(Mavo, {\n\t/**\n\t * Load a file, only once\n\t */\n\tload: (url, base = document.currentScript? document.currentScript.src : location) => {\n\t\t_.loaded = _.loaded || new Set();\n\n\t\tif (_.loaded.has(url + \"\")) {\n\t\t\treturn;\n\t\t}\n\n\t\turl = new URL(url, base);\n\n\t\tif (/\\.css$/.test(url.pathname)) {\n\t\t\t// CSS file\n\t\t\t$.create(\"link\", {\n\t\t\t\t\"href\": url,\n\t\t\t\t\"rel\": \"stylesheet\",\n\t\t\t\t\"inside\": document.head\n\t\t\t});\n\n\t\t\t// No need to wait for stylesheets\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\t// JS file\n\t\treturn $.include(url);\n\t},\n\n\treadFile: (file, format = \"DataURL\") => {\n\t\tvar reader = new FileReader();\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treader.onload = f => resolve(reader.result);\n\t\t\treader.onerror = reader.onabort = reject;\n\t\t\treader[\"readAs\" + format](file);\n\t\t});\n\t},\n\n\ttoJSON: data => {\n\t\tif (data === null) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (typeof data === \"string\") {\n\t\t\t// Do not stringify twice!\n\t\t\treturn data;\n\t\t}\n\n\t\treturn JSON.stringify(data, null, \"\\t\");\n\t},\n\n\t/**\n\t * toJSON without cycles\n\t */\n\tsafeToJSON: function(o) {\n\t\tvar cache = self.WeakSet? new WeakSet() : new Set();\n\n\t\treturn JSON.stringify(o, (key, value) => {\n\t\t\tif (typeof value === \"object\" && value !== null) {\n\t\t\t\t// No circular reference found\n\n\t\t\t\tif (cache.has(value)) {\n\t\t\t\t\treturn; // Circular reference found!\n\t\t\t\t}\n\n\t\t\t\tcache.add(value);\n\t\t\t}\n\n\t\t\treturn value;\n\t\t});\n\t},\n\n\tobjectify: (value, properties) => {\n\t\tvar primitive = Mavo.value(value);\n\n\t\tif (typeof value !== \"object\" || value === null) {\n\t\t\tif (value === null) {\n\t\t\t\tvalue = {\n\t\t\t\t\t[Symbol.toStringTag]: \"Null\",\n\t\t\t\t\ttoJSON: () => null\n\t\t\t\t};\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar constructor = value.constructor;\n\t\t\t\tvalue = new constructor(primitive);\n\t\t\t\tvalue[Symbol.toStringTag] = constructor.name;\n\t\t\t}\n\n\t\t\tvalue.valueOf = value[Symbol.toPrimitive] = () => primitive;\n\t\t}\n\n\t\treturn $.extend(value, properties);\n\t},\n\n\tvalue: value => value && value.valueOf? value.valueOf() : value,\n\n\t/**\n\t * Array & set utlities\n\t */\n\n\t// If the passed value is not an array, convert to an array\n\ttoArray: arr => {\n\t\treturn arr === undefined? [] : Array.isArray(arr)? arr : [arr];\n\t},\n\n\t// Delete an element from an array\n\t// @param all {Boolean} Delete more than one?\n\tdelete: (arr, element, all) => {\n\t\tdo {\n\t\t\tvar index = arr && arr.indexOf(element);\n\n\t\t\tif (index > -1) {\n\t\t\t\tarr.splice(index, 1);\n\t\t\t}\n\t\t} while (index > -1 && all);\n\t},\n\n\t// Recursively flatten a multi-dimensional array\n\tflatten: arr => {\n\t\tif (!Array.isArray(arr)) {\n\t\t\treturn [arr];\n\t\t}\n\n\t\treturn arr.reduce((prev, c) => _.toArray(prev).concat(_.flatten(c)), []);\n\t},\n\n\t// Push an item to an array iff it's not already in there\n\tpushUnique: (arr, item) => {\n\t\tif (arr.indexOf(item) === -1) {\n\t\t\tarr.push(item);\n\t\t}\n\t},\n\n\tunion: (set1, set2) => {\n\t\treturn new Set([...(set1 || []), ...(set2 || [])]);\n\t},\n\n\t// Filter an array in place\n\t// TODO add index to callback\n\tfilter: (arr, callback) => {\n\t\tfor (var i=0; i<arr.length; i++) {\n\t\t\tif (!callback(arr[i])) {\n\t\t\t\tarr.splice(i, 1);\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * DOM element utilities\n\t */\n\n\tis: function(thing, ...elements) {\n\t\tfor (let i=0, element; i < elements.length; i++) {\n\t\t\telement = elements[i];\n\n\t\t\tif (element && element.matches && element.matches(_.selectors[thing])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Get the current value of a CSS property on an element\n\t */\n\tgetStyle: (element, property) => {\n\t\tif (element) {\n\t\t\tvar value = getComputedStyle(element).getPropertyValue(property);\n\n\t\t\tif (value) {\n\t\t\t\treturn value.trim();\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Get/set data on an element\n\t */\n\tdata: function(element, name, value) {\n\t\tvar data = _.elementData.get(element) || {}, ret;\n\n\t\tif (arguments.length == 2) {\n\t\t\tret = data[name];\n\t\t}\n\t\telse if (value === undefined) {\n\t\t\tdelete data[name];\n\t\t}\n\t\telse {\n\t\t\tret = data[name] = value;\n\t\t}\n\n\t\t_.elementData.set(element, data);\n\t\treturn ret;\n\t},\n\n\telementData: new WeakMap(),\n\n\t/**\n\t * Get node from path or get path of a node to an ancestor\n\t * For maximum robustness, all but the last path segment refer to elements only.\n\t * The last part of the path is a decimal: the integer part of the decimal is element index,\n\t * the decimal part is node index *after* that element and starts from 1.\n\t * If the node has no previous element sibling, the integer part of the index will be -1.\n\t */\n\telementPath: function (ancestor, element) {\n\t\tif (Array.isArray(element)) {\n\t\t\t// Get element by path\n\t\t\tvar path = element;\n\n\t\t\tvar ret = path.reduce((acc, cur) => {\n\t\t\t\treturn acc.children[cur >> 0] || acc;\n\t\t\t}, ancestor);\n\n\t\t\tvar last = path[path.length - 1];\n\n\t\t\tif (last != (last >> 0)) {\n\t\t\t\t// We are returning a non-element node\n\t\t\t\tvar offset = +(last + \"\").split(\".\")[1];\n\n\t\t\t\tif (last >> 0 < 0) {\n\t\t\t\t\tret = ret.firstChild;\n\t\t\t\t\toffset--;\n\t\t\t\t}\n\n\t\t\t\tfor (var i=0; i<offset; i++) {\n\t\t\t\t\tret = ret.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\t\telse {\n\t\t\t// Get path\n\t\t\tvar path = [];\n\n\t\t\tfor (var parent = element; parent && parent != ancestor; parent = parent.parentNode) {\n\t\t\t\tvar index = 0;\n\t\t\t\tvar countNonElementSiblings = parent === element && element.nodeType !== 1;\n\t\t\t\tvar offset = countNonElementSiblings? 1 : 0;\n\t\t\t\tvar sibling = parent;\n\n\t\t\t\twhile (sibling = sibling[`previous${countNonElementSiblings? \"\" : \"Element\"}Sibling`]) {\n\t\t\t\t\tif (countNonElementSiblings) {\n\t\t\t\t\t\toffset++;\n\n\t\t\t\t\t\tif (sibling.nodeType == 1) {\n\t\t\t\t\t\t\tcountNonElementSiblings = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (offset > 0) {\n\t\t\t\t\tindex = index - 1 + \".\" + offset;\n\t\t\t\t}\n\n\t\t\t\tpath.unshift(index);\n\t\t\t}\n\n\t\t\treturn parent? path : null;\n\t\t}\n\t},\n\n\t/**\n\t * Revocably add/remove elements from the DOM\n\t */\n\trevocably: {\n\t\tadd: function(element, parent) {\n\t\t\tvar comment = _.revocably.isRemoved(element);\n\n\t\t\tif (comment && comment.parentNode) {\n\t\t\t\tcomment.parentNode.replaceChild(element, comment);\n\t\t\t}\n\t\t\telse if (element && parent && !element.parentNode) {\n\t\t\t\t// Has not been revocably removed because it has never even been added\n\t\t\t\tparent.appendChild(element);\n\t\t\t}\n\n\t\t\treturn comment;\n\t\t},\n\n\t\tremove: function(element, commentText) {\n\t\t\tif (!element) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar comment = _.data(element, \"commentstub\");\n\n\t\t\tif (!comment) {\n\t\t\t\tcommentText = commentText || element.id || element.className || element.nodeName;\n\t\t\t\tcomment = _.data(element, \"commentstub\", document.createComment(commentText));\n\t\t\t}\n\n\t\t\tif (element.parentNode) {\n\t\t\t\t// In DOM, remove\n\t\t\t\telement.parentNode.replaceChild(comment, element);\n\t\t\t}\n\n\t\t\treturn comment;\n\t\t},\n\n\t\tisRemoved: function(element) {\n\t\t\tif (!element || element.parentNode) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar comment = _.data(element, \"commentstub\");\n\n\t\t\tif (comment && comment.parentNode) {\n\t\t\t\treturn comment;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\tsetAttribute: function(element, attribute, value) {\n\t\t\tvar previousValue = _.data(element, \"attribute-\" + attribute);\n\n\t\t\tif (previousValue === undefined) {\n\t\t\t\t// Only set this when there's no old value stored, otherwise\n\t\t\t\t// if called multiple times, it could result in losing the original value\n\t\t\t\t_.data(element, \"attribute-\" + attribute, element.getAttribute(attribute));\n\t\t\t}\n\n\t\t\telement.setAttribute(attribute, value);\n\t\t},\n\n\t\trestoreAttribute: function(element, attribute) {\n\t\t\tvar previousValue = _.data(element, \"attribute-\" + attribute);\n\n\t\t\tif (previousValue !== undefined) {\n\t\t\t\t$.toggleAttribute(element, attribute, previousValue);\n\t\t\t\t_.data(element, \"attribute-\" + attribute, undefined);\n\t\t\t}\n\t\t}\n\t},\n\n\tinView: {\n\t\tis: element => {\n\t\t\tvar r = element.getBoundingClientRect();\n\n\t\t\treturn (0 <= r.bottom && r.bottom <= innerHeight || 0 <= r.top && r.top <= innerHeight) // vertical\n\t\t\t       && (0 <= r.right && r.right <= innerWidth || 0 <= r.left && r.left <= innerWidth); // horizontal\n\t\t},\n\n\t\twhen: element => {\n\t\t\tvar observer = _.inView.observer = _.inView.observer || new IntersectionObserver(function(entries) {\n\t\t\t\tentries.forEach(entry => {\n\t\t\t\t\tthis.unobserve(entry.target);\n\t\t\t\t\t$.fire(entry.target, \"mv-inview\", {entry});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tif (_.is(element)) {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\n\t\t\t\tobserver.observe(element);\n\n\t\t\t\tvar callback = evt => {\n\t\t\t\t\telement.removeEventListener(\"mv-inview\", callback);\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\telement.addEventListener(\"mv-inview\", callback);\n\t\t\t});\n\t\t}\n\t},\n\n\tscrollIntoViewIfNeeded: element => {\n\t\tif (element && !Mavo.inView.is(element)) {\n\t\t\telement.scrollIntoView({behavior: \"smooth\"});\n\t\t}\n\t},\n\n\t/**\n\t * Set attribute only if it doesnt exist\n\t */\n\tsetAttributeShy: function(element, attribute, value) {\n\t\tif (!element.hasAttribute(attribute)) {\n\t\t\telement.setAttribute(attribute, value);\n\t\t}\n\t},\n\n\t/**\n\t * Get the value of an attribute, with fallback attributes in priority order.\n\t */\n\tgetAttribute: function(element, ...attributes) {\n\t\tfor (let i=0, attribute; attribute = attributes[i]; i++) {\n\t\t\tlet value = element.getAttribute(attribute);\n\n\t\t\tif (value) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Get the element identified by the URL hash\n\t */\n\tgetTarget: function() {\n\t\tvar id = location.hash.substr(1);\n\t\treturn document.getElementById(id);\n\t},\n\n\t/**\n\t * Object utilities\n\t */\n\n\t/**\n\t * Check if property exists in object. Like the in operator but more robust and does not throw.\n\t * Why not just in? E.g. \"foo\".length is 3 but \"length\" in \"foo\" throws\n\t */\n\tin: function(obj, property) {\n\t\tif (obj) {\n\t\t\treturn (typeof obj === \"object\" && property in obj) || obj[property] !== undefined;\n\t\t}\n\t},\n\n\t/**\n\t * Get real property name from case insensitive property\n\t */\n\tgetCanonicalProperty: function(obj, property) {\n\t\tif (obj && (property || property === 0)) {\n\t\t\t// Property in object?\n\t\t\tif (_.in(obj, property)) {\n\t\t\t\treturn property;\n\t\t\t}\n\n\t\t\tif (property.toLowerCase) {\n\t\t\t\t// Lowercase property in object?\n\t\t\t\tvar propertyL = property.toLowerCase();\n\n\t\t\t\tif (_.in(obj, propertyL)) {\n\t\t\t\t\treturn propertyL;\n\t\t\t\t}\n\n\t\t\t\t// Any case property in object?\n\t\t\t\tvar properties = Object.keys(obj);\n\t\t\t\tvar i = properties.map(p => p.toLowerCase()).indexOf(propertyL);\n\n\t\t\t\tif (i > -1) {\n\t\t\t\t\treturn properties[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tsubset: function(obj, path, value) {\n\t\tif (arguments.length == 3) {\n\t\t\t// Put\n\t\t\tif (path.length) {\n\t\t\t\tvar last = path[path.length - 1];\n\t\t\t\tvar parent = $.value(obj, ...path.slice(0, -1));\n\n\t\t\t\tif (Array.isArray(parent) && Array.isArray(value)) {\n\t\t\t\t\t// Merge arrays instead of adding array inside array\n\t\t\t\t\tparent.splice(last, 1, ...value);\n\t\t\t\t}\n\t\t\t\telse if (parent) {\n\t\t\t\t\tparent[path[path.length - 1]] = value;\n\t\t\t\t}\n\n\t\t\t\treturn obj;\n\t\t\t}\n\n\t\t\treturn value;\n\t\t}\n\t\telse if (typeof obj == \"object\" && path && path.length) { // Get\n\t\t\treturn path.reduce((obj, property, i) => {\n\t\t\t\tvar meta = {};\n\t\t\t\tvar ret = Mavo.Functions.get(obj, property, meta);\n\n\t\t\t\t// We don't yet support multiple properties at the same level\n\t\t\t\t// i.e. the path can't be for the 2nd and 3rd item\n\t\t\t\tpath[i] = Array.isArray(meta.property)? meta.property[0] : meta.property;\n\n\t\t\t\tif (ret === undefined && meta.query) {\n\t\t\t\t\t// Not found, return dummy if query\n\t\t\t\t\tret = {[meta.query.property]: meta.query.value};\n\t\t\t\t}\n\n\t\t\t\treturn ret;\n\t\t\t}, obj);\n\t\t}\n\t\telse {\n\t\t\treturn obj;\n\t\t}\n\t},\n\n\tclone: function(o) {\n\t\treturn JSON.parse(_.safeToJSON(o));\n\t},\n\n\t// Credit: https://remysharp.com/2010/07/21/throttling-function-calls\n\tdebounce: function (fn, delay) {\n\t\tif (!delay) {\n\t\t\t// No throttling\n\t\t\treturn fn;\n\t\t}\n\n\t\tvar timer = null, code;\n\n\t\treturn function () {\n\t\t\tvar context = this, args = arguments;\n\n\t\t\tcode = function () {\n\t\t\t\tfn.apply(context, args);\n\t\t\t\tremoveEventListener(\"beforeunload\", code);\n\t\t\t};\n\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = setTimeout(code, delay);\n\t\t\taddEventListener(\"beforeunload\", code);\n\t\t};\n\t},\n\n\ttimeout: delay => new Promise(resolve => setTimeout(resolve, delay)),\n\n\tescapeRegExp: s => s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\"),\n\n\tmatches: (str, regex) => {\n\t\tvar ret = (str + \"\").match(regex);\n\t\treturn ret? ret : [];\n\t},\n\n\tmatch: (str, regex, i=0) => _.matches(str, regex)[i] || \"\",\n\n\tobserveResize: function(element, callbackOrObserver) {\n\t\tif (!self.ResizeObserver) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar previousRect = null;\n\t\tvar ro = callbackOrObserver instanceof ResizeObserver? callbackOrObserver : new ResizeObserver(entries => {\n\t\t\tvar contentRect = entries[entries.length - 1].contentRect;\n\n\t\t\tif (previousRect\n\t\t\t\t&& previousRect.width == contentRect.width\n\t\t\t\t&& previousRect.height == contentRect.height) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcallbackOrObserver(entries);\n\n\t\t\tpreviousRect = contentRect;\n\t\t});\n\n\t\tro.observe(element);\n\n\t\treturn ro;\n\t},\n\n\tObserver: $.Class({\n\t\tconstructor: function(element, attribute, callback, o = {}) {\n\t\t\tif (callback instanceof MutationObserver) {\n\t\t\t\tthis.observer = callback;\n\t\t\t}\n\n\t\t\tthis.observer = this.observer || new MutationObserver(callback);\n\t\t\tthis.element = element;\n\t\t\tthis.callback = callback;\n\t\t\tthis.attribute = attribute;\n\n\t\t\tthis.options = $.extend({}, o);\n\n\t\t\tif (attribute) {\n\t\t\t\t$.extend(this.options, {\n\t\t\t\t\tattributes: true,\n\t\t\t\t\tattributeFilter: this.attribute == \"all\"? undefined : Mavo.toArray(this.attribute),\n\t\t\t\t\tattributeOldValue: !!o.oldValue\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!this.attribute || this.attribute == \"all\") {\n\t\t\t\t$.extend(this.options, {\n\t\t\t\t\tcharacterData: true,\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: true,\n\t\t\t\t\tcharacterDataOldValue: !!o.oldValue\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.run();\n\t\t},\n\n\t\tstop: function() {\n\t\t\tif (this.observer) {\n\t\t\t\tthis.observer.disconnect();\n\t\t\t}\n\n\t\t\tthis.running = false;\n\n\t\t\treturn this;\n\t\t},\n\n\t\trun: function() {\n\t\t\tif (this.observer) {\n\t\t\t\tthis.observer.observe(this.element, this.options);\n\t\t\t\tthis.running = true;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Disconnect an observer, run some code, then observe again\n\t\t */\n\t\tsneak: function(callback) {\n\t\t\tif (this.running) {\n\t\t\t\tthis.stop();\n\t\t\t\tvar ret = callback();\n\t\t\t\tthis.run();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar ret = callback();\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\n\t\tdestroy: function() {\n\t\t\tthis.stop();\n\t\t\tthis.observer = this.element = null;\n\t\t},\n\n\t\tstatic: {\n\t\t\tsneak: function(observer, callback) {\n\t\t\t\treturn observer? observer.sneak(callback) : callback();\n\t\t\t}\n\t\t}\n\t}),\n\n\tdefer: function(constructor) {\n\t\tvar res, rej;\n\n\t\tvar promise = new Promise((resolve, reject) => {\n\t\t\tif (constructor) {\n\t\t\t\tconstructor(resolve, reject);\n\t\t\t}\n\n\t\t\tres = resolve;\n\t\t\trej = reject;\n\t\t});\n\n\t\tpromise.resolve = a => {\n\t\t\tres(a);\n\t\t\treturn promise;\n\t\t};\n\n\t\tpromise.reject = a => {\n\t\t\trej(a);\n\t\t\treturn promise;\n\t\t};\n\n\t\treturn promise;\n\t},\n\n\t/**\n\t * Similar to Promise.all() but can handle post-hoc additions\n\t * and does not reject if one promise rejects.\n\t */\n\tthenAll: function(iterable) {\n\t\t// Turn rejected promises into resolved ones\n\t\t$$(iterable).forEach(promise => {\n\t\t\tif ($.type(promise) == \"promise\") {\n\t\t\t\tpromise = promise.catch(err => err);\n\t\t\t}\n\t\t});\n\n\t\treturn Promise.all(iterable).then(resolved => {\n\t\t\tif (iterable.length != resolved.length) {\n\t\t\t\t// The list of promises or values changed. Return a new Promise.\n\t\t\t\t// The original promise won't resolve until the new one does.\n\t\t\t\treturn _.thenAll(iterable);\n\t\t\t}\n\n\t\t\t// The list of promises or values stayed the same.\n\t\t\t// Return results immediately.\n\t\t\treturn resolved;\n\t\t});\n\t},\n\n\t/**\n\t * Run & Return a function\n\t */\n\trr: function(f) {\n\t\tf();\n\t\treturn f;\n\t},\n\n\t// Get out of bounds array index to wrap around\n\twrap: (index, length) => index < 0? length - 1 : index >= length? 0 : index,\n\n\t/**\n\t * Parses a simple CSS-like text format for declaring key-value options:\n\t * Pairs are comma or semicolon-separated, key and value are colon separated.\n\t * Escapes are supported, via backslash. Useful for attributes.\n\t */\n\toptions: str => {\n\t\tvar ret = {};\n\n\t\t(str.trim().match(/(?:\\\\[,;]|[^,;])+/g) || []).forEach(option => {\n\t\t\tif (option) {\n\t\t\t\toption = option.trim().replace(/\\\\([,;])/g, \"$1\");\n\t\t\t\tvar pair = option.match(/^\\s*((?:\\\\:|[^:])+?)\\s*:\\s*(.+)$/);\n\n\t\t\t\tif (pair) {\n\t\t\t\t\tret[pair[1].replace(/\\\\:/g, \":\")] = pair[2];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// If no value, it's boolean\n\t\t\t\t\tret[option] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn ret;\n\t}\n});\n\n// Bliss plugins\n\n$.add(\"toggleAttribute\", function(name, value, test = value !== null) {\n\tif (test) {\n\t\tthis.setAttribute(name, value);\n\t}\n\telse {\n\t\tthis.removeAttribute(name);\n\t}\n});\n\n// Provide shortcuts to long property chains\n$.proxy = $.classProps.proxy = $.overload(function(obj, property, proxy) {\n\tObject.defineProperty(obj, property, {\n\t\tget: function() {\n\t\t\treturn this[proxy][property];\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis[proxy][property] = value;\n\t\t},\n\t\tconfigurable: true,\n\t\tenumerable: true\n\t});\n\n\treturn obj;\n});\n\n$.classProps.propagated = function(proto, names) {\n\tMavo.toArray(names).forEach(name => {\n\t\tvar existing = proto[name];\n\n\t\tproto[name] = function() {\n\t\t\tvar ret = existing && existing.apply(this, arguments);\n\n\t\t\tif (this.propagate && ret !== false) {\n\t\t\t\tthis.propagate(name);\n\t\t\t}\n\t\t};\n\t});\n};\n\n// :target-within shim\nfunction updateTargetWithin() {\n\tvar element = _.getTarget();\n\tconst cl = \"mv-target-within\";\n\n\t$$(\".\" + cl).forEach(el => el.classList.remove(cl));\n\n\twhile (element && element.classList) {\n\t\telement.classList.add(cl);\n\t\telement = element.parentNode;\n\t}\n};\n\naddEventListener(\"hashchange\", updateTargetWithin);\nvar idObserver = new Mavo.Observer(document.documentElement, \"id\", updateTargetWithin);\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nvar _ = Mavo.Locale = $.Class({\n\tconstructor: function(lang, phrases) {\n\t\tthis.lang = lang;\n\t\tthis.phrases = {};\n\t\tthis.extend(phrases);\n\t},\n\n\tget fallback() {\n\t\t// TODO should we fallback to other dialects? I.e. should en-US fallback to en-GB if en didn't exist?\n\t\tif (_.all[this.baseLang]) {\n\t\t\treturn _.all[this.baseLang];\n\t\t}\n\n\t\tif (this !== _.default) {\n\t\t\treturn _.default;\n\t\t}\n\t},\n\n\textend: function(phrases) {\n\t\t$.extend(this.phrases, phrases);\n\t},\n\n\tphrase: function(id, vars) {\n\t\tvar key = id.toLowerCase();\n\t\tvar phrase = this.phrases[key];\n\n\t\tif (phrase === undefined && this.fallback) {\n\t\t\tphrase = this.fallback.phrase(key);\n\t\t}\n\n\t\tif (phrase === undefined) {\n\t\t\t// Everything failed, use id\n\t\t\tphrase = Mavo.Functions.readable(key);\n\t\t}\n\t\telse if (vars) {\n\t\t\tvar keys = Mavo.matches(phrase, /\\{\\w+(?=\\})/g).map(v => v.slice(1));\n\t\t\tMavo.Functions.unique(keys).forEach(name => {\n\t\t\t\tif (name in vars) {\n\t\t\t\t\tphrase = phrase.replace(RegExp(`{${name}}`, \"gi\"), vars[name]);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn phrase;\n\t},\n\n\tlive: {\n\t\tlang: function(lang) {\n\t\t\tthis.baseLang = _.getBaseLang(lang);\n\n\t\t\tif (lang == this.baseLang) {\n\t\t\t\tthis.baseLang = null;\n\t\t\t}\n\t\t}\n\t},\n\n\tstatic: {\n\t\tall: {},\n\n\t\t/**\n\t\t * Register new locale or extend existing locale\n\t\t */\n\t\tregister: function(lang, phrases) {\n\t\t\tif (_.all[lang]) {\n\t\t\t\t_.all[lang].extend(phrases);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_.all[lang] = new _(lang, phrases);\n\t\t\t}\n\t\t},\n\n\t\tmatch: function(lang = \"\") {\n\t\t\treturn _.all[lang] || _.all[_.getBaseLang(lang)];\n\t\t},\n\n\t\tget: function(lang) {\n\t\t\treturn _.match(lang) || _.default;\n\t\t},\n\n\t\tgetBaseLang: function(lang) {\n\t\t\treturn lang.split(\"-\")[0];\n\t\t},\n\n\t\tlazy: {\n\t\t\tdefault: () => {\n\t\t\t\treturn _.match(Mavo.locale) || _.all.en;\n\t\t\t}\n\t\t}\n\t}\n});\n\n/**\n * Use phrase\n */\nMavo.prototype._ = function(id, vars) {\n\treturn this.locale && id? this.locale.phrase(id, vars) : id;\n};\n\n$.ready().then(() => {\n\t$$(\"datalist.mv-phrases[lang]\").forEach(datalist => {\n\t\tvar phrases = $$(\"option\", datalist).reduce((o, option) => {\n\t\t\to[option.value] = option.textContent.trim();\n\t\t\treturn o;\n\t\t}, {});\n\n\t\tMavo.Locale.register(datalist.lang, phrases);\n\t});\n});\n\n})(Bliss, Bliss.$);\n","Mavo.Locale.register(\"en\", {\n\t\"edit\": \"Edit\",\n\t\"save\": \"Save\",\n\t\"import\": \"Import\",\n\t\"export\": \"Export\",\n\t\"logout\": \"Logout\",\n\t\"login\": \"Login\",\n\t\"loading\": \"Loading\",\n\t\"uploading\": \"Uploading\",\n\t\"saving\": \"Saving\",\n\t\"logged-in-as\": \"Logged in to {id} as \",\n\t\"login-to\": \"Login to {id}\",\n\t\"error-uploading\": \"Error uploading file\",\n\t\"cannot-load-uploaded-file\": \"Cannot load uploaded file\",\n\t\"filename\": \"Filename?\",\n\t\"problem-saving\": \"Problem saving data\",\n\t\"problem-loading\": \"Problem loading data\",\n\t\"cannot-parse\": \"Cant understand this file\",\n\t\"http-error\": \"HTTP error {status}: {statusText}\",\n\t\"cant-connect\": \"Cant connect to the Internet\",\n\t\"add-item\": \"Add {name}\",\n\t\"add-item-before\": \"Add new {name} before\",\n\t\"add-item-after\": \"Add new {name} after\",\n\t\"drag-to-reorder\": \"Drag to reorder {name}\",\n\t\"delete-item\": \"Delete this {name}\",\n\t\"gh-updated-file\": \"Updated {name}\",\n\t\"gh-edit-suggestion-saved-in-profile\": \"Your edits are saved to <a href=\\\"{previewURL}\\\" target=\\\"_blank\\\">your own profile</a>, because you are not allowed to edit this page.\",\n\t\"gh-edit-suggestion-instructions\": \"Write a short description of your edits below to suggest them to the page admins:\",\n\t\"gh-edit-suggestion-notreviewed\": \"You have selected to suggest your edits to the page admins. Your suggestions have not been reviewed yet.\",\n\t\"gh-edit-suggestion-send\": \"Send edit suggestion\",\n\t\"gh-edit-suggestion-revoke\": \"Revoke edit suggestion\",\n\t\"gh-edit-suggestion-reason-placeholder\": \"I added / corrected / deleted ...\",\n\t\"gh-edit-suggestion-cancelled\": \"Edit suggestion cancelled successfully!\",\n\t\"gh-edit-suggestion-title\": \"Suggested edits to data\",\n\t\"gh-edit-suggestion-body\": `Hello there! I used Mavo to suggest the following edits:\n{description}\nPreview my changes here: {previewURL}`,\n\t\"gh-edit-suggestion-sent\": \"Edit suggestion sent successfully!\"\n});\n","(function ($, $$) {\n\nMavo.attributes.push(\"mv-plugins\");\n\nvar _ = Mavo.Plugins = {\n\tloaded: {},\n\n\tload: function() {\n\t\t_.plugins = new Set();\n\n\t\t$$(\"[mv-plugins]\").forEach(element => {\n\t\t\telement\n\t\t\t\t.getAttribute(\"mv-plugins\").trim().split(/\\s+/)\n\t\t\t\t.forEach(plugin => _.plugins.add(plugin));\n\t\t});\n\n\t\tif (!_.plugins.size) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\t// Fetch plugin index\n\t\treturn $.fetch(_.url + \"/plugins.json\", {\n\t\t\tresponseType: \"json\"\n\t\t}).then(xhr => {\n\t\t\t// Fetch plugins\n\t\t\treturn Mavo.thenAll(xhr.response.plugin\n\t\t\t\t.filter(plugin => _.plugins.has(plugin.id))\n\t\t\t\t.map(plugin => {\n\t\t\t\t\t// Load plugin\n\t\t\t\t\tvar filename = `mavo-${plugin.id}.js`;\n\n\t\t\t\t\tif (plugin.repo) {\n\t\t\t\t\t\t// Plugin hosted in a separate repo\n\t\t\t\t\t\tvar url = `https://raw.githubusercontent.com/${plugin.repo}/master/${filename}`;\n\n\t\t\t\t\t\treturn _.loaded[plugin.id]? Promise.resolve() : $.fetch(url).then(xhr => {\n\t\t\t\t\t\t\t$.create(\"script\", {\n\t\t\t\t\t\t\t\ttextContent: xhr.responseText,\n\t\t\t\t\t\t\t\tinside: document.head\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Plugin hosted in the mavo-plugins repo\n\t\t\t\t\t\tvar url = `${_.url}/${plugin.id}/${filename}`;\n\n\t\t\t\t\t\treturn $.include(_.loaded[plugin.id], url);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t});\n\t},\n\n\tregister: function(name, o = {}) {\n\t\tif (_.loaded[name]) {\n\t\t\t// Do not register same plugin twice\n\t\t\treturn;\n\t\t}\n\n\t\tMavo.hooks.add(o.hooks);\n\n\t\tfor (let Class in o.extend) {\n\t\t\tlet existing = Class == \"Mavo\"? Mavo : Mavo[Class];\n\n\t\t\tif ($.type(existing) === \"function\") {\n\t\t\t\t$.Class(existing, o.extend[Class]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$.extend(existing, o.extend[Class]);\n\t\t\t}\n\t\t}\n\n\t\tvar ready = [];\n\n\t\tif (o.ready) {\n\t\t\tready.push(o.ready);\n\t\t}\n\n\t\tif (o.dependencies) {\n\t\t\tvar base = document.currentScript? document.currentScript.src : location;\n\t\t\tvar dependencies = o.dependencies.map(url => Mavo.load(url, base));\n\t\t\tready.push(...dependencies);\n\t\t}\n\n\t\tif (ready.length) {\n\t\t\tMavo.dependencies.push(...ready);\n\t\t}\n\n\t\t_.loaded[name] = o;\n\n\t\tif (o.init) {\n\t\t\tPromise.all(ready).then(() => o.init());\n\t\t}\n\t},\n\n\turl: \"https://plugins.mavo.io\"\n};\n\n})(Bliss, Bliss.$);\n","(function ($, $$) {\n\nMavo.attributes.push(\"mv-bar\");\n\nvar _ = Mavo.UI.Bar = $.Class({\n\tconstructor: function(mavo) {\n\t\tthis.mavo = mavo;\n\n\t\tthis.element = $(\".mv-bar\", this.mavo.element);\n\t\tthis.template = this.mavo.element.getAttribute(\"mv-bar\") || \"\";\n\n\t\tif (this.element) {\n\t\t\tthis.custom = true;\n\t\t\tthis.template += \" \" + (this.element.getAttribute(\"mv-bar\") || \"\");\n\t\t\tthis.template = this.template.trim();\n\n\t\t\tfor (let id in _.controls) {\n\t\t\t\tthis[id] = $(`.mv-${id}`, this.element);\n\n\t\t\t\tif (this[id]) {\n\t\t\t\t\tthis.template = this.template || \"with\";\n\t\t\t\t\tthis.template += ` ${id}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.element = $.create({\n\t\t\t\tclassName: \"mv-bar mv-ui\",\n\t\t\t\tstart: this.mavo.element,\n\t\t\t\tinnerHTML: \"<button>&nbsp;</button>\"\n\t\t\t});\n\t\t}\n\n\t\tif (this.element.classList.contains(\"mv-compact\")) {\n\t\t\tthis.noResize = true;\n\t\t}\n\n\t\t// yes- is deprecated and will be removed\n\t\tif (/\\byes-\\w+/.test(this.template)) {\n\t\t\tconsole.warn(`${this.mavo.id}: You used mv-bar=\"${this.template}\". Note that yes-* in mv-bar is deprecated and will be removed in v0.1.6. Please use the new syntax: http://mavo.io/docs/ui/#bar`);\n\t\t}\n\n\t\tthis.controls = _.getControls(this.template);\n\n\t\tif (this.controls.length) {\n\t\t\t// Measure height of 1 row\n\t\t\tthis.targetHeight = this.element.offsetHeight;\n\t\t}\n\n\t\tif (!this.custom) {\n\t\t\tthis.element.innerHTML = \"\";\n\t\t}\n\n\t\tthis.controls.forEach(id => {\n\t\t\tlet o = _.controls[id];\n\n\t\t\tif (this[id]) {\n\t\t\t\t// Custom control, remove to not mess up order\n\t\t\t\tthis[id].remove();\n\t\t\t}\n\n\t\t\tif (o.create) {\n\t\t\t\tthis[id] = o.create.call(this.mavo, this[id]);\n\t\t\t}\n\t\t\telse if (!this[id]) {\n\t\t\t\tthis[id] = $.create(\"button\", {\n\t\t\t\t\tclassName: `mv-${id}`,\n\t\t\t\t\ttextContent: this.mavo._(id)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// We initially add all of them to retain order,\n\t\t\t// then we remove revocably when/if needed\n\t\t\tthis.add(id);\n\n\t\t\tif (o.permission) {\n\t\t\t\tthis.permissions.can(o.permission, () => {\n\t\t\t\t\tthis.toggle(id, !o.condition || o.condition.call(this.mavo));\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.remove(id);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (o.condition && !o.condition.call(this.mavo)) {\n\t\t\t\tthis.remove(id);\n\t\t\t}\n\n\t\t\tfor (var events in o.events) {\n\t\t\t\t$.bind(this[id], events, o.events[events].bind(this.mavo));\n\t\t\t}\n\t\t});\n\n\t\tfor (let id in _.controls) {\n\t\t\tlet o = _.controls[id];\n\n\t\t\tif (o.action) {\n\t\t\t\t$.delegate(this.mavo.element, \"click\", \".mv-\" + id, evt => {\n\t\t\t\t\tif (!o.permission || this.permissions.is(o.permission)) {\n\t\t\t\t\t\to.action.call(this.mavo);\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.controls.length && !this.noResize) {\n\t\t\tthis.resize();\n\n\t\t\tif (self.ResizeObserver) {\n\t\t\t\tthis.resizeObserver = Mavo.observeResize(this.element, entries => {\n\t\t\t\t\tthis.resize();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\tresize: function() {\n\t\tif (!this.targetHeight) {\n\t\t\t// We don't have a correct measurement for target height, abort\n\t\t\tthis.targetHeight = this.element.offsetHeight;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.resizeObserver && this.resizeObserver.disconnect();\n\n\t\tthis.element.classList.remove(\"mv-compact\", \"mv-tiny\");\n\n\t\t// Exceeded single row?\n\t\tif (this.element.offsetHeight > this.targetHeight * 1.6) {\n\t\t\tthis.element.classList.add(\"mv-compact\");\n\n\t\t\tif (this.element.offsetHeight > this.targetHeight * 1.2) {\n\t\t\t\t// Still too tall\n\t\t\t\tthis.element.classList.add(\"mv-tiny\");\n\t\t\t}\n\t\t}\n\n\t\tthis.resizeObserver && this.resizeObserver.observe(this.element);\n\t},\n\n\tadd: function(id) {\n\t\tvar o =_.controls[id];\n\n\t\tif (o.prepare) {\n\t\t\to.prepare.call(this.mavo);\n\t\t}\n\n\t\tMavo.revocably.add(this[id], this.element);\n\n\t\tif (!this.resizeObserver && !this.noResize) {\n\t\t\trequestAnimationFrame(() => this.resize());\n\t\t}\n\t},\n\n\tremove: function(id) {\n\t\tvar o =_.controls[id];\n\n\t\tMavo.revocably.remove(this[id], \"mv-\" + id);\n\n\t\tif (o.cleanup) {\n\t\t\to.cleanup.call(this.mavo);\n\t\t}\n\n\t\tif (!this.resizeObserver && !this.noResize) {\n\t\t\trequestAnimationFrame(() => this.resize());\n\t\t}\n\t},\n\n\ttoggle: function(id, add) {\n\t\treturn this[add? \"add\" : \"remove\"](id);\n\t},\n\n\tproxy: {\n\t\t\"permissions\": \"mavo\"\n\t},\n\n\tstatic: {\n\t\tgetControls: function(template) {\n\t\t\tvar all = Object.keys(_.controls);\n\n\t\t\tif (template && (template = template.trim())) {\n\t\t\t\tif (template == \"none\") {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\tvar relative = /^with\\s|\\b(yes|no)-\\w+\\b/.test(template);\n\t\t\t\ttemplate = template.replace(/\\byes-|^with\\s+/g, \"\");\n\t\t\t\tvar ids = template.split(/\\s+/);\n\n\t\t\t\t// Drop duplicates (last one wins)\n\t\t\t\tids = Mavo.Functions.unique(ids.reverse()).reverse();\n\n\t\t\t\tif (relative) {\n\t\t\t\t\treturn all.filter(id => {\n\t\t\t\t\t\tvar positive = ids.lastIndexOf(id);\n\t\t\t\t\t\tvar negative = ids.lastIndexOf(\"no-\" + id);\n\t\t\t\t\t\tvar keep = positive > Math.max(-1, negative);\n\t\t\t\t\t\tvar drop = negative > Math.max(-1, positive);\n\n\t\t\t\t\t\treturn keep || (!_.controls[id].optional && !drop);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn ids;\n\t\t\t}\n\n\t\t\t// No template, return default set\n\t\t\treturn all.filter(id => !_.controls[id].optional);\n\t\t},\n\n\t\tcontrols: {\n\t\t\tstatus: {\n\t\t\t\tcreate: function(custom) {\n\t\t\t\t\treturn custom || $.create({\n\t\t\t\t\t\tclassName: \"mv-status\"\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tprepare: function() {\n\t\t\t\t\tvar backend = this.primaryBackend;\n\n\t\t\t\t\tif (backend && backend.user) {\n\t\t\t\t\t\tvar user = backend.user;\n\t\t\t\t\t\tvar html = user.name || \"\";\n\n\t\t\t\t\t\tif (user.avatar) {\n\t\t\t\t\t\t\thtml = `<img class=\"mv-avatar\" src=\"${user.avatar}\" /> ${html}`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (user.url) {\n\t\t\t\t\t\t\thtml = `<a href=\"${user.url}\" target=\"_blank\">${html}</a>`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.bar.status.innerHTML = `<span>${this._(\"logged-in-as\", backend)}</span> ` + html;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpermission: \"logout\"\n\t\t\t},\n\n\t\t\tedit: {\n\t\t\t\taction: function() {\n\t\t\t\t\tif (this.editing) {\n\t\t\t\t\t\tthis.done();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.edit();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpermission: [\"edit\", \"add\", \"delete\"],\n\t\t\t\tcleanup: function() {\n\t\t\t\t\tif (this.editing) {\n\t\t\t\t\t\tthis.done();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcondition: function() {\n\t\t\t\t\treturn this.needsEdit;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsave: {\n\t\t\t\taction: function() {\n\t\t\t\t\tthis.save();\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t\"mouseenter focus\": function() {\n\t\t\t\t\t\tthis.element.classList.add(\"mv-highlight-unsaved\");\n\t\t\t\t\t},\n\t\t\t\t\t\"mouseleave blur\": function() {\n\t\t\t\t\t\tthis.element.classList.remove(\"mv-highlight-unsaved\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpermission: \"save\",\n\t\t\t\tcondition: function() {\n\t\t\t\t\treturn !this.autoSave || this.autoSaveDelay > 0;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\texport: {\n\t\t\t\tcreate: function(custom) {\n\t\t\t\t\tvar a;\n\n\t\t\t\t\tif (custom) {\n\t\t\t\t\t\ta = custom.matches(\"a\")? custom : $.create(\"a\", {\n\t\t\t\t\t\t\tclassName: \"mv-button\",\n\t\t\t\t\t\t\taround: custom\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ta = $.create(\"a\", {\n\t\t\t\t\t\t\tclassName: \"mv-export mv-button\",\n\t\t\t\t\t\t\ttextContent: this._(\"export\")\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\ta.setAttribute(\"download\", this.id + \".json\");\n\n\t\t\t\t\treturn a;\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tmousedown: function() {\n\t\t\t\t\t\tthis.bar.export.href = \"data:application/json;charset=UTF-8,\" + encodeURIComponent(this.toJSON());\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpermission: \"edit\",\n\t\t\t\toptional: true\n\t\t\t},\n\n\t\t\timport: {\n\t\t\t\tcreate: function(custom) {\n\t\t\t\t\tvar button = custom || $.create(\"span\", {\n\t\t\t\t\t\trole: \"button\",\n\t\t\t\t\t\ttabIndex: \"0\",\n\t\t\t\t\t\tclassName: \"mv-import mv-button\",\n\t\t\t\t\t\ttextContent: this._(\"import\"),\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tfocus: evt => {\n\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tvar input = $.create(\"input\", {\n\t\t\t\t\t\ttype: \"file\",\n\t\t\t\t\t\tinside: button,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tchange: evt => {\n\t\t\t\t\t\t\t\tvar file = evt.target.files[0];\n\n\t\t\t\t\t\t\t\tif (file) {\n\t\t\t\t\t\t\t\t\tvar reader = $.extend(new FileReader(), {\n\t\t\t\t\t\t\t\t\t\tonload: evt => {\n\t\t\t\t\t\t\t\t\t\t\tthis.inProgress = false;\n\n\t\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t\tvar json = JSON.parse(reader.result);\n\t\t\t\t\t\t\t\t\t\t\t\tthis.render(json);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.error(this._(\"cannot-parse\"));\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tonerror: evt => {\n\t\t\t\t\t\t\t\t\t\t\tthis.error(this._(\"problem-loading\"));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\tthis.inProgress = this._(\"uploading\");\n\t\t\t\t\t\t\t\t\treader.readAsText(file);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn button;\n\t\t\t\t},\n\t\t\t\toptional: true\n\t\t\t},\n\n\t\t\tlogin: {\n\t\t\t\taction: function() {\n\t\t\t\t\tthis.primaryBackend.login();\n\t\t\t\t},\n\t\t\t\tpermission: \"login\"\n\t\t\t},\n\n\t\t\tlogout: {\n\t\t\t\taction: function() {\n\t\t\t\t\tthis.primaryBackend.logout();\n\t\t\t\t},\n\t\t\t\tpermission: \"logout\"\n\t\t\t}\n\t\t},\n\t}\n});\n\n})(Bliss, Bliss.$);\n","(function ($, $$) {\n\nvar _ = Mavo.UI.Message = $.Class({\n\tconstructor: function(mavo, message, o) {\n\t\tthis.mavo = mavo;\n\t\tthis.message = message;\n\t\tthis.closed = Mavo.defer();\n\n\t\tthis.element = $.create({\n\t\t\tclassName: \"mv-ui mv-message\" + (o.type? \" mv-\" + o.type : \"\"),\n\t\t\tinnerHTML: this.message,\n\t\t\tevents: {\n\t\t\t\tclick: e => Mavo.scrollIntoViewIfNeeded(this.mavo.element)\n\t\t\t},\n\t\t\t[this.mavo.bar? \"after\" : \"start\"]: (this.mavo.bar || this.mavo).element\n\t\t});\n\n\t\tif (o.classes) {\n\t\t\tthis.element.classList.add(o.classes);\n\t\t}\n\n\t\tif (o.type == \"error\") {\n\t\t\tthis.element.setAttribute(\"role\", \"alert\");\n\t\t}\n\t\telse {\n\t\t\tthis.element.setAttribute(\"aria-live\", \"polite\");\n\t\t}\n\n\t\to.dismiss = o.dismiss || {};\n\n\t\tif (typeof o.dismiss == \"string\" || Array.isArray(o.dismiss)) {\n\t\t\tvar dismiss = {};\n\n\t\t\tMavo.toArray(o.dismiss).forEach(prop => {\n\t\t\t\tdismiss[prop] = true;\n\t\t\t});\n\t\t\t\n\t\t\to.dismiss = dismiss;\n\t\t}\n\n\t\tif (o.dismiss.button) {\n\t\t\t$.create(\"button\", {\n\t\t\t\tclassName: \"mv-close mv-ui\",\n\t\t\t\ttextContent: \"\",\n\t\t\t\tevents: {\n\t\t\t\t\t\"click\": evt => this.close()\n\t\t\t\t},\n\t\t\t\tstart: this.element\n\t\t\t});\n\t\t}\n\n\t\tif (o.dismiss.timeout) {\n\t\t\tvar timeout = typeof o.dismiss.timeout === \"number\"? o.dismiss.timeout : 5000;\n\t\t\tvar closeTimeout;\n\n\t\t\t$.bind(this.element, {\n\t\t\t\tmouseenter: e => clearTimeout(closeTimeout),\n\t\t\t\tmouseleave: Mavo.rr(e => closeTimeout = setTimeout(() => this.close(), timeout)),\n\t\t\t});\n\t\t}\n\n\t\tif (o.dismiss.submit) {\n\t\t\tthis.element.addEventListener(\"submit\", evt => {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tthis.close(evt.target);\n\t\t\t});\n\t\t}\n\t},\n\n\tclose: function(resolve) {\n\t\t$.transition(this.element, {opacity: 0}).then(() => {\n\t\t\t$.remove(this.element);\n\t\t\tthis.closed.resolve(resolve);\n\t\t});\n\t}\n});\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nvar _ = Mavo.Permissions = $.Class({\n\tconstructor: function(o) {\n\t\tthis.triggers = [];\n\t\tthis.hooks = new $.Hooks();\n\n\t\t// If we dont do this, there is no way to retrieve this from inside parentChanged\n\t\tthis.parentChanged = _.prototype.parentChanged.bind(this);\n\n\t\tthis.set(o);\n\t},\n\n\t// Set multiple permissions at once\n\tset: function(o) {\n\t\tfor (var action in o) {\n\t\t\tthis[action] = o[action];\n\t\t}\n\t},\n\n\t// Set a bunch of permissions to true. Chainable.\n\ton: function(actions) {\n\t\tMavo.toArray(actions).forEach(action => this[action] = true);\n\n\t\treturn this;\n\t},\n\n\t// Set a bunch of permissions to false. Chainable.\n\toff: function(actions) {\n\t\tactions = Array.isArray(actions)? actions : [actions];\n\n\t\tactions.forEach(action => this[action] = false);\n\n\t\treturn this;\n\t},\n\n\t// Fired once at least one of the actions passed can be performed\n\t// Kind of like a Promise that can be resolved multiple times.\n\tcan: function(actions, callback, cannot) {\n\t\tthis.observe(actions, true, callback);\n\n\t\tif (cannot) {\n\t\t\t// Fired once the action cannot be done anymore, even though it could be done before\n\t\t\tthis.cannot(actions, cannot);\n\t\t}\n\t},\n\n\t// Fired once NONE of the actions can be performed\n\tcannot: function(actions, callback) {\n\t\tthis.observe(actions, false, callback);\n\t},\n\n\t// Schedule a callback for when a set of permissions changes value\n\tobserve: function(actions, value, callback) {\n\t\tactions = Mavo.toArray(actions);\n\n\t\tif (this.is(actions, value)) {\n\t\t\t// Should be fired immediately\n\t\t\tcallback();\n\t\t}\n\n\t\t// For future transitions\n\t\tthis.triggers.push({ actions, value, callback, active: true });\n\t},\n\n\t// Compare a set of permissions with true or false\n\t// If comparing with true, we want at least one to be true, i.e. OR\n\t// If comparing with false, we want ALL to be false, i.e. NOR\n\tis: function(actions, able = true) {\n\t\tvar or = Mavo.toArray(actions).map(action => !!this[action])\n\t\t                .reduce((prev, current) => prev || current);\n\n\t\treturn able? or : !or;\n\t},\n\n\t// Monitor all changes\n\tonchange: function(callback) {\n\t\t// Future changes\n\t\tthis.hooks.add(\"change\", callback);\n\n\t\t// Fire for current values\n\t\t_.actions.forEach(action => {\n\t\t\tcallback.call(this, {action, value: this[action]});\n\t\t});\n\t},\n\n\tparentChanged: function(o = {}) {\n\t\tvar localValue = this[\"_\" + o.action];\n\n\t\tif (localValue !== undefined || o.from == o.value) {\n\t\t\t// We have a local value so we dont care about parent changes OR nothing changed\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fireTriggers(o.action);\n\n\t\tthis.hooks.run(\"change\", $.extend({context: this}, o));\n\t},\n\n\t// A single permission changed value\n\tchanged: function(action, value, from) {\n\t\tfrom = !!from;\n\t\tvalue = !!value;\n\n\t\tif (value == from) {\n\t\t\t// Nothing changed\n\t\t\treturn;\n\t\t}\n\n\t\t// $.live() calls the setter before the actual property is set so we\n\t\t// need to set it manually, otherwise it still has its previous value\n\t\tthis[\"_\" + action] = value;\n\n\t\tthis.fireTriggers(action);\n\n\t\tthis.hooks.run(\"change\", {action, value, from, context: this});\n\t},\n\n\tfireTriggers: function(action) {\n\t\tthis.triggers.forEach(trigger => {\n\t\t\tvar match = this.is(trigger.actions, trigger.value);\n\n\t\t\tif (trigger.active && trigger.actions.indexOf(action) > -1 && match) {\n\n\t\t\t\ttrigger.active = false;\n\t\t\t\ttrigger.callback();\n\t\t\t}\n\t\t\telse if (!match) {\n\t\t\t\t// This is so that triggers can only be executed in an actual transition\n\t\t\t\t// And that if there is a trigger for [a,b] it won't be executed twice\n\t\t\t\t// if a and b are set to true one after the other\n\t\t\t\ttrigger.active = true;\n\t\t\t}\n\t\t});\n\t},\n\n\tor: function(permissions) {\n\t\t_.actions.forEach(action => {\n\t\t\tthis[action] = this[action] || permissions[action];\n\t\t});\n\n\t\treturn this;\n\t},\n\n\tlive: {\n\t\tparent: function(parent) {\n\t\t\tvar oldParent = this._parent;\n\n\t\t\tif (oldParent == parent) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._parent = parent;\n\n\t\t\t// Remove previous trigger, if any\n\t\t\tif (oldParent) {\n\t\t\t\tMavo.delete(oldParent.hooks.change, this.parentChanged);\n\t\t\t}\n\n\t\t\t// What changes does this cause? Fire triggers for them\n\t\t\t_.actions.forEach(action => {\n\t\t\t\tthis.parentChanged({\n\t\t\t\t\taction,\n\t\t\t\t\tvalue: parent? parent[action] : undefined,\n\t\t\t\t\tfrom: oldParent? oldParent[action] : undefined\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (parent) {\n\t\t\t\t// Add new trigger\n\t\t\t\tparent.onchange(this.parentChanged);\n\t\t\t}\n\t\t}\n\t},\n\n\tstatic: {\n\t\tactions: [],\n\n\t\t// Register a new permission type\n\t\tregister: function(action, setter) {\n\t\t\tif (Array.isArray(action)) {\n\t\t\t\taction.forEach(action => _.register(action, setter));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$.live(_.prototype, action, {\n\t\t\t\tget: function() {\n\t\t\t\t\tvar ret = this[\"_\" + action];\n\n\t\t\t\t\tif (ret === undefined && this.parent) {\n\t\t\t\t\t\treturn this.parent[action];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn ret;\n\t\t\t\t},\n\t\t\t\tset: function(able, previous) {\n\t\t\t\t\tif (setter) {\n\t\t\t\t\t\tsetter.call(this, able, previous);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.changed(action, able, previous);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t_.actions.push(action);\n\t\t}\n\t}\n});\n\n_.register([\"read\", \"save\"]);\n\n_.register(\"login\", function(can) {\n\tif (can && this.logout) {\n\t\tthis.logout = false;\n\t}\n});\n\n_.register(\"logout\", function(can) {\n\tif (can && this.login) {\n\t\tthis.login = false;\n\t}\n});\n\n_.register(\"edit\", function(can) {\n\tif (can) {\n\t\tthis.add = this.delete = true;\n\t}\n});\n\n_.register([\"add\", \"delete\"], function(can) {\n\tif (!can) {\n\t\tthis.edit = false;\n\t}\n});\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\n/**\n * Base class for all backends\n */\nvar _ = Mavo.Backend = $.Class({\n\tconstructor: function(url, o = {}) {\n\t\tthis.update(url, o);\n\n\t\t// Permissions of this particular backend.\n\t\tthis.permissions = new Mavo.Permissions();\n\t},\n\n\tupdate: function(url, o = {}) {\n\t\tthis.source = url;\n\t\tthis.url = new URL(this.source, Mavo.base);\n\t\tthis.mavo = o.mavo;\n\t\tthis.format = Mavo.Formats.create(o.format, this);\n\t},\n\n\tget: function(url = new URL(this.url)) {\n\t\turl.searchParams.set(\"timestamp\", Date.now()); // ensure fresh copy\n\n\t\treturn $.fetch(url.href).then(xhr => Promise.resolve(xhr.responseText), () => Promise.resolve(null));\n\t},\n\n\tload: function() {\n\t\treturn this.ready\n\t\t\t.then(() => this.get())\n\t\t\t.then(response => {\n\t\t\t\tif (typeof response != \"string\") {\n\t\t\t\t\t// Backend did the parsing, we're done here\n\t\t\t\t\treturn response;\n\t\t\t\t}\n\n\t\t\t\tresponse = response.replace(/^\\ufeff/, \"\"); // Remove Unicode BOM\n\n\t\t\t\treturn this.format.parse(response);\n\t\t\t});\n\t},\n\n\tstore: function(data, {path, format = this.format} = {}) {\n\t\treturn this.ready.then(() => {\n\t\t\tvar serialize = typeof data === \"string\"? Promise.resolve(data) : format.stringify(data);\n\n\t\t\treturn serialize.then(serialized => this.put(serialized, path).then(() => {\n\t\t\t\treturn {data, serialized};\n\t\t\t}));\n\t\t});\n\t},\n\n\t// To be be overriden by subclasses\n\tready: Promise.resolve(),\n\tlogin: () => Promise.resolve(),\n\tlogout: () => Promise.resolve(),\n\tput: () => Promise.reject(),\n\n\tisAuthenticated: function() {\n\t\treturn !!this.accessToken;\n\t},\n\n\t// Any extra params to be passed to the oAuth URL.\n\toAuthParams: () => \"\",\n\n\ttoString: function() {\n\t\treturn `${this.id} (${this.url})`;\n\t},\n\n\tequals: function(backend) {\n\t\treturn backend === this || (backend && this.id == backend.id && this.source == backend.source);\n\t},\n\n\t/**\n\t * Helper for making OAuth requests with JSON-based APIs.\n\t */\n\trequest: function(call, data, method = \"GET\", req = {}) {\n\t\treq = $.extend({}, req); // clone\n\t\treq.method = req.method || method;\n\t\treq.responseType = req.responseType || \"json\";\n\n\t\treq.headers = $.extend({\n\t\t\t\"Content-Type\": \"application/json; charset=utf-8\"\n\t\t}, req.headers || {});\n\n\t\treq.data = data;\n\n\t\tif (this.isAuthenticated()) {\n\t\t\treq.headers[\"Authorization\"] = req.headers[\"Authorization\"] || `Bearer ${this.accessToken}`;\n\t\t}\n\n\t\tif ($.type(req.data) === \"object\") {\n\t\t\tif (req.method == \"GET\") {\n\t\t\t\treq.data = Object.keys(req.data).map(p => p + \"=\" + encodeURIComponent(req.data[p])).join(\"&\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\treq.data = JSON.stringify(req.data);\n\t\t\t}\n\t\t}\n\n\t\tcall = new URL(call, this.constructor.apiDomain);\n\n\t\t// Prevent getting a cached response. Cache-control is often not allowed via CORS\n\t\tif (req.method == \"GET\") {\n\t\t\tcall.searchParams.set(\"timestamp\", Date.now());\n\t\t}\n\n\t\treturn $.fetch(call, req)\n\t\t\t.catch(err => {\n\t\t\t\tif (err && err.xhr) {\n\t\t\t\t\treturn Promise.reject(err.xhr);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.mavo.error(\"Something went wrong while connecting to \" + this.id, err);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(xhr => req.method == \"HEAD\"? xhr : xhr.response);\n\t},\n\n\t/**\n\t * Helper method for authenticating in OAuth APIs\n\t */\n\toAuthenticate: function(passive) {\n\t\treturn this.ready.then(() => {\n\t\t\tif (this.isAuthenticated()) {\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tvar id = this.id.toLowerCase();\n\n\t\t\t\tif (passive) {\n\t\t\t\t\tthis.accessToken = localStorage[`mavo:${id}token`];\n\n\t\t\t\t\tif (this.accessToken) {\n\t\t\t\t\t\tresolve(this.accessToken);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Show window\n\t\t\t\t\tvar popup = {\n\t\t\t\t\t\twidth: Math.min(1000, innerWidth - 100),\n\t\t\t\t\t\theight: Math.min(800, innerHeight - 100)\n\t\t\t\t\t};\n\n\t\t\t\t\tpopup.top = (screen.height - popup.height)/2;\n\t\t\t\t\tpopup.left = (screen.width - popup.width)/2;\n\n\t\t\t\t\tvar state = {\n\t\t\t\t\t\turl: location.href,\n\t\t\t\t\t\tbackend: this.id\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.authPopup = open(`${this.constructor.oAuth}?client_id=${this.key}&state=${encodeURIComponent(JSON.stringify(state))}` + this.oAuthParams(),\n\t\t\t\t\t\t\"popup\", `width=${popup.width},height=${popup.height},left=${popup.left},top=${popup.top}`);\n\n\t\t\t\t\tif (!this.authPopup) {\n\t\t\t\t\t\tvar message = \"Login popup was blocked! Please check your popup blocker settings.\";\n\t\t\t\t\t\tthis.mavo.error(message);\n\t\t\t\t\t\treject(Error(message));\n\t\t\t\t\t}\n\n\t\t\t\t\taddEventListener(\"message\", evt => {\n\t\t\t\t\t\tif (evt.source === this.authPopup) {\n\t\t\t\t\t\t\tif (evt.data.backend == this.id) {\n\t\t\t\t\t\t\t\tthis.accessToken = localStorage[`mavo:${id}token`] = evt.data.token;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!this.accessToken) {\n\t\t\t\t\t\t\t\treject(Error(\"Authentication error\"));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresolve(this.accessToken);\n\n\t\t\t\t\t\t\t// Log in to other similar backends that are logged out\n\t\t\t\t\t\t\tfor (var appid in Mavo.all) {\n\t\t\t\t\t\t\t\tvar storage = Mavo.all[appid].primaryBackend;\n\n\t\t\t\t\t\t\t\tif (storage\n\t\t\t\t\t\t\t\t\t&& storage.id === this.id\n\t\t\t\t\t\t\t\t\t&& storage !== this\n\t\t\t\t\t\t\t\t\t&& !storage.isAuthenticated()) {\n\t\t\t\t\t\t\t\t\t\tstorage.login(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * oAuth logout helper\n\t */\n\toAuthLogout: function() {\n\t\tif (this.isAuthenticated()) {\n\t\t\tvar id = this.id.toLowerCase();\n\n\t\t\tlocalStorage.removeItem(`mavo:${id}token`);\n\t\t\tdelete this.accessToken;\n\n\t\t\tthis.permissions.off([\"edit\", \"add\", \"delete\", \"save\"]).on(\"login\");\n\n\t\t\t$.fire(this.mavo.element, \"mv-logout\", {backend: this});\n\t\t}\n\n\t\treturn Promise.resolve();\n\t},\n\n\tstatic: {\n\t\t// Return the appropriate backend(s) for this url\n\t\tcreate: function(url, o, type, existing) {\n\t\t\tvar Backend;\n\n\t\t\tif (type) {\n\t\t\t\tBackend = Mavo.Functions.get(_, type);\n\t\t\t}\n\n\t\t\tif (url && !Backend) {\n\t\t\t\tBackend = _.types.filter(Backend => Backend.test(url))[0] || _.Remote;\n\t\t\t}\n\n\t\t\t// Can we re-use the existing object perhaps?\n\t\t\tif (Backend && existing && existing.constructor === Backend && existing.constructor.prototype.hasOwnProperty(\"update\")) {\n\t\t\t\texisting.update(url, o);\n\t\t\t\treturn existing;\n\t\t\t}\n\n\t\t\treturn Backend? new Backend(url, o) : null;\n\t\t},\n\n\t\ttypes: [],\n\n\t\tregister: function(Class) {\n\t\t\t_[Class.prototype.id] = Class;\n\t\t\t_.types.push(Class);\n\t\t\treturn Class;\n\t\t}\n\t}\n});\n\n/**\n * Save in an HTML element\n */\n_.register($.Class({\n\tid: \"Element\",\n\textends: _,\n\tconstructor: function () {\n\t\tthis.permissions.on([\"read\", \"edit\", \"save\"]);\n\t},\n\n\tupdate: function(url, o) {\n\t\tthis.super.update.call(this, url, o);\n\n\t\tthis.element = $(this.source) || $.create(\"script\", {\n\t\t\ttype: \"application/json\",\n\t\t\tid: this.source.slice(1),\n\t\t\tinside: document.body\n\t\t});\n\t},\n\n\tget: function() {\n\t\treturn Promise.resolve(this.element.textContent);\n\t},\n\n\tput: function(serialized) {\n\t\treturn Promise.resolve(this.element.textContent = serialized);\n\t},\n\n\tstatic: {\n\t\ttest: url => url.indexOf(\"#\") === 0\n\t}\n}));\n\n// Load from a remote URL, no save\n_.register($.Class({\n\tid: \"Remote\",\n\textends: _,\n\tconstructor: function() {\n\t\tthis.permissions.on(\"read\");\n\t},\n\n\tstatic: {\n\t\ttest: url => false\n\t}\n}));\n\n// Save in localStorage\n_.register($.Class({\n\textends: _,\n\tid: \"Local\",\n\tconstructor: function() {\n\t\tthis.permissions.on([\"read\", \"edit\", \"save\"]);\n\t\tthis.key = this.mavo.id;\n\t},\n\n\tget: function() {\n\t\treturn Promise[this.key in localStorage? \"resolve\" : \"reject\"](localStorage[this.key]);\n\t},\n\n\tput: function(serialized) {\n\t\tif (!serialized) {\n\t\t\tdelete localStorage[this.key];\n\t\t}\n\t\telse {\n\t\t\tlocalStorage[this.key] = serialized;\n\t\t}\n\n\t\treturn Promise.resolve(serialized);\n\t},\n\n\tstatic: {\n\t\ttest: value => value == \"local\"\n\t}\n}));\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nvar _ = Mavo.Formats = {};\n\nvar base = _.Base = $.Class({\n\tabstract: true,\n\tconstructor: function(backend) {\n\t\tthis.backend = backend;\n\t},\n\tproxy: {\n\t\t\"mavo\": \"backend\"\n\t},\n\n\t// So that child classes can only override the static methods if they don't\n\t// need access to any instance variables.\n\tparse: function(content) {\n\t\treturn this.constructor.parse(content, this);\n\t},\n\tstringify: function(data) {\n\t\treturn this.constructor.stringify(data, this);\n\t},\n\n\tstatic: {\n\t\tparse: serialized => Promise.resolve(serialized),\n\t\tstringify: data => Promise.resolve(data),\n\t\textensions: [],\n\t\tdependencies: [],\n\t\tready: function() {\n\t\t\treturn Promise.all(this.dependencies.map(d => $.include(d.test(), d.url)));\n\t\t}\n\t}\n});\n\nvar json = _.JSON = $.Class({\n\textends: _.Base,\n\tstatic: {\n\t\tparse: serialized => Promise.resolve(serialized? JSON.parse(serialized) : null),\n\t\tstringify: data => Promise.resolve(Mavo.toJSON(data)),\n\t\textensions: [\".json\", \".jsonld\"]\n\t}\n});\n\nvar text = _.Text = $.Class({\n\textends: _.Base,\n\tconstructor: function(backend) {\n\t\tthis.property = this.mavo.root.getNames(\"Primitive\")[0];\n\t},\n\n\tstatic: {\n\t\textensions: [\".txt\"],\n\t\tparse: (serialized, me) => Promise.resolve({[me? me.property : \"content\"]: serialized}),\n\t\tstringify: (data, me) => Promise.resolve(data[me? me.property : \"content\"])\n\t}\n});\n\nvar csv = _.CSV = $.Class({\n\textends: _.Base,\n\tconstructor: function(backend) {\n\t\tthis.property = this.mavo.root.getNames(\"Collection\")[0];\n\t\tthis.options = $.extend({}, _.CSV.defaultOptions);\n\t},\n\n\tstatic: {\n\t\textensions: [\".csv\", \".tsv\"],\n\t\tdefaultOptions: {\n\t\t\theader: true,\n\t\t\tdynamicTyping: true,\n\t\t\tskipEmptyLines: true\n\t\t},\n\t\tdependencies: [{\n\t\t\ttest: () => self.Papa,\n\t\t\turl: \"https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.4/papaparse.min.js\"\n\t\t}],\n\t\tready: base.ready,\n\t\tparse: (serialized, me) => csv.ready().then(() => {\n\t\t\tvar data = Papa.parse(serialized, csv.defaultOptions);\n\t\t\tvar property = me? me.property : \"content\";\n\n\t\t\tif (me) {\n\t\t\t\t// Get delimiter & linebreak for serialization\n\t\t\t\tme.options.delimiter = data.meta.delimiter;\n\t\t\t\tme.options.linebreak = data.meta.linebreak;\n\t\t\t}\n\n\t\t\tif (data.meta.aborted) {\n\t\t\t\tthrow data.meta.errors.pop();\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t[property]: data.data\n\t\t\t};\n\t\t}),\n\n\t\tstringify: (data, me) => csv.ready().then(() => {\n\t\t\tvar property = me? me.property : \"content\";\n\t\t\tvar options = me? me.options : csv.defaultOptions;\n\t\t\treturn Papa.unparse(data[property], options);\n\t\t})\n\t}\n});\n\nObject.defineProperty(_, \"create\", {\n\tvalue: function(format, backend) {\n\t\tif (format && typeof format === \"object\") {\n\t\t\treturn format;\n\t\t}\n\n\t\tif (typeof format === \"string\") {\n\t\t\t// Search by id\n\t\t\tformat = format.toLowerCase();\n\n\t\t\tfor (var id in _) {\n\t\t\t\tvar Format = _[id];\n\n\t\t\t\tif (id.toLowerCase() == format) {\n\t\t\t\t\treturn new Format(backend);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!format) {\n\t\t\tvar url = backend.url? backend.url.pathname : backend.source;\n\t\t\tvar extension = Mavo.match(url, /\\.\\w+$/) || \".json\";\n\t\t\tvar Format = _.JSON;\n\n\t\t\tfor (var id in _) {\n\t\t\t\tif (_[id].extensions.indexOf(extension) > -1) {\n\t\t\t\t\t// Do not return match, as we may find another match later\n\t\t\t\t\t// and last match wins\n\t\t\t\t\tFormat = _[id];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn new Format(backend);\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nvar _ = Mavo.Node = $.Class({\n\tabstract: true,\n\tconstructor: function (element, mavo, options = {}) {\n\t\tif (!element || !mavo) {\n\t\t\tthrow new Error(\"Mavo.Node constructor requires an element argument and a mavo object\");\n\t\t}\n\n\t\tvar env = {context: this, options};\n\n\t\t// Set these first, for debug reasons\n\t\tthis.uid = ++_.maxId;\n\t\tthis.nodeType = this.nodeType;\n\t\tthis.property = null;\n\t\tthis.element = element;\n\n\t\t$.extend(this, env.options);\n\n\t\t_.all.set(element, [...(_.all.get(this.element) || []), this]);\n\n\t\tthis.mavo = mavo;\n\t\tthis.group = this.parentGroup = env.options.group;\n\n\t\tthis.template = env.options.template;\n\n\t\tthis.alias = this.element.getAttribute(\"mv-alias\");\n\n\t\tif (this.template) {\n\t\t\tthis.template.copies.push(this);\n\t\t}\n\t\telse {\n\t\t\t// First (or only) of its kind\n\t\t\tthis.copies = [];\n\t\t}\n\n\t\tif (!this.fromTemplate(\"property\", \"type\")) {\n\t\t\tthis.property = _.getProperty(element);\n\t\t\tthis.type = Mavo.Group.normalize(element);\n\t\t\tthis.storage = this.element.getAttribute(\"mv-storage\");\n\t\t}\n\n\t\tthis.modes = this.element.getAttribute(\"mv-mode\");\n\n\t\tMavo.hooks.run(\"node-init-start\", env);\n\n\t\tthis.mode = Mavo.getStyle(this.element, \"--mv-mode\") || \"read\";\n\n\t\tthis.collection = env.options.collection;\n\n\t\tif (this.collection) {\n\t\t\t// This is a collection item\n\t\t\tthis.group = this.parentGroup = this.collection.parentGroup;\n\t\t}\n\n\t\t// Must run before collections have a marker which messes up paths\n\t\tvar template = this.template;\n\n\t\tif (template && template.expressions) {\n\t\t\t// We know which expressions we have, don't traverse again\n\t\t\tthis.expressions = template.expressions.map(et => new Mavo.DOMExpression({\n\t\t\t\ttemplate: et,\n\t\t\t\titem: this,\n\t\t\t\tmavo: this.mavo\n\t\t\t}));\n\t\t}\n\n\t\tif (this instanceof Mavo.Group || this.collection) {\n\t\t\t// Handle mv-value\n\t\t\t// TODO integrate with the code in Primitive that decides whether this is a computed property\n\t\t\tvar et = Mavo.DOMExpression.search(this.element).filter(et => et.originalAttribute == \"mv-value\")[0];\n\n\t\t\tif (et) {\n\t\t\t\tet.mavoNode = this;\n\t\t\t\tthis.expressionText = et;\n\t\t\t\tthis.storage = this.storage || \"none\";\n\t\t\t\tthis.modes = \"read\";\n\n\t\t\t\tif (this.collection) {\n\t\t\t\t\tthis.collection.expressions = [...(this.collection.expressions || []), et];\n\t\t\t\t\tet.mavoNode = this.collection;\n\t\t\t\t\tthis.collection.storage = this.collection.storage || \"none\";\n\t\t\t\t\tthis.collection.modes = \"read\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tMavo.hooks.run(\"node-init-end\", env);\n\t},\n\n\tget editing() {\n\t\treturn this.mode == \"edit\";\n\t},\n\n\tget isRoot() {\n\t\treturn !this.property;\n\t},\n\n\tget name() {\n\t\treturn Mavo.Functions.readable(this.property || this.type).toLowerCase();\n\t},\n\n\tget saved() {\n\t\treturn this.storage !== \"none\";\n\t},\n\n\tget parent() {\n\t\treturn this.collection || this.parentGroup;\n\t},\n\n\t/**\n\t * Runs after the constructor is done (including the constructor of the inheriting class), synchronously\n\t */\n\tpostInit: function() {\n\t\tif (this.modes == \"edit\") {\n\t\t\tthis.edit();\n\t\t}\n\t},\n\n\tdestroy: function() {\n\t\tif (this.template) {\n\t\t\tMavo.delete(this.template.copies, this);\n\t\t}\n\n\t\tif (this.expressions) {\n\t\t\tthis.expressions.forEach(expression => expression.destroy());\n\t\t}\n\n\t\tif (this.itembar) {\n\t\t\tthis.itembar.destroy();\n\t\t}\n\t},\n\n\tgetData: function(o = {}) {\n\t\tif (this.isDataNull(o)) {\n\t\t\treturn o.forceObjects? Mavo.objectify(null) : null;\n\t\t}\n\t},\n\n\tisDataNull: function(o) {\n\t\tvar env = {\n\t\t\tcontext: this,\n\t\t\toptions: o,\n\t\t\tresult: this.deleted || !this.saved && !o.live\n\t\t};\n\n\t\tMavo.hooks.run(\"unit-isdatanull\", env);\n\n\t\treturn env.result;\n\t},\n\n\t/**\n\t * Execute a callback on every node of the Mavo tree\n\t * If callback returns (strict) false, walk stops.\n\t * @param callback {Function}\n\t * @param path {Array} Initial path. Mostly used internally.\n\t * @param o {Object} Options:\n\t * \t\t\t- descentReturn {Boolean} If callback returns false, just don't descend\n\t * @return false if was stopped via a false return value, true otherwise\n\t */\n\twalk: function(callback, path = [], o = {}) {\n\t\tvar walker = (obj, path) => {\n\t\t\tvar ret = callback(obj, path);\n\n\t\t\tif (ret !== false) {\n\t\t\t\tfor (let i in obj.children) {\n\t\t\t\t\tlet node = obj.children[i];\n\n\t\t\t\t\tif (node instanceof Mavo.Node) {\n\t\t\t\t\t\tvar ret = walker.call(node, node, [...path, i]);\n\n\t\t\t\t\t\tif (ret === false && !o.descentReturn) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn ret !== false;\n\t\t};\n\n\t\treturn walker(this, path);\n\t},\n\n\twalkUp: function(callback) {\n\t\tvar group = this;\n\n\t\twhile (group = group.parentGroup) {\n\t\t\tvar ret = callback(group);\n\n\t\t\tif (ret !== undefined) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\t},\n\n\tedit: function() {\n\t\tthis.mode = \"edit\";\n\n\t\tif (this.mode != \"edit\") {\n\t\t\treturn false;\n\t\t}\n\n\t\t$.fire(this.element, \"mv-edit\", {\n\t\t\tmavo: this.mavo,\n\t\t\tnode: this\n\t\t});\n\n\t\tMavo.hooks.run(\"node-edit-end\", this);\n\t},\n\n\tdone: function() {\n\t\tthis.mode = Mavo.getStyle(this.element.parentNode, \"--mv-mode\") || \"read\";\n\n\t\tif (this.mode != \"read\") {\n\t\t\treturn false;\n\t\t}\n\n\t\t$.unbind(this.element, \".mavo:edit\");\n\n\t\t$.fire(this.element, \"mv-done\", {\n\t\t\tmavo: this.mavo,\n\t\t\tnode: this\n\t\t});\n\n\t\tthis.propagate(\"done\");\n\n\t\tMavo.hooks.run(\"node-done-end\", this);\n\t},\n\n\tpropagate: function(callback) {\n\t\tfor (let i in this.children) {\n\t\t\tlet node = this.children[i];\n\n\t\t\tif (node instanceof Mavo.Node) {\n\t\t\t\tif (typeof callback === \"function\") {\n\t\t\t\t\tcallback.call(node, node);\n\t\t\t\t}\n\t\t\t\telse if (callback in node) {\n\t\t\t\t\tnode[callback]();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tpropagated: [\"save\", \"destroy\"],\n\n\ttoJSON: Mavo.prototype.toJSON,\n\n\tfromTemplate: function(...properties) {\n\t\tif (this.template) {\n\t\t\tproperties.forEach(property => this[property] = this.template[property]);\n\t\t}\n\n\t\treturn !!this.template;\n\t},\n\n\trender: function(data) {\n\t\tthis.oldData = this.data;\n\t\tthis.data = data;\n\n\t\tdata = Mavo.subset(data, this.inPath);\n\n\t\tvar env = {context: this, data};\n\n\t\tMavo.hooks.run(\"node-render-start\", env);\n\n\t\tif (this.nodeType != \"Collection\" && Array.isArray(data)) {\n\t\t\t// We are rendering an array on a singleton, what to do?\n\t\t\tvar properties;\n\n\t\t\tif (this.isRoot && (properties = this.getNames(\"Collection\")).length === 1) {\n\t\t\t\t// If it's root with only one collection property, render on that property\n\t\t\t\tenv.data = {\n\t\t\t\t\t[properties[0]]: env.data\n\t\t\t\t};\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Otherwise, render first item\n\t\t\t\tthis.inPath.push(\"0\");\n\t\t\t\tenv.data = env.data[0];\n\t\t\t}\n\t\t}\n\n\t\tif (this.editing) {\n\t\t\tthis.done();\n\t\t\tthis.dataRender(env.data);\n\t\t\tthis.edit();\n\t\t}\n\t\telse {\n\t\t\tthis.dataRender(env.data);\n\t\t}\n\n\t\tthis.save();\n\n\t\tMavo.hooks.run(\"node-render-end\", env);\n\t},\n\n\tdataChanged: function(action, o = {}) {\n\t\t$.fire(o.element || this.element, \"mv-change\", $.extend({\n\t\t\tproperty: this.property,\n\t\t\taction,\n\t\t\tmavo: this.mavo,\n\t\t\tnode: this\n\t\t}, o));\n\t},\n\n\ttoString: function() {\n\t\treturn `#${this.uid}: ${this.nodeType} (${this.property})`;\n\t},\n\n\tgetClosestCollection: function() {\n\t\tvar closestItem = this.closestItem;\n\n\t\treturn closestItem? closestItem.collection : null;\n\t},\n\n\tgetClosestItem: function() {\n\t\tif (this.collection && this.collection.mutable) {\n\t\t\treturn this;\n\t\t}\n\n\t\treturn this.parentGroup? this.parentGroup.closestItem : null;\n\t},\n\n\t/**\n\t * Check if this unit is either deleted or inside a deleted group\n\t */\n\tisDeleted: function() {\n\t\tvar ret = this.deleted;\n\n\t\tif (this.deleted) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn !!this.parentGroup && this.parentGroup.isDeleted();\n\t},\n\n\t// Resolve a property name from this node\n\tresolve: function(property, o = {}) {\n\t\t// First look in descendants\n\t\tvar ret = this.find(property, o);\n\n\t\tif (ret === undefined) {\n\t\t\t// Still not found, look in ancestors\n\t\t\tret = this.walkUp(group => {\n\t\t\t\tif (group.property == property) {\n\t\t\t\t\treturn group;\n\t\t\t\t}\n\n\t\t\t\tif (property in group.children) {\n\t\t\t\t\treturn group.children[property];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (ret === undefined) {\n\t\t\t// Still not found, look anywhere\n\t\t\tret = this.mavo.root.find(property, o);\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\trelativizeData: self.Proxy? function(data, options = {live: true}) {\n\t\treturn new Proxy(data, {\n\t\t\tget: (data, property, proxy) => {\n\t\t\t\tif (property in data) {\n\t\t\t\t\treturn data[property];\n\t\t\t\t}\n\n\t\t\t\t// Checking if property is in proxy might add it to the cache\n\t\t\t\tif (property in proxy && property in this.proxyCache) {\n\t\t\t\t\treturn this.proxyCache[property];\n\t\t\t\t}\n\t\t\t},\n\n\t\t\thas: (data, property) => {\n\t\t\t\tif (property in data || property in this.proxyCache) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// Property does not exist, look for it elsewhere\n\n\t\t\t\t// Special values\n\t\t\t\tswitch (property) {\n\t\t\t\t\tcase \"$index\":\n\t\t\t\t\t\tthis.proxyCache[property] = this.index || 0;\n\t\t\t\t\t\treturn true; // if index is 0 it's falsy and has would return false!\n\t\t\t\t\tcase \"$next\":\n\t\t\t\t\tcase \"$previous\":\n\t\t\t\t\t\tif (this.closestCollection) {\n\t\t\t\t\t\t\tthis.proxyCache[property] = this.closestCollection.getData(options)[this.index + (property == \"$next\"? 1 : -1)];\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.proxyCache[property] = null;\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// First look in descendants\n\t\t\t\tvar ret = this.resolve(property);\n\n\t\t\t\tif (ret !== undefined) {\n\t\t\t\t\tif (Array.isArray(ret)) {\n\t\t\t\t\t\tret = ret.map(item => item.getData(options))\n\t\t\t\t\t\t\t\t .filter(item => item !== null);\n\t\t\t\t\t}\n\t\t\t\t\telse if (ret instanceof Mavo.Node) {\n\t\t\t\t\t\tret = ret.getData(options);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.proxyCache[property] = ret;\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// Does it reference another Mavo?\n\t\t\t\tif (property in Mavo.all && isNaN(property) && Mavo.all[property].root) {\n\t\t\t\t\treturn this.proxyCache[property] = Mavo.all[property].root.getData(options);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tset: function(data, property = \"\", value) {\n\t\t\t\tconsole.warn(`You cannot set data via expressions. Attempt to set ${property.toString()} to ${value} ignored.`);\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t} : data => data,\n\n\tcreateLiveData: function(obj = {}) {\n\t\tthis.liveData = obj;\n\t\tthis.liveData[Mavo.toNode] = this;\n\t\tthis.liveData[Mavo.toProxy] = this.relativizeData(this.liveData);\n\t\treturn this.liveData;\n\t},\n\n\tpathFrom: function(node) {\n\t\tvar path = this.path;\n\t\tvar nodePath = node.path;\n\n\t\tfor (var i = 0; i<path.length && nodePath[i] == path[i]; i++) {}\n\n\t\treturn path.slice(i);\n\t},\n\n\tgetDescendant: function(path) {\n\t\treturn path.reduce((acc, cur) => acc.children[cur], this);\n\t},\n\n\t/**\n\t * Get same node in other item in same collection\n\t * E.g. for same node in the next item, use an offset of -1\n\t */\n\tgetCousin: function(offset, o = {}) {\n\t\tif (!this.closestCollection) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar collection = this.closestCollection;\n\t\tvar distance = Math.abs(offset);\n\t\tvar direction =  offset < 0? -1 : 1;\n\n\t\tif (collection.length < distance + 1) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar index = this.closestItem.index + offset;\n\n\t\tif (o.wrap) {\n\t\t\tindex = Mavo.wrap(index, collection.length);\n\t\t}\n\n\t\tfor (var i = 0; i<collection.length; i++) {\n\t\t\tvar ind = index + i * direction;\n\t\t\tind = o.wrap? Mavo.wrap(ind, collection.length) : ind;\n\n\t\t\tvar item = collection.children[ind];\n\n\t\t\tif (!item || !item.isDeleted()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!item || item.isDeleted() || item == this.closestItem) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.collection) {\n\t\t\treturn item;\n\t\t}\n\n\t\tvar relativePath = this.pathFrom(this.closestItem);\n\t\treturn item.getDescendant(relativePath);\n\t},\n\n\tcontains: function(node) {\n\t\tdo {\n\t\t\tif (node === this) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tnode = node.parent;\n\t\t}\n\t\twhile (node);\n\n\t\treturn false;\n\t},\n\n\tlazy: {\n\t\tclosestCollection: function() {\n\t\t\treturn this.getClosestCollection();\n\t\t},\n\n\t\tclosestItem: function() {\n\t\t\treturn this.getClosestItem();\n\t\t},\n\n\t\t// Are we only rendering and editing a subset of the data?\n\t\tinPath: function() {\n\t\t\tvar attribute = this.nodeType == \"Collection\"? \"mv-multiple-path\" : \"mv-path\";\n\n\t\t\treturn (this.element.getAttribute(attribute) || \"\").split(\"/\").filter(p => p.length);\n\t\t},\n\n\t\tproperties: function() {\n\t\t\tif (this.template) {\n\t\t\t\treturn this.template.properties;\n\t\t\t}\n\n\t\t\tvar ret = new Set(this.property && [this.property]);\n\n\t\t\tif (this.nodeType == \"Group\") {\n\t\t\t\tfor (var property in this.children) {\n\t\t\t\t\tret = Mavo.union(ret, this.children[property].properties);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.nodeType == \"Collection\") {\n\t\t\t\tret = Mavo.union(ret, this.itemTemplate.properties);\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\n\t\tproxyCache: function() {\n\t\t\treturn {};\n\t\t}\n\t},\n\n\tlive: {\n\t\tstore: function(value) {\n\t\t\t$.toggleAttribute(this.element, \"mv-storage\", value);\n\t\t},\n\n\t\tunsavedChanges: function(value) {\n\t\t\tif (value && (!this.saved || !this.editing)) {\n\t\t\t\tvalue = false;\n\t\t\t}\n\n\t\t\tthis.element.classList.toggle(\"mv-unsaved-changes\", value);\n\n\t\t\treturn value;\n\t\t},\n\n\t\tmode: function (value) {\n\t\t\tif (this._mode != value) {\n\t\t\t\t// Is it allowed?\n\t\t\t\tif (this.modes && value != this.modes) {\n\t\t\t\t\tvalue = this.modes;\n\t\t\t\t}\n\n\t\t\t\t// If we don't do this, setting the attribute below will\n\t\t\t\t// result in infinite recursion\n\t\t\t\tthis._mode = value;\n\n\t\t\t\tif (!(this instanceof Mavo.Collection) && [null, \"\", \"read\", \"edit\"].indexOf(this.element.getAttribute(\"mv-mode\")) > -1) {\n\t\t\t\t\t// If attribute is not one of the recognized values, leave it alone\n\t\t\t\t\tvar set = this.modes || value == \"edit\";\n\t\t\t\t\tMavo.Observer.sneak(this.mavo.modeObserver, () => {\n\t\t\t\t\t\t$.toggleAttribute(this.element, \"mv-mode\", value, set);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t},\n\n\t\tmodes: function(value) {\n\t\t\tif (value && value != \"read\" && value != \"edit\") {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tthis._modes = value;\n\n\t\t\tif (value && this.mode != value) {\n\t\t\t\tthis.mode = value;\n\t\t\t}\n\t\t},\n\n\t\tdeleted: function(value) {\n\t\t\tthis.element.classList.toggle(\"mv-deleted\", value);\n\n\t\t\tif (value) {\n\t\t\t\t// Soft delete, store element contents in a fragment\n\t\t\t\t// and replace them with an undo prompt.\n\t\t\t\tthis.elementContents = document.createDocumentFragment();\n\t\t\t\t$$(this.element.childNodes).forEach(node => {\n\t\t\t\t\tthis.elementContents.appendChild(node);\n\t\t\t\t});\n\n\t\t\t\t$.contents(this.element, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttag: \"button\",\n\t\t\t\t\t\tclassName: \"mv-close mv-ui\",\n\t\t\t\t\t\ttextContent: \"\",\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\"click\": function(evt) {\n\t\t\t\t\t\t\t\t$.remove(this.parentNode);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"Deleted \" + this.name,\n\t\t\t\t\t{\n\t\t\t\t\t\ttag: \"button\",\n\t\t\t\t\t\tclassName: \"mv-undo mv-ui\",\n\t\t\t\t\t\ttextContent: \"Undo\",\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\"click\": evt => this.deleted = false\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]);\n\n\t\t\t\tthis.element.classList.remove(\"mv-highlight\");\n\t\t\t\tthis.itembar.remove();\n\t\t\t}\n\t\t\telse if (this.deleted) {\n\t\t\t\t// Undelete\n\t\t\t\tthis.element.textContent = \"\";\n\t\t\t\tthis.element.appendChild(this.elementContents);\n\n\t\t\t\t// otherwise expressions won't update because this will still seem as deleted\n\t\t\t\t// Alternatively, we could fire datachange with a timeout.\n\t\t\t\tthis._deleted = false;\n\n\t\t\t\tthis.dataChanged(\"undelete\");\n\t\t\t\tthis.itembar.add();\n\t\t\t}\n\t\t},\n\n\t\tpath: {\n\t\t\tget: function() {\n\t\t\t\tvar path = this.parent? this.parent.path : [];\n\n\t\t\t\treturn this.property? [...path, this.property] : path;\n\t\t\t}\n\t\t}\n\t},\n\n\tstatic: {\n\t\tmaxId: 0,\n\n\t\tall: new WeakMap(),\n\n\t\tcreate: function(element, mavo, o = {}) {\n\t\t\tif (Mavo.is(\"multiple\", element) && !o.collection) {\n\t\t\t\treturn new Mavo.Collection(element, mavo, o);\n\t\t\t}\n\n\t\t\treturn new Mavo[Mavo.is(\"group\", element)? \"Group\" : \"Primitive\"](element, mavo, o);\n\t\t},\n\n\t\t/**\n\t\t * Get & normalize property name, if exists\n\t\t */\n\t\tgetProperty: function(element) {\n\t\t\tvar property = element.getAttribute(\"property\") || element.getAttribute(\"itemprop\");\n\n\t\t\tif (!property) {\n\t\t\t\tif (element.hasAttribute(\"property\")) { // property used without a value\n\t\t\t\t\tproperty = element.name || element.id || element.classList[0];\n\t\t\t\t}\n\t\t\t\telse if (element.matches(Mavo.selectors.multiple)) {\n\t\t\t\t\t// mv-multiple used without property, generate name\n\t\t\t\t\tproperty = element.getAttribute(\"mv-multiple\") || \"collection\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (property) {\n\t\t\t\telement.setAttribute(\"property\", property);\n\t\t\t}\n\n\t\t\treturn property;\n\t\t},\n\n\t\tget: function(element, prioritizePrimitive) {\n\t\t\tvar nodes = (_.all.get(element) || []).filter(node => !(node instanceof Mavo.Collection));\n\n\t\t\tif (nodes.length < 2 || !prioritizePrimitive) {\n\t\t\t\treturn nodes[0];\n\t\t\t}\n\n\t\t\tif (nodes[0] instanceof Mavo.Group) {\n\t\t\t\treturn node[1];\n\t\t\t}\n\t\t},\n\n\t\tgetClosest: function(element, prioritizePrimitive) {\n\t\t\tvar node;\n\n\t\t\tdo {\n\t\t\t\tnode = _.get(element, prioritizePrimitive);\n\t\t\t} while (!node && (element = element.parentNode));\n\n\t\t\treturn node;\n\t\t},\n\n\t\t/**\n\t\t * Get all properties that are inside an element but not nested into other properties\n\t\t */\n\t\tchildren: function(element) {\n\t\t\tvar ret = Mavo.Node.get(element);\n\n\t\t\tif (ret) {\n\t\t\t\t// element is a Mavo node\n\t\t\t\treturn [ret];\n\t\t\t}\n\n\t\t\tret = $$(Mavo.selectors.property, element)\n\t\t\t\t.map(e => Mavo.Node.get(e))\n\t\t\t\t.filter(e => !element.contains(e.parentGroup.element)) // drop nested properties\n\t\t\t\t.map(e => e.collection || e);\n\n\t\t\treturn Mavo.Functions.unique(ret);\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nvar _ = Mavo.Group = $.Class({\n\textends: Mavo.Node,\n\tnodeType: \"Group\",\n\tconstructor: function (element, mavo, o) {\n\t\tthis.children = {};\n\n\t\tthis.group = this;\n\n\t\tMavo.hooks.run(\"group-init-start\", this);\n\n\t\t// Should this element also create a primitive?\n\t\tif (Mavo.Primitive.getValueAttribute(this.element)) {\n\t\t\tvar obj = this.children[this.property] = new Mavo.Primitive(this.element, this.mavo, {group: this});\n\t\t}\n\n\t\t// Create Mavo objects for all properties in this group (primitives or groups),\n\t\t// but not properties in descendant groups (they will be handled by their group)\n\t\tvar properties = $$(Mavo.selectors.property + \", \" + Mavo.selectors.multiple, this.element).filter(element => {\n\t\t\treturn this.element === element.parentNode.closest(Mavo.selectors.group);\n\t\t});\n\n\t\tvar propertyNames = properties.map(element => Mavo.Node.getProperty(element));\n\n\t\tproperties.forEach((element, i) => {\n\t\t\tvar property = propertyNames[i];\n\t\t\tvar template = this.template? this.template.children[property] : null;\n\t\t\tvar options = {template, group: this};\n\n\t\t\tif (this.children[property]) {\n\t\t\t\t// Already exists, must be a collection\n\t\t\t\tvar collection = this.children[property];\n\t\t\t\tcollection.add(element);\n\t\t\t\tcollection.mutable = collection.mutable || Mavo.is(\"multiple\", element);\n\t\t\t}\n\t\t\telse if (propertyNames.indexOf(property) != propertyNames.lastIndexOf(property)) {\n\t\t\t\t// There are duplicates, so this should be a collection.\n\t\t\t\tthis.children[property] = new Mavo.Collection(element, this.mavo, options);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Normal case\n\t\t\t\tthis.children[property] = Mavo.Node.create(element, this.mavo, options);\n\t\t\t}\n\t\t});\n\n\t\tthis.childrenNames = Object.keys(this.children);\n\n\t\tvar vocabElement = (this.isRoot? this.element.closest(\"[vocab]\") : null) || this.element;\n\t\tthis.vocab = vocabElement.getAttribute(\"vocab\");\n\n\t\tthis.postInit();\n\n\t\tMavo.hooks.run(\"group-init-end\", this);\n\t},\n\n\tget isRoot() {\n\t\treturn !this.property;\n\t},\n\n\tgetNames: function(type = \"Node\") {\n\t\treturn Object.keys(this.children).filter(p => this.children[p] instanceof Mavo[type]);\n\t},\n\n\tgetData: function(o = {}) {\n\t\tvar env = {\n\t\t\tcontext: this,\n\t\t\toptions: o,\n\t\t\tdata: this.super.getData.call(this, o)\n\t\t};\n\n\t\tif (env.data !== undefined) {\n\t\t\t// Super method returned something\n\t\t\treturn env.data;\n\t\t}\n\n\t\tenv.data = this.liveData;\n\n\t\tif (this.childrenNames.length == 1 && this.childrenNames[0] == this.property) {\n\t\t\t// {foo: {foo: 5}} should become {foo: 5}\n\t\t\tvar options = $.extend($.extend({}, env.options), {forceObjects: true});\n\t\t\tenv.data = this.children[this.property].getData(options);\n\t\t}\n\t\telse {\n\t\t\tfor (var property in this.children) {\n\t\t\t\tvar obj = this.children[property];\n\n\t\t\t\tif (obj.saved || env.options.live) {\n\t\t\t\t\tvar data = obj.getData(env.options);\n\t\t\t\t}\n\n\t\t\t\tif (env.options.live || obj.saved && Mavo.value(data) !== null) {\n\t\t\t\t\tenv.data[obj.property] = data;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdelete env.data[obj.property];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (env.options.live) {\n\t\t\tthis.proxyCache = {};\n\t\t}\n\t\telse { // Stored data again\n\t\t\t// If storing, use the rendered data too\n\t\t\tenv.data = Mavo.subset(this.data, this.inPath, env.data);\n\n\t\t\tif (!this.childrenNames.length && !this.isRoot) {\n\t\t\t\t// Avoid {} in the data\n\t\t\t\tenv.data = null;\n\t\t\t}\n\t\t\telse if (env.data && typeof env.data === \"object\") {\n\t\t\t\t// Add JSON-LD stuff\n\t\t\t\tif (this.type && this.type != _.DEFAULT_TYPE) {\n\t\t\t\t\tenv.data[\"@type\"] = this.type;\n\t\t\t\t}\n\n\t\t\t\tif (this.vocab) {\n\t\t\t\t\tenv.data[\"@context\"] = this.vocab;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tMavo.hooks.run(\"node-getdata-end\", env);\n\n\t\treturn (env.options.live? env.data[Mavo.toProxy] : env.data) || env.data;\n\t},\n\n\t/**\n\t * Search entire subtree for property, return relative value\n\t * @return {Mavo.Node}\n\t */\n\tfind: function(property, o = {}) {\n\t\tif (o.exclude === this) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.property == property) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif (property in this.children) {\n\t\t\treturn this.children[property].find(property, o);\n\t\t}\n\n\t\tif (!this.properties.has(property)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar results = [], returnArray, ret;\n\n\t\tfor (var prop in this.children) {\n\t\t\tret = this.children[prop].find(property, o);\n\n\t\t\tif (ret !== undefined) {\n\t\t\t\tif (Array.isArray(ret)) {\n\t\t\t\t\tresults.push(...ret);\n\t\t\t\t\treturnArray = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresults.push(ret);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn returnArray || results.length > 1? results : results[0];\n\t},\n\n\tedit: function(o = {}) {\n\t\tif (this.super.edit.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn Promise.all(Object.keys(this.children).map(prop => this.children[prop].edit(o)));\n\t},\n\n\tsave: function() {\n\t\tthis.unsavedChanges = false;\n\t},\n\n\tpropagated: [\"save\", \"import\"],\n\n\t// Do not call directly, call this.render() instead\n\tdataRender: function(data) {\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\n\t\t// What if data is not an object?\n\t\tif (typeof data !== \"object\") {\n\t\t\tvar wasPrimitive = true;\n\n\t\t\t// Data is a primitive, render it on this.property or failing that, any writable property\n\t\t\tif (this.property in this.children) {\n\t\t\t\tvar property = this.property;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar type = $.type(data);\n\t\t\t\tvar score = prop => (this.children[prop] instanceof Mavo.Primitive) + (this.children[prop].datatype == type);\n\n\t\t\t\tvar property = Object.keys(this.children)\n\t\t\t\t\t.filter(p => !this.children[p].expressionText)\n\t\t\t\t\t.sort((prop1, prop2) => score(prop1) - score(prop2))\n\t\t\t\t\t.reverse()[0];\n\t\t\t}\n\n\t\t\tdata = {[property]: data};\n\n\t\t\tthis.data = Mavo.subset(this.data, this.inPath, data);\n\t\t}\n\n\t\tvar copy; // to handle renaming\n\n\t\tthis.propagate(obj => {\n\t\t\tvar propertyData = data[obj.property];\n\n\t\t\tif (obj.alias && data[obj.alias] !== undefined) {\n\t\t\t\tcopy = copy || $.extend({}, data);\n\t\t\t\tpropertyData = data[obj.alias];\n\t\t\t}\n\n\t\t\tobj.render(propertyData);\n\t\t});\n\n\t\t// Rename properties. This needs to be done separately to handle swapping.\n\t\tif (copy) {\n\t\t\tthis.propagate(obj => {\n\t\t\t\tif (obj.alias) {\n\t\t\t\t\tdata[obj.property] = copy[obj.alias];\n\n\t\t\t\t\tif (!(obj.alias in this.children)) {\n\t\t\t\t\t\tdelete data[obj.alias];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (!wasPrimitive) {\n\t\t\t// Fire mv-change events for properties not in the template,\n\t\t\t// since nothing else will and they can still be referenced in expressions\n\t\t\tvar oldData = Mavo.subset(this.oldData, this.inPath);\n\n\t\t\tfor (var property in data) {\n\t\t\t\tif (!(property in this.children)) {\n\t\t\t\t\tvar value = data[property];\n\n\t\t\t\t\tif (typeof value != \"object\" && (!oldData || oldData[property] != value)) {\n\t\t\t\t\t\tthis.dataChanged(\"propertychange\", {property});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.createLiveData(data);\n\t},\n\n\tlazy: {\n\t\tliveData: function() {\n\t\t\treturn this.createLiveData();\n\t\t}\n\t},\n\n\tstatic: {\n\t\tall: new WeakMap(),\n\n\t\tDEFAULT_TYPE: \"Item\",\n\n\t\tnormalize: function(element) {\n\t\t\t// Get & normalize typeof name, if exists\n\t\t\tif (Mavo.is(\"group\", element)) {\n\t\t\t\tvar type = Mavo.getAttribute(element, \"typeof\", \"itemtype\") || _.DEFAULT_TYPE;\n\n\t\t\t\telement.setAttribute(\"typeof\", type);\n\n\t\t\t\treturn type;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nvar _ = Mavo.Primitive = $.Class({\n\textends: Mavo.Node,\n\tnodeType: \"Primitive\",\n\tconstructor: function (element, mavo, o) {\n\t\tif (!this.fromTemplate(\"config\", \"attribute\", \"templateValue\", \"originalEditor\")) {\n\t\t\tthis.config = _.getConfig(element);\n\n\t\t\t// Which attribute holds the data, if any?\n\t\t\t// \"null\" or null for none (i.e. data is in content).\n\t\t\tthis.attribute = this.config.attribute;\n\t\t}\n\n\t\tthis.datatype = this.config.datatype;\n\n\t\tif (\"modes\" in this.config) {\n\t\t\t// If modes are related to element type, this overrides everything\n\t\t\t// because it means the other mode makes no sense for that element\n\t\t\tthis.modes = this.config.modes;\n\t\t\tthis.element.setAttribute(\"mv-mode\", this.config.modes);\n\t\t}\n\n\t\tMavo.hooks.run(\"primitive-init-start\", this);\n\n\t\t// Link primitive with its expressionText object\n\t\t// We need to do this before any editing UI is generated\n\t\tthis.expressionText = this.expressionText || Mavo.DOMExpression.search(this.element, this.attribute);\n\n\t\tif (this.expressionText && !this.expressionText.mavoNode) {\n\t\t\t// Computed property\n\t\t\tthis.expressionText.primitive = this;\n\t\t\tthis.storage = this.storage || \"none\";\n\t\t\tthis.modes = \"read\";\n\t\t\tthis.element.setAttribute(\"aria-live\", \"polite\");\n\t\t}\n\n\t\t/**\n\t\t * Set up input widget\n\t\t */\n\n\t\t // Linked widgets\n\t\tif (!this.editor && this.element.hasAttribute(\"mv-edit\")) {\n\t\t\tif (!this.originalEditor) {\n\t\t\t\tthis.originalEditor = $(this.element.getAttribute(\"mv-edit\"));\n\t\t\t}\n\n\t\t\tif (this.originalEditor) {\n\t\t\t\t// Update editor if original mutates\n\t\t\t\t// This means that expressions on mv-edit for individual collection items will not be picked up\n\t\t\t\tif (!this.template) {\n\t\t\t\t\tthis.originalEditorObserver = new Mavo.Observer(this.originalEditor, \"all\", records => {\n\t\t\t\t\t\tthis.copies.concat(this).forEach(primitive => {\n\t\t\t\t\t\t\tif (primitive.defaultSource == \"editor\") {\n\t\t\t\t\t\t\t\tprimitive.default = this.originalEditor.value;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (primitive.editor) {\n\t\t\t\t\t\t\t\tprimitive.editor = this.originalEditor.cloneNode(true);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tprimitive.setValue(primitive.value, {force: true, silent: true});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Nested widgets\n\t\tif (!this.editor && !this.originalEditor && !this.attribute) {\n\t\t\tthis.editor = $$(this.element.children).filter(function (el) {\n\t\t\t    return el.matches(Mavo.selectors.formControl) && !el.matches(Mavo.selectors.property);\n\t\t\t})[0];\n\n\t\t\tif (this.editor) {\n\t\t\t\t$.remove(this.editor);\n\t\t\t}\n\t\t}\n\n\t\tvar editorValue = this.editorValue;\n\n\t\tif (!this.datatype && (typeof editorValue == \"number\" || typeof editorValue == \"boolean\")) {\n\t\t\tthis.datatype = typeof editorValue;\n\t\t}\n\n\t\tif (this.config.init) {\n\t\t\tthis.config.init.call(this, this.element);\n\t\t}\n\n\t\tif (this.config.changeEvents) {\n\t\t\t$.bind(this.element, this.config.changeEvents, evt => {\n\t\t\t\tif (evt.target === this.element) {\n\t\t\t\t\tthis.value = this.getValue();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.templateValue = this.getValue();\n\n\t\tthis._default = this.element.getAttribute(\"mv-default\");\n\n\t\tif (this.default === null) { // no mv-default\n\t\t\tthis._default = this.modes? this.templateValue : editorValue;\n\t\t\tthis.defaultSource = this.modes? \"template\" : \"editor\";\n\t\t}\n\t\telse if (this.default === \"\") { // mv-default exists, no value, default is template value\n\t\t\tthis._default = this.templateValue;\n\t\t\tthis.defaultSource = \"template\";\n\t\t}\n\t\telse { // mv-default with value\n\t\t\tthis.defaultObserver = new Mavo.Observer(this.element, \"mv-default\", record => {\n\t\t\t\tthis.default = this.element.getAttribute(\"mv-default\");\n\t\t\t});\n\t\t\tthis.defaultSource = \"attribute\";\n\t\t}\n\n\t\tvar keepTemplateValue = !this.template // not in a collection or first item\n\t\t                        || this.template.templateValue != this.templateValue // or different template value than first item\n\t\t\t\t\t\t\t\t|| this.modes == \"edit\"; // or is always edited\n\n\t\tif (this.default === undefined && keepTemplateValue) {\n\t\t\tthis.initialValue = this.templateValue;\n\t\t}\n\t\telse {\n\t\t\tthis.initialValue = this.default;\n\t\t}\n\n\t\tif (this.initialValue === undefined) {\n\t\t\tthis.initialValue = this.emptyValue;\n\t\t}\n\n\t\tthis.setValue(this.initialValue, {silent: true});\n\n\t\tMavo.setAttributeShy(this.element, \"aria-label\", this.label);\n\n\t\tif (!this.attribute) {\n\t\t\tMavo.setAttributeShy(this.element, \"mv-attribute\", \"none\");\n\t\t}\n\n\t\tif (this.config.observer !== false) {\n\t\t\t// Observe future mutations to this property, if possible\n\t\t\t// Properties like input.checked or input.value cannot be observed that way\n\t\t\t// so we cannot depend on mutation observers for everything :(\n\t\t\tthis.observer = new Mavo.Observer(this.element, this.attribute, records => {\n\t\t\t\tif (this.observer.running && (this.attribute || !this.editing || this.config.subtree)) {\n\t\t\t\t\tthis.value = this.getValue();\n\t\t\t\t}\n\t\t\t}, {subtree: this.config.subtree, childList: this.config.subtree});\n\t\t}\n\n\t\tthis.postInit();\n\n\t\tMavo.hooks.run(\"primitive-init-end\", this);\n\t},\n\n\tget editorValue() {\n\t\tvar editor = this.editor || this.originalEditor;\n\n\t\tif (editor) {\n\t\t\tif (editor.matches(Mavo.selectors.formControl)) {\n\t\t\t\treturn _.getValue(editor, {datatype: this.datatype});\n\t\t\t}\n\n\t\t\t// if we're here, this.editor is an entire HTML structure\n\t\t\tvar output = $(Mavo.selectors.output + \", \" + Mavo.selectors.formControl, editor);\n\n\t\t\tif (output) {\n\t\t\t\treturn _.getValue(output);\n\t\t\t}\n\t\t}\n\t},\n\n\tset editorValue(value) {\n\t\tif (this.config.setEditorValue && this.datatype !== \"boolean\") {\n\t\t\treturn this.config.setEditorValue.call(this, value);\n\t\t}\n\n\t\tif (this.editor) {\n\t\t\tif (this.editor.matches(Mavo.selectors.formControl)) {\n\n\t\t\t\t_.setValue(this.editor, value, {config: this.editorDefaults});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// if we're here, this.editor is an entire HTML structure\n\t\t\t\tvar output = $(Mavo.selectors.output + \", \" + Mavo.selectors.formControl, this.editor);\n\n\t\t\t\tif (output) {\n\t\t\t\t\t_.setValue(output, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tdestroy: function() {\n\t\tthis.super.destroy.call(this);\n\n\t\tthis.defaultObserver && this.defaultObserver.destroy();\n\t\tthis.observer && this.observer.destroy();\n\t},\n\n\tgetData: function(o = {}) {\n\t\tvar env = {\n\t\t\tcontext: this,\n\t\t\toptions: o,\n\t\t\tdata: this.super.getData.call(this, o)\n\t\t};\n\n\t\tif (env.data === undefined) {\n\t\t\tenv.data = this.value;\n\n\t\t\tif (env.data === \"\") {\n\t\t\t\tenv.data = null;\n\t\t\t}\n\t\t}\n\n\t\tif (env.options.live) {\n\t\t\tif (this.collection || o.forceObjects) {\n\t\t\t\tenv.data = Mavo.objectify(env.data, {\n\t\t\t\t\t[Mavo.toNode]: this\n\t\t\t\t});\n\n\t\t\t\tenv.data[Mavo.toProxy] = this.relativizeData(env.data);\n\n\t\t\t\tif (this.collection) {\n\t\t\t\t\t// Turn primitive collection items into objects, so we can have $index etc, and their property\n\t\t\t\t\t// name etc resolve relative to them, not their parent group\n\t\t\t\t\tenv.data[this.property] = env.data;\n\t\t\t\t}\n\n\t\t\t\tMavo.hooks.run(\"node-getdata-end\", env);\n\n\t\t\t\tthis.proxyCache = {};\n\n\t\t\t\treturn env.data[Mavo.toProxy];\n\t\t\t}\n\t\t}\n\t\telse if (this.inPath.length) {\n\t\t\tenv.data = Mavo.subset(this.data, this.inPath, env.data);\n\t\t}\n\n\t\tMavo.hooks.run(\"node-getdata-end\", env);\n\n\t\treturn env.data;\n\t},\n\n\tsneak: function(callback) {\n\t\treturn Mavo.Observer.sneak(this.observer, callback);\n\t},\n\n\tsave: function() {\n\t\tthis.savedValue = this.value;\n\t\tthis.unsavedChanges = false;\n\t},\n\n\t// Called only the first time this primitive is edited\n\tinitEdit: function () {\n\t\tif (!this.editor && this.originalEditor) {\n\t\t\tthis.editor = this.originalEditor.cloneNode(true);\n\t\t}\n\n\t\tif (!this.editor) {\n\t\t\t// No editor provided, use default for element type\n\t\t\t// Find default editor for datatype\n\t\t\tvar editor = this.config.editor;\n\n\t\t\tif (!editor || this.datatype == \"boolean\") {\n\t\t\t\teditor = Mavo.Elements.defaultConfig[this.datatype || \"string\"].editor;\n\t\t\t}\n\n\t\t\tthis.editor = $.create($.type(editor) === \"function\"? editor.call(this) : editor);\n\t\t\tthis.editorValue = this.value;\n\t\t}\n\n\t\t$.bind(this.editor, {\n\t\t\t\"input change\": evt => {\n\t\t\t\tthis.value = this.editorValue;\n\t\t\t},\n\t\t\t\"mv-change\": evt => {\n\t\t\t\tif (evt.property === \"output\") {\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t$.fire(this.editor, \"input\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tvar multiline = this.editor.matches(\"textarea\");\n\n\t\tif (!multiline) {\n\t\t\tthis.editor.addEventListener(\"focus\", evt => {\n\t\t\t\tthis.editor.select && this.editor.select();\n\t\t\t});\n\t\t}\n\n\t\t// Enter should go to the next item or insert a new one\n\t\tif (!this.popup && this.closestCollection && this.editor.matches(Mavo.selectors.textInput)) {\n\t\t\tthis.editor.addEventListener(\"keydown\", evt => {\n\t\t\t\tif (evt.keyCode == 13 && this.closestCollection.editing && (evt.shiftKey || !multiline)) { // Enter\n\t\t\t\t\tvar copy = this.getCousin(1);\n\n\t\t\t\t\tif (!copy) {\n\t\t\t\t\t\t// It's the last item, insert new if top-down\n\t\t\t\t\t\tif (this.bottomUp) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar next = this.closestCollection.add();\n\t\t\t\t\t\tthis.closestCollection.editItem(next, {immediately: true});\n\t\t\t\t\t}\n\n\t\t\t\t\tcopy = this.getCousin(1);\n\t\t\t\t\tcopy.edit({immediately: true}).then(() => copy.editor.focus());\n\n\t\t\t\t\tif (multiline) {\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (evt.keyCode == 8 && (this.empty && this.collection || evt[Mavo.superKey])) {\n\t\t\t\t\t// Backspace on empty primitive or Cmd/Ctrl + Backspace should delete item\n\t\t\t\t\tthis.closestCollection.delete(this.closestItem);\n\n\t\t\t\t\t// Focus on sibling\n\t\t\t\t\tvar sibling = this.getCousin(1) || this.getCousin(-1);\n\n\t\t\t\t\tif (sibling) {\n\t\t\t\t\t\tsibling.edit({immediately: true}).then(() => sibling.editor.focus());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (\"placeholder\" in this.editor) {\n\t\t\tthis.editor.placeholder = \"(\" + this.label + \")\";\n\t\t}\n\n\t\t// Copy any mv-edit-* attributes from the element to the editor\n\t\tvar dataInput = /^mv-edit-/i;\n\t\t$$(this.element.attributes).forEach(function (attribute) {\n\t\t\tif (dataInput.test(attribute.name)) {\n\t\t\t\tthis.editor.setAttribute(attribute.name.replace(dataInput, \"\"), attribute.value);\n\t\t\t}\n\t\t}, this);\n\n\t\tif (this.attribute || this.config.popup) {\n\t\t\tthis.popup = new Mavo.UI.Popup(this);\n\t\t}\n\n\t\tif (!this.popup) {\n\t\t\tthis.editor.classList.add(\"mv-editor\");\n\t\t}\n\n\t\tthis.initEdit = null;\n\t},\n\n\tedit: function (o = {}) {\n\t\tif (this.super.edit.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Make element focusable, so it can actually receive focus\n\t\tif (this.element.tabIndex === -1) {\n\t\t\tMavo.revocably.setAttribute(this.element, \"tabindex\", \"0\");\n\t\t}\n\n\t\t// Prevent default actions while editing\n\t\t// e.g. following links etc\n\t\tif (!this.modes) {\n\t\t\t$.bind(this.element, \"click.mavo:edit\", evt => evt.preventDefault());\n\t\t}\n\n\t\tthis.preEdit = Mavo.defer(resolve => {\n\t\t\tif (o.immediately) {\n\t\t\t\treturn resolve();\n\t\t\t}\n\n\t\t\tvar timer;\n\n\t\t\tvar events = \"click focus dragover dragenter\".split(\" \").map(e => e + \".mavo:preedit\").join(\" \");\n\t\t\t$.bind(this.element, events, resolve);\n\t\t}).then(() => $.unbind(this.element, \".mavo:preedit\"));\n\n\t\tif (this.config.edit) {\n\t\t\tthis.config.edit.call(this);\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.preEdit.then(() => {\n\t\t\tthis.sneak(() => {\n\t\t\t\t// Actual edit\n\t\t\t\tif (this.initEdit) {\n\t\t\t\t\tthis.initEdit();\n\t\t\t\t}\n\n\t\t\t\tif (this.popup) {\n\t\t\t\t\tthis.popup.prepare();\n\t\t\t\t\tthis.popup.show();\n\t\t\t\t}\n\n\t\t\t\tif (!this.attribute && !this.popup) {\n\t\t\t\t\tif (this.editor.parentNode != this.element) {\n\t\t\t\t\t\tthis.editorValue = this.value;\n\t\t\t\t\t\tthis.element.textContent = \"\";\n\n\t\t\t\t\t\tthis.element.appendChild(this.editor);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.collection) {\n\t\t\t\t\t\tif (document.activeElement === this.element) {\n\t\t\t\t\t\t\tthis.editor.focus();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tMavo.revocably.restoreAttribute(this.element, \"tabindex\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}, // edit\n\n\tdone: function () {\n\t\tif (this.super.done.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\"preEdit\" in this) {\n\t\t\t$.unbind(this.element, \".mavo:preedit .mavo:edit\");\n\t\t}\n\n\t\tthis.sneak(() => {\n\t\t\tif (this.config.done) {\n\t\t\t\tthis.config.done.call(this);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.popup) {\n\t\t\t\tthis.popup.close();\n\t\t\t}\n\t\t\telse if (!this.attribute && this.editor) {\n\t\t\t\t$.remove(this.editor);\n\n\t\t\t\t_.setValue(this.element, this.editorValue, {\n\t\t\t\t\tconfig: this.config,\n\t\t\t\t\tattribute: this.attribute,\n\t\t\t\t\tdatatype: this.datatype,\n\t\t\t\t\tmap: this.originalEditor || this.editor\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (!this.collection) {\n\t\t\tMavo.revocably.restoreAttribute(this.element, \"tabindex\");\n\t\t}\n\t},\n\n\tdataRender: function(data) {\n\t\tif (data && typeof data === \"object\") {\n\t\t\tif (Symbol.toPrimitive in data) {\n\t\t\t\tdata = data[Symbol.toPrimitive]();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Candidate properties to get a value from\n\t\t\t\tvar properties = Object.keys(data), property;\n\n\t\t\t\tif (properties.length === 1) {\n\t\t\t\t\tproperty = properties[0];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tfor (let p of [this.property, \"value\", \"content\"]) {\n\t\t\t\t\t\tif (p in data) {\n\t\t\t\t\t\t\tproperty = p;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (property) {\n\t\t\t\t\tdata = data[property];\n\t\t\t\t\tthis.inPath.push(property);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (data === undefined) {\n\t\t\t// New property has been added to the schema and nobody has saved since\n\t\t\tif (!this.modes) {\n\t\t\t\tthis.value = this.closestCollection? this.default : this.templateValue;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.value = data;\n\t\t}\n\t},\n\n\tfind: function(property, o = {}) {\n\t\tif (this.property == property && o.exclude !== this) {\n\t\t\treturn this;\n\t\t}\n\t},\n\n\t/**\n\t * Get value from the DOM\n\t */\n\tgetValue: function(o) {\n\t\treturn _.getValue(this.element, {\n\t\t\tconfig: this.config,\n\t\t\tattribute: this.attribute,\n\t\t\tdatatype: this.datatype\n\t\t});\n\t},\n\n\tlazy: {\n\t\tlabel: function() {\n\t\t\treturn Mavo.Functions.readable(this.property);\n\t\t},\n\n\t\temptyValue: function() {\n\t\t\tswitch (this.datatype) {\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\treturn false;\n\t\t\t\tcase \"number\":\n\t\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn \"\";\n\t\t},\n\n\t\teditorDefaults: function() {\n\t\t\treturn this.editor && _.getConfig(this.editor);\n\t\t}\n\t},\n\n\tsetValue: function (value, o = {}) {\n\t\tthis.sneak(() => {\n\t\t\t// Convert nulls and undefineds to empty string\n\t\t\tvalue = value || value === 0 || value === false? value : \"\";\n\n\t\t\tvar oldDatatype = this.datatype;\n\n\t\t\t// If there's no datatype, adopt that of the value\n\t\t\tif (!this.datatype && (typeof value == \"number\" || typeof value == \"boolean\")) {\n\t\t\t\tthis.datatype = typeof value;\n\t\t\t}\n\n\t\t\tvalue = _.safeCast(value, this.datatype);\n\n\t\t\tif (!o.force && value == this._value && oldDatatype == this.datatype) {\n\t\t\t\t// Do nothing if value didn't actually change, unless forced to\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (this.editor && document.activeElement != this.editor) {\n\t\t\t\t// If external forces are changing the value (i.e. not the editor)\n\t\t\t\t// and an editor is present, set its value to match\n\t\t\t\tthis.editorValue = value;\n\t\t\t}\n\n\t\t\tif (this.popup || !this.editor || this.editor !== document.activeElement) { // Prevent loops\n\t\t\t\tif (this.config.setValue) {\n\t\t\t\t\tthis.config.setValue.call(this, this.element, value);\n\t\t\t\t}\n\t\t\t\telse if (!o.dataOnly) {\n\t\t\t\t\t_.setValue(this.element, value, {\n\t\t\t\t\t\tconfig: this.config,\n\t\t\t\t\t\tattribute: this.attribute,\n\t\t\t\t\t\tdatatype: this.datatype,\n\t\t\t\t\t\tmap: this.originalEditor || this.editor\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.empty = !value && value !== 0;\n\n\t\t\tthis._value = value;\n\n\t\t\tif (!o.silent) {\n\t\t\t\tif (this.saved) {\n\t\t\t\t\tthis.unsavedChanges = this.mavo.unsavedChanges = true;\n\t\t\t\t}\n\n\t\t\t\tthis.dataChanged(\"propertychange\", {value});\n\t\t\t}\n\t\t});\n\n\t\treturn value;\n\t},\n\n\tdataChanged: function(action = \"propertychange\", o) {\n\t\treturn this.super.dataChanged.call(this, action, o);\n\t},\n\n\tlive: {\n\t\tdefault: function (value) {\n\t\t\tif (this.value == this._default) {\n\t\t\t\tthis.value = value;\n\t\t\t}\n\t\t},\n\n\t\tvalue: function (value) {\n\t\t\treturn this.setValue(value);\n\t\t},\n\n\t\tdatatype: function (value) {\n\t\t\tif (value !== this._datatype) {\n\t\t\t\tif (value == \"boolean\" && !this.attribute) {\n\t\t\t\t\tthis.attribute = Mavo.Elements.defaultConfig.boolean.attribute;\n\t\t\t\t}\n\n\t\t\t\t$.toggleAttribute(this.element, \"datatype\", value, value && value !== \"string\");\n\t\t\t}\n\t\t},\n\n\t\tempty: function (value) {\n\t\t\tvar hide = value && // is empty\n\t\t\t           !this.modes && // and supports both modes\n\t\t\t           !(this.attribute && $(Mavo.selectors.property, this.element)); // and has no property inside\n\n\t\t\tthis.element.classList.toggle(\"mv-empty\", !!hide);\n\t\t}\n\t},\n\n\tstatic: {\n\t\tall: new WeakMap(),\n\n\t\tgetValueAttribute: function (element, config = Mavo.Elements.search(element)) {\n\t\t\tvar ret = element.getAttribute(\"mv-attribute\") || config.attribute;\n\n\t\t\tif (!ret || ret === \"null\" || ret === \"none\") {\n\t\t\t\tret = null;\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\n\t\t/**\n\t\t * Only cast if conversion is lossless\n\t\t */\n\t\tsafeCast: function(value, datatype) {\n\t\t\tvar existingType = typeof value;\n\t\t\tvar cast = _.cast(value, datatype);\n\n\t\t\tif (value === null || value === undefined) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (datatype == \"boolean\") {\n\t\t\t\tif (value === \"false\" || value === 0 || value === \"\") {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (value === \"true\" || value > 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (datatype == \"number\") {\n\t\t\t\tif (/^[-+]?[0-9.e]+$/i.test(value + \"\")) {\n\t\t\t\t\treturn cast;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\treturn cast;\n\t\t},\n\n\t\t/**\n\t\t * Cast to a different primitive datatype\n\t\t */\n\t\tcast: function(value, datatype) {\n\t\t\tswitch (datatype) {\n\t\t\t\tcase \"number\": return +value;\n\t\t\t\tcase \"boolean\": return !!value;\n\t\t\t\tcase \"string\": return value + \"\";\n\t\t\t}\n\n\t\t\treturn value;\n\t\t},\n\n\t\tgetValue: function (element, {config, attribute, datatype} = {}) {\n\t\t\tif (!config) {\n\t\t\t\tconfig = _.getConfig(element, attribute);\n\t\t\t}\n\n\t\t\tattribute = config.attribute;\n\t\t\tdatatype = config.datatype;\n\n\t\t\tif (config.getValue && attribute == config.attribute) {\n\t\t\t\treturn config.getValue(element);\n\t\t\t}\n\n\t\t\tvar ret;\n\n\t\t\tif (attribute in element && _.useProperty(element, attribute)) {\n\t\t\t\t// Returning properties (if they exist) instead of attributes\n\t\t\t\t// is needed for dynamic elements such as checkboxes, sliders etc\n\t\t\t\tret = element[attribute];\n\t\t\t}\n\t\t\telse if (attribute) {\n\t\t\t\tret = element.getAttribute(attribute);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tret = element.getAttribute(\"content\") || element.textContent || null;\n\t\t\t}\n\n\t\t\treturn _.safeCast(ret, datatype);\n\t\t},\n\n\t\tgetConfig: function(element, attribute, datatype) {\n\t\t\tif (attribute === undefined) {\n\t\t\t\tattribute = element.getAttribute(\"mv-attribute\") || undefined;\n\t\t\t}\n\n\t\t\tif (attribute == \"null\" || attribute == \"none\") {\n\t\t\t\tattribute = null;\n\t\t\t}\n\n\t\t\tif (!datatype && attribute == _.getValueAttribute(element)) {\n\t\t\t\tdatatype = element.getAttribute(\"datatype\") || undefined;\n\t\t\t}\n\n\t\t\tvar config = Mavo.Elements.search(element, attribute, datatype);\n\n\t\t\tif (config.attribute === undefined) {\n\t\t\t\tconfig.attribute = attribute || null;\n\t\t\t}\n\n\t\t\tif (config.datatype === undefined) {\n\t\t\t\tconfig.datatype = datatype;\n\t\t\t}\n\n\t\t\treturn config;\n\t\t},\n\n\t\tsetValue: function (element, value, o = {}) {\n\t\t\tif (element.nodeType === 1) {\n\t\t\t\tif (!o.config) {\n\t\t\t\t\to.config = _.getConfig(element, o.attribute);\n\t\t\t\t}\n\n\t\t\t\to.attribute = o.attribute !== undefined? o.attribute : o.config.attribute;\n\t\t\t\to.datatype = o.datatype !== undefined? o.datatype : o.config.datatype;\n\n\t\t\t\tif (o.config.setValue && o.attribute == o.config.attribute) {\n\t\t\t\t\treturn o.config.setValue(element, value, o.attribute);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (o.attribute) {\n\t\t\t\tif (o.attribute in element && _.useProperty(element, o.attribute) && element[o.attribute] !== value) {\n\t\t\t\t\t// Setting properties (if they exist) instead of attributes\n\t\t\t\t\t// is needed for dynamic elements such as checkboxes, sliders etc\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar previousValue = element[o.attribute];\n\t\t\t\t\t\tvar newValue = element[o.attribute] = value;\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {}\n\n\t\t\t\t\tif (previousValue != newValue && o.config.changeEvents) {\n\t\t\t\t\t\to.config.changeEvents.split(/\\s+/).forEach(type => $.fire(element, type));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Set attribute anyway, even if we set a property because when\n\t\t\t\t// they're not in sync it gets really fucking confusing.\n\t\t\t\tif (o.datatype == \"boolean\") {\n\t\t\t\t\tif (value != element.hasAttribute(o.attribute)) {\n\t\t\t\t\t\t$.toggleAttribute(element, o.attribute, value, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (element.getAttribute(o.attribute) != value) {  // intentionally non-strict, e.g. \"3.\" !== 3\n\t\t\t\t\telement.setAttribute(o.attribute, value);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar presentational = _.format(value, o);\n\n\t\t\t\tif (presentational !== value) {\n\t\t\t\t\telement.textContent = presentational;\n\n\t\t\t\t\tif (element.setAttribute) {\n\t\t\t\t\t\telement.setAttribute(\"content\", value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\telement.textContent = value;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *  Set/get a property or an attribute?\n\t\t * @return {Boolean} true to use a property, false to use the attribute\n\t\t */\n\t\tuseProperty: function(element, attribute) {\n\t\t\tif ([\"href\", \"src\"].indexOf(attribute) > -1) {\n\t\t\t\t// URL properties resolve \"\" as location.href, fucking up emptiness checks\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (element.namespaceURI == \"http://www.w3.org/2000/svg\") {\n\t\t\t\t// SVG has a fucked up DOM, do not use these properties\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tformat: (value, o = {}) => {\n\t\t\tif (o.map && /^select$/i.test(o.map.nodeName)) {\n\t\t\t\tfor (var i=0, option; option = o.map.options[i]; i++) {\n\t\t\t\t\tif (option.value == value) {\n\t\t\t\t\t\treturn option.textContent;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (($.type(value) === \"number\" || o.datatype == \"number\")) {\n\t\t\t\tvar skipNumberFormatting = o.attribute || o.element && o.element.matches(\"style, pre\");\n\n\t\t\t\tif (!skipNumberFormatting) {\n\t\t\t\t\treturn _.formatNumber(value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Array.isArray(value)) {\n\t\t\t\treturn value.map(_.format).join(\", \");\n\t\t\t}\n\n\t\t\tif ($.type(value) === \"object\") {\n\t\t\t\t// Oops, we have an object. Print something more useful than [object Object]\n\t\t\t\treturn Mavo.toJSON(value);\n\t\t\t}\n\n\t\t\treturn value;\n\t\t},\n\n\t\tlazy: {\n\t\t\tformatNumber: () => {\n\t\t\t\tvar numberFormat = new Intl.NumberFormat(Mavo.locale, {maximumFractionDigits:2});\n\n\t\t\t\treturn function(value) {\n\t\t\t\t\tif (value === Infinity || value === -Infinity) {\n\t\t\t\t\t\t// Pretty print infinity\n\t\t\t\t\t\treturn value < 0? \"-\" : \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\treturn numberFormat.format(value);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nvar _ = Mavo.UI.Popup = $.Class({\n\tconstructor: function(primitive) {\n\t\tthis.primitive = primitive;\n\n\t\t// Need to be defined here so that this is what expected\n\t\tthis.position = evt => {\n\t\t\tvar bounds = this.primitive.element.getBoundingClientRect();\n\t\t\tvar x = bounds.left;\n\t\t\tvar y = bounds.bottom;\n\t\t\tvar pointDown = false;\n\n\t\t\tif (this.element.offsetHeight) {\n\t\t\t\t// Is in the DOM, check if it fits\n\t\t\t\tthis.height = this.element.getBoundingClientRect().height || this.height;\n\t\t\t}\n\n\t\t\tif (this.height + y + 20 > innerHeight) {\n\t\t\t\t// Normal positioning means the popup would be cut off or too close to the edge, adjust\n\n\t\t\t\t// Perhaps placing it above is better\n\t\t\t\tif (bounds.top - this.height > 20) {\n\t\t\t\t\tvar pointDown = true;\n\t\t\t\t\ty = bounds.top - this.height - 20;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Nah, just raise it a bit\n\t\t\t\t\ty = innerHeight - this.height - 20;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.element.classList.toggle(\"mv-point-down\", pointDown);\n\n\t\t\t$.style(this.element, { top:  `${y}px`, left: `${x}px` });\n\t\t};\n\n\t\tthis.element = $.create(\"div\", {\n\t\t\tclassName: \"mv-popup\",\n\t\t\thidden: true,\n\t\t\tcontents: {\n\t\t\t\ttag: \"fieldset\",\n\t\t\t\tcontents: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttag: \"legend\",\n\t\t\t\t\t\ttextContent: this.primitive.label + \":\"\n\t\t\t\t\t},\n\t\t\t\t\tthis.editor\n\t\t\t\t]\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tkeyup: evt => {\n\t\t\t\t\tif (evt.keyCode == 13 || evt.keyCode == 27) {\n\t\t\t\t\t\tif (this.element.contains(document.activeElement)) {\n\t\t\t\t\t\t\tthis.primitive.element.focus();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttransitionend: this.position\n\t\t\t}\n\t\t});\n\n\t\t// No point in having a dropdown in a popup\n\t\tif (this.editor.matches(\"select\")) {\n\t\t\tthis.editor.size = Math.min(10, this.editor.children.length);\n\t\t}\n\t},\n\n\tshow: function() {\n\t\t$.unbind([this.primitive.element, this.element], \".mavo:showpopup\");\n\n\t\tthis.shown = true;\n\n\t\tthis.hideCallback = evt => {\n\t\t\tif (!this.element.contains(evt.target) && !this.primitive.element.contains(evt.target)) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t};\n\n\t\tthis.element.style.transition = \"none\";\n\t\tthis.element.removeAttribute(\"hidden\");\n\n\t\tthis.position();\n\n\t\tthis.element.setAttribute(\"hidden\", \"\");\n\t\tthis.element.style.transition = \"\";\n\n\t\tdocument.body.appendChild(this.element);\n\n\t\tsetTimeout(() => {\n\t\t\tthis.element.removeAttribute(\"hidden\");\n\t\t}, 100); // trigger transition. rAF or timeouts < 100 don't seem to, oddly.\n\n\t\t$.bind(document, \"focus click\", this.hideCallback, true);\n\t\twindow.addEventListener(\"scroll\", this.position, {passive: true});\n\t},\n\n\thide: function() {\n\t\t$.unbind(document, \"focus click\", this.hideCallback, true);\n\t\twindow.removeEventListener(\"scroll\", this.position, {passive: true});\n\t\tthis.element.setAttribute(\"hidden\", \"\"); // trigger transition\n\t\tthis.shown = false;\n\n\t\tsetTimeout(() => {\n\t\t\t$.remove(this.element);\n\t\t}, parseFloat(getComputedStyle(this.element).transitionDuration) * 1000 || 400); // TODO transition-duration could override this\n\t},\n\n\tprepare: function() {\n\t\t$.bind(this.primitive.element, {\n\t\t\t\"click.mavo:edit\": evt => {\n\t\t\t\tthis.show();\n\t\t\t},\n\t\t\t\"keyup.mavo:edit\": evt => {\n\t\t\t\tif ([13, 113].indexOf(evt.keyCode) > -1) { // Enter or F2\n\t\t\t\t\tthis.show();\n\t\t\t\t\tthis.editor.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tclose: function() {\n\t\tthis.hide();\n\t\t$.unbind(this.primitive.element, \".mavo:edit .mavo:preedit .mavo:showpopup\");\n\t},\n\n\tproxy: {\n\t\t\"editor\": \"primitive\"\n\t}\n});\n\n})(Bliss, Bliss.$);\n","/**\n * Configuration for different types of elements. Options:\n * - attribute {String}\n * - useProperty {Boolean}\n * - datatype {\"number\"|\"boolean\"|\"string\"} Default is \"string\"\n * - modes\n * - editor {Object|Function}\n * - setEditorValue temporary\n * - edit\n * - done\n * - observe\n * - default: If there is no attribute, can we use that rule to pick one?\n * @\n */\n(function($, $$) {\n\nvar _ = Mavo.Elements = {};\n\nObject.defineProperties(_, {\n\t\"register\": {\n\t\tvalue: function(id, config) {\n\t\t\tif (typeof arguments[0] === \"object\") {\n\t\t\t\t// Multiple definitions\n\t\t\t\tfor (let s in arguments[0]) {\n\t\t\t\t\t_.register(s, arguments[0][s]);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (config.extend) {\n\t\t\t\tvar base = _[config.extend];\n\n\t\t\t\tconfig = $.extend($.extend({}, base), config);\n\t\t\t}\n\n\t\t\tif (id.indexOf(\"@\") > -1) {\n\t\t\t\tvar parts = id.split(\"@\");\n\n\t\t\t\tconfig.selector = config.selector || parts[0] || \"*\";\n\n\t\t\t\tif (config.attribute === undefined) {\n\t\t\t\t\tconfig.attribute = parts[1];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconfig.selector = config.selector || id;\n\t\t\tconfig.id = id;\n\n\t\t\tif (Array.isArray(config.attribute)) {\n\t\t\t\tconfig.attribute.forEach(attribute => {\n\t\t\t\t\tvar o = $.extend({}, config);\n\t\t\t\t\to.attribute = attribute;\n\n\t\t\t\t\t_[`${id}@${attribute}`] = o;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_[id] = config;\n\t\t\t}\n\n\t\t\treturn _;\n\t\t}\n\t},\n\t\"search\": {\n\t\tvalue: function(element, attribute, datatype) {\n\t\t\tvar matches = _.matches(element, attribute, datatype);\n\n\t\t\tvar lastMatch = matches[matches.length - 1];\n\n\t\t\tif (lastMatch) {\n\t\t\t\treturn lastMatch;\n\t\t\t}\n\n\t\t\tvar config = $.extend({}, _.defaultConfig[datatype || \"string\"]);\n\t\t\tconfig.attribute = attribute === undefined? config.attribute : attribute;\n\n\t\t\treturn config;\n\t\t}\n\t},\n\t\"matches\": {\n\t\tvalue: function(element, attribute, datatype) {\n\t\t\tvar matches = [];\n\n\t\t\tselectorloop: for (var id in _) {\n\t\t\t\tvar o = _[id];\n\n\t\t\t\t// Passes attribute test?\n\t\t\t\tvar attributeMatches = attribute === undefined && o.default || attribute === o.attribute;\n\n\t\t\t\tif (!attributeMatches) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Passes datatype test?\n\t\t\t\tif (datatype !== undefined && datatype !== \"string\" && datatype !== o.datatype) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Passes selector test?\n\t\t\t\tvar selector = o.selector || id;\n\n\t\t\t\tif (!element.matches(selector)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Passes arbitrary test?\n\t\t\t\tif (o.test && !o.test(element, attribute, datatype)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// All tests have passed\n\t\t\t\tmatches.push(o);\n\t\t\t}\n\n\t\t\treturn matches;\n\t\t}\n\t},\n\n\tisSVG: {\n\t\tvalue: e => e.namespaceURI == \"http://www.w3.org/2000/svg\"\n\t},\n\n\tdefaultConfig: {\n\t\tvalue: {\n\t\t\t\"string\":  {\n\t\t\t\teditor: { tag: \"input\" }\n\t\t\t},\n\t\t\t\"number\":  {\n\t\t\t\teditor: { tag: \"input\", type: \"number\" }\n\t\t\t},\n\t\t\t\"boolean\": {\n\t\t\t\tattribute: \"content\",\n\t\t\t\teditor: { tag: \"input\", type: \"checkbox\" }\n\t\t\t}\n\t\t}\n\t}\n});\n\n_.register({\n\t\"@hidden\": {\n\t\tdatatype: \"boolean\"\n\t},\n\n\t\"@y\": {\n\t\ttest: _.isSVG,\n\t\tdatatype: \"number\"\n\t},\n\n\t\"@x\": {\n\t\tdefault: true,\n\t\ttest: _.isSVG,\n\t\tdatatype: \"number\"\n\t},\n\n\t\"media\": {\n\t\tdefault: true,\n\t\tselector: \"img, video, audio\",\n\t\tattribute: \"src\",\n\t\teditor: function() {\n\t\t\tvar mainInput = $.create(\"input\", {\n\t\t\t\t\"type\": \"url\",\n\t\t\t\t\"placeholder\": \"http://example.com/image.png\",\n\t\t\t\t\"className\": \"mv-output\",\n\t\t\t\t\"aria-label\": \"URL to image\"\n\t\t\t});\n\n\t\t\tif (this.mavo.uploadBackend && self.FileReader) {\n\t\t\t\tvar popup;\n\t\t\t\tvar type = this.element.nodeName.toLowerCase();\n\t\t\t\ttype = type == \"img\"? \"image\" : type;\n\t\t\t\tvar path = this.element.getAttribute(\"mv-uploads\") || type + \"s\";\n\n\t\t\t\tvar upload = (file, name = file.name) => {\n\t\t\t\t\tif (!file || file.type.indexOf(type + \"/\") !== 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar tempURL = URL.createObjectURL(file);\n\n\t\t\t\t\tthis.sneak(() => this.element.src = tempURL);\n\n\t\t\t\t\tthis.mavo.upload(file, path + \"/\" + name).then(url => {\n\t\t\t\t\t\t// Backend claims image is uploaded, we should load it from remote to make sure everything went well\n\t\t\t\t\t\tvar attempts = 0;\n\t\t\t\t\t\tvar load = Mavo.rr(() => Mavo.timeout(1000 + attempts * 500).then(() => {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tthis.element.src = url;\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tvar cleanup = () => {\n\t\t\t\t\t\t\tURL.revokeObjectURL(tempURL);\n\t\t\t\t\t\t\tthis.element.removeEventListener(\"load\", onload);\n\t\t\t\t\t\t\tthis.element.removeEventListener(\"error\", onload);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar onload = evt => {\n\t\t\t\t\t\t\tif (this.element.src != tempURL) {\n\t\t\t\t\t\t\t\t// Actual uploaded image has loaded, yay!\n\t\t\t\t\t\t\t\tthis.element.src = url;\n\t\t\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar onerror = evt => {\n\t\t\t\t\t\t\t// Oops, failed. Put back temp URL and try again\n\t\t\t\t\t\t\tif (attempts <= 10) {\n\t\t\t\t\t\t\t\tthis.sneak(() => this.element.src = tempURL);\n\t\t\t\t\t\t\t\tload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// 11 + 0.5*10*11/2 = 38.5 seconds later, giving up\n\t\t\t\t\t\t\t\tthis.mavo.error(this.mavo._(\"cannot-load-uploaded-file\") + \" \" + url);\n\t\t\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tmainInput.value = url;\n\t\t\t\t\t\tthis.element.addEventListener(\"load\", onload);\n\t\t\t\t\t\tthis.element.addEventListener(\"error\", onerror);\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tvar uploadEvents = {\n\t\t\t\t\t\"paste\": evt => {\n\t\t\t\t\t\tvar item = evt.clipboardData.items[0];\n\n\t\t\t\t\t\tif (item.kind == \"file\" && item.type.indexOf(type + \"/\") === 0) {\n\t\t\t\t\t\t\t// Is a file of the correct type, upload!\n\t\t\t\t\t\t\tvar defaultName = `pasted-${type}-${Date.now()}.${item.type.slice(6)}`; // image, video, audio are all 5 chars\n\t\t\t\t\t\t\tvar name = prompt(this.mavo._(\"filename\"), defaultName);\n\n\t\t\t\t\t\t\tif (name === \"\") {\n\t\t\t\t\t\t\t\tname = defaultName;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (name !== null) {\n\t\t\t\t\t\t\t\tupload(item.getAsFile(), name);\n\t\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"drag dragstart dragend dragover dragenter dragleave drop\": evt => {\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t},\n\t\t\t\t\t\"dragover dragenter\": evt => {\n\t\t\t\t\t\tpopup.classList.add(\"mv-dragover\");\n\t\t\t\t\t\tthis.element.classList.add(\"mv-dragover\");\n\t\t\t\t\t},\n\t\t\t\t\t\"dragleave dragend drop\": evt => {\n\t\t\t\t\t\tpopup.classList.remove(\"mv-dragover\");\n\t\t\t\t\t\tthis.element.classList.remove(\"mv-dragover\");\n\t\t\t\t\t},\n\t\t\t\t\t\"drop\": evt => {\n\t\t\t\t\t\tupload(evt.dataTransfer.files[0]);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t$.bind(this.element, uploadEvents);\n\n\t\t\t\treturn popup = $.create({\n\t\t\t\t\tclassName: \"mv-upload-popup\",\n\t\t\t\t\tcontents: [\n\t\t\t\t\t\tmainInput, {\n\t\t\t\t\t\t\ttag: \"input\",\n\t\t\t\t\t\t\ttype: \"file\",\n\t\t\t\t\t\t\t\"aria-label\": \"Upload image\",\n\t\t\t\t\t\t\taccept: type + \"/*\",\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tchange: evt => {\n\t\t\t\t\t\t\t\t\tvar file = evt.target.files[0];\n\n\t\t\t\t\t\t\t\t\tif (!file) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tupload(file);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tclassName: \"mv-tip\",\n\t\t\t\t\t\t\tinnerHTML: \"<strong>Tip:</strong> You can also drag & drop or paste!\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tevents: uploadEvents\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn mainInput;\n\t\t\t}\n\t\t}\n\t},\n\n\t\"video, audio\": {\n\t\tattribute: [\"autoplay\", \"buffered\", \"loop\"],\n\t\tdatatype: \"boolean\"\n\t},\n\n\t\"details\": {\n\t\tattribute: \"open\",\n\t\tdatatype: \"boolean\"\n\t},\n\n\t\"a, link\": {\n\t\tdefault: true,\n\t\tattribute: \"href\"\n\t},\n\n\t\"input, select, button, textarea\": {\n\t\tattribute: \"disabled\",\n\t\tdatatype: \"boolean\"\n\t},\n\n\t\"formControl\": {\n\t\tselector: \"input\",\n\t\tdefault: true,\n\t\tattribute: \"value\",\n\t\tmodes: \"edit\",\n\t\tchangeEvents: \"input change\",\n\t\tedit: () => {},\n\t\tdone: () => {},\n\t\tinit: function() {\n\t\t\tthis.editor = this.element;\n\t\t}\n\t},\n\n\t\"select\": {\n\t\textend: \"formControl\",\n\t\tselector: \"select\",\n\t\tsubtree: true\n\t},\n\n\t\"textarea\": {\n\t\textend: \"formControl\",\n\t\tselector: \"textarea\",\n\t\tattribute: null,\n\t\tgetValue: element => element.value,\n\t\tsetValue: (element, value) => element.value = value\n\t},\n\n\t\"formNumber\": {\n\t\textend: \"formControl\",\n\t\tselector: \"input[type=range], input[type=number]\",\n\t\tdatatype: \"number\",\n\t\tsetValue: function(element, value) {\n\t\t\telement.value = value;\n\t\t\telement.setAttribute(\"value\", value);\n\n\t\t\tvar attribute = value > element.value? \"max\" : \"min\";\n\n\t\t\tif (!isNaN(value) && element.value != value && !Mavo.data(element, \"boundObserver\")) {\n\t\t\t\t// Value out of bounds, maybe race condition? See #295\n\t\t\t\t// Observe min/max attrs until user interaction or data change\n\t\t\t\tvar observer = new Mavo.Observer(element, attribute, r => {\n\t\t\t\t\telement.value = value;\n\t\t\t\t});\n\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t$.bind(element, \"input mv-change\", function handler() {\n\t\t\t\t\t\tobserver.destroy();\n\t\t\t\t\t\tMavo.data(element, \"boundObserver\", undefined);\n\t\t\t\t\t\t$.unbind(element, \"input mv-change\", handler);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// Prevent creating same observer twice\n\t\t\t\tMavo.data(element, \"boundObserver\", observer);\n\t\t\t}\n\t\t}\n\t},\n\n\t\"checkbox\": {\n\t\textend: \"formControl\",\n\t\tselector: \"input[type=checkbox]\",\n\t\tattribute: \"checked\",\n\t\tdatatype: \"boolean\",\n\t\tchangeEvents: \"click\"\n\t},\n\n\t\"radio\": {\n\t\textend: \"formControl\",\n\t\tselector: \"input[type=radio]\",\n\t\tattribute: \"checked\",\n\t\tmodes: \"edit\",\n\t\tgetValue: element => {\n\t\t\tif (element.form) {\n\t\t\t\treturn element.form[element.name].value;\n\t\t\t}\n\n\t\t\tvar checked = $(`input[type=radio][name=\"${element.name}\"]:checked`);\n\t\t\treturn checked && checked.value;\n\t\t},\n\t\tsetValue: (element, value) => {\n\t\t\tif (element.form) {\n\t\t\t\telement.form[element.name].value = value;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar toCheck = $(`input[type=radio][name=\"${element.name}\"][value=\"${value}\"]`);\n\t\t\t$.properties(toCheck, {checked: true});\n\t\t},\n\t\tinit: function(element) {\n\t\t\tthis.mavo.element.addEventListener(\"change\", evt => {\n\t\t\t\tif (evt.target.name == element.name) {\n\t\t\t\t\tthis.value = this.getValue();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t\"counter\": {\n\t\textend: \"formControl\",\n\t\tselector: \"button, .counter\",\n\t\tattribute: \"mv-clicked\",\n\t\tdatatype: \"number\",\n\t\tinit: function(element) {\n\t\t\tif (this.attribute === \"mv-clicked\") {\n\t\t\t\telement.setAttribute(\"mv-clicked\", \"0\");\n\n\t\t\t\telement.addEventListener(\"click\", evt => {\n\t\t\t\t\tlet clicked = +element.getAttribute(\"mv-clicked\") || 0;\n\t\t\t\t\tthis.value = ++clicked;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\t\"meter, progress\": {\n\t\tdefault: true,\n\t\tattribute: \"value\",\n\t\tdatatype: \"number\",\n\t\tedit: function() {\n\t\t\tvar min = +this.element.getAttribute(\"min\") || 0;\n\t\t\tvar max = +this.element.getAttribute(\"max\") || 1;\n\t\t\tvar range = max - min;\n\t\t\tvar step = +this.element.getAttribute(\"mv-edit-step\") || (range > 1? 1 : range/100);\n\n\t\t\t$.bind(this.element, \"mousemove.mavo:edit\", evt => {\n\t\t\t\t// Change property as mouse moves\n\t\t\t\tvar left = this.element.getBoundingClientRect().left;\n\t\t\t\tvar offset = Math.max(0, (evt.clientX - left) / this.element.offsetWidth);\n\t\t\t\tvar newValue = min + range * offset;\n\t\t\t\tvar mod = newValue % step;\n\n\t\t\t\tnewValue += mod > step/2? step - mod : -mod;\n\t\t\t\tnewValue = Math.max(min, Math.min(newValue, max));\n\n\t\t\t\tthis.sneak(() => this.element.setAttribute(\"value\", newValue));\n\t\t\t});\n\n\t\t\t$.bind(this.element, \"mouseleave.mavo:edit\", evt => {\n\t\t\t\t// Return to actual value\n\t\t\t\tthis.sneak(() => this.element.setAttribute(\"value\", this.value));\n\t\t\t});\n\n\t\t\t$.bind(this.element, \"click.mavo:edit\", evt => {\n\t\t\t\t// Register change\n\t\t\t\tthis.value = this.getValue();\n\t\t\t});\n\n\t\t\t$.bind(this.element, \"keydown.mavo:edit\", evt => {\n\t\t\t\t// Edit with arrow keys\n\t\t\t\tif (evt.target == this.element && (evt.keyCode == 37 || evt.keyCode == 39)) {\n\t\t\t\t\tvar increment = step * (evt.keyCode == 39? 1 : -1) * (evt.shiftKey? 10 : 1);\n\t\t\t\t\tvar newValue = this.value + increment;\n\t\t\t\t\tnewValue = Math.max(min, Math.min(newValue, max));\n\n\t\t\t\t\tthis.element.setAttribute(\"value\", newValue);\n\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tdone: function() {\n\t\t\t$.unbind(this.element, \".mavo:edit\");\n\t\t}\n\t},\n\n\t\"meta\": {\n\t\tdefault: true,\n\t\tattribute: \"content\"\n\t},\n\n\t\"block\": {\n\t\tdefault: true,\n\t\tselector: \"p, div, dt, dd, h1, h2, h3, h4, h5, h6, article, section, address\",\n\t\teditor: function() {\n\t\t\tvar cs = getComputedStyle(this.element);\n\t\t\tvar display = cs.display;\n\t\t\tvar tag = display.indexOf(\"inline\") === 0? \"input\" : \"textarea\";\n\t\t\tvar editor = $.create(tag);\n\n\t\t\tif (tag == \"textarea\") {\n\t\t\t\t// Actually multiline\n\t\t\t\tvar width = this.element.offsetWidth;\n\n\t\t\t\tif (width) {\n\t\t\t\t\teditor.width = width;\n\t\t\t\t}\n\n\t\t\t\t// We cannot collapse whitespace because then users\n\t\t\t\t// are adding characters they dont see (#300).\n\t\t\t\teditor.style.whiteSpace = ({\n\t\t\t\t\t\"normal\": \"pre-wrap\",\n\t\t\t\t\t\"nowrap\": \"pre\"\n\t\t\t\t})[cs.whiteSpace] || \"inherit\";\n\t\t\t}\n\n\t\t\treturn editor;\n\t\t},\n\n\t\tsetEditorValue: function(value) {\n\t\t\tif (this.datatype && this.datatype != \"string\") {\n\t\t\t\tvalue = value + \"\";\n\t\t\t}\n\n\t\t\tvar cs = getComputedStyle(this.element);\n\t\t\tvalue = value || \"\";\n\n\t\t\tif ([\"normal\", \"nowrap\"].indexOf(cs.whiteSpace) > -1) {\n\t\t\t\t// Collapse lines\n\t\t\t\tvalue = value.replace(/\\r?\\n/g, \" \");\n\t\t\t}\n\n\t\t\tif ([\"normal\", \"nowrap\", \"pre-line\"].indexOf(cs.whiteSpace) > -1) {\n\t\t\t\t// Collapse whitespace\n\t\t\t\tvalue = value.replace(/^[ \\t]+|[ \\t]+$/gm, \"\").replace(/[ \\t]+/g, \" \");\n\t\t\t}\n\n\t\t\tthis.editor.value = value;\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t\"time\": {\n\t\tattribute: \"datetime\",\n\t\tdefault: true,\n\t\tinit: function() {\n\t\t\tif (!this.fromTemplate(\"dateType\")) {\n\t\t\t\tvar dateFormat = Mavo.DOMExpression.search(this.element, null);\n\t\t\t\tvar datetime = this.element.getAttribute(\"datetime\") || \"YYYY-MM-DD\";\n\n\t\t\t\tfor (var type in this.config.dateTypes) {\n\t\t\t\t\tif (this.config.dateTypes[type].test(datetime)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.dateType = type;\n\n\t\t\t\tif (!dateFormat) {\n\t\t\t\t\t// TODO what about mv-expressions?\n\t\t\t\t\tthis.element.textContent = this.config.defaultFormats[this.dateType](this.property);\n\t\t\t\t\tthis.mavo.expressions.extract(this.element, null);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdateTypes: {\n\t\t\t\"month\": /^[Y\\d]{4}-[M\\d]{2}$/i,\n\t\t\t\"time\": /^[H\\d]{2}:[M\\d]{2}/i,\n\t\t\t\"datetime-local\": /^[Y\\d]{4}-[M\\d]{2}-[D\\d]{2} [H\\d]{2}:[Mi\\d]{2}/i,\n\t\t\t\"date\": /^[Y\\d]{4}-[M\\d]{2}-[D\\d]{2}$/i,\n\t\t},\n\t\tdefaultFormats: {\n\t\t\t\"date\": name => `[day(${name})] [month(${name}).shortname] [year(${name})]`,\n\t\t\t\"month\": name => `[month(${name}).name] [year(${name})]`,\n\t\t\t\"time\": name => `[hour(${name}).twodigit]:[minute(${name}).twodigit]`,\n\t\t\t\"datetime-local\": function(name) {\n\t\t\t\treturn this.date(name) + \" \" + this.time(name);\n\t\t\t}\n\t\t},\n\t\teditor: function() {\n\t\t\treturn {tag: \"input\", type: this.dateType};\n\t\t}\n\t},\n\n\t\"circle@r\": {\n\t\tdefault: true,\n\t\tdatatype: \"number\"\n\t},\n\n\t\"circle\": {\n\t\tattribute: [\"cx\", \"cy\"],\n\t\tdatatype: \"number\"\n\t},\n\n\t\"text\": {\n\t\tdefault: true,\n\t\tpopup: true\n\t},\n\n\t\".mv-toggle\": {\n\t\tdefault: true,\n\t\tattribute: \"aria-checked\",\n\t\tdatatype: \"boolean\",\n\t\tedit: function() {\n\t\t\tMavo.revocably.setAttribute(this.element, \"role\", \"checkbox\");\n\n\t\t\t$.bind(this.element, \"click.mavo:edit keyup.mavo:edit keydown.mavo:edit\", evt => {\n\t\t\t\tif (evt.type == \"click\" || evt.key == \" \" || evt.key == \"Enter\") {\n\t\t\t\t\tif (evt.type != \"keydown\") {\n\t\t\t\t\t\tthis.value = !this.value;\n\t\t\t\t\t}\n\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tdone: function() {\n\t\t\tMavo.revocably.restoreAttribute(this.element, \"role\");\n\n\t\t\t$.unbind(this.element, \".mavo:edit\");\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nMavo.attributes.push(\"mv-multiple\", \"mv-order\", \"mv-accepts\");\n\nvar _ = Mavo.Collection = $.Class({\n\textends: Mavo.Node,\n\tnodeType: \"Collection\",\n\tconstructor: function (element, mavo, o) {\n\t\t/*\n\t\t * Create the template, remove it from the DOM and store it\n\t\t */\n\t\tthis.templateElement = this.element;\n\n\t\tthis.children = [];\n\n\t\t// ALL descendant property names as an array\n\t\tif (!this.fromTemplate(\"mutable\", \"templateElement\", \"accepts\", \"optional\", \"like\", \"likeNode\")) {\n\t\t\tthis.mutable = this.templateElement.matches(Mavo.selectors.multiple);\n\t\t\tthis.accepts = (this.templateElement.getAttribute(\"mv-accepts\") || \"\").split(/\\s+/);\n\t\t\tthis.like = this.templateElement.getAttribute(\"mv-like\");\n\n\t\t\tif (this.like) {\n\t\t\t\tthis.likeNode = this.resolve(this.like, {exclude: this});\n\t\t\t\tthis.likeNode = this.likeNode || this.likeNode.template;\n\n\t\t\t\tif (!this.likeNode) {\n\t\t\t\t\tthis.like = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.optional = !!this.like || this.templateElement.hasAttribute(\"mv-optional\");\n\n\t\t\t// Must clone because otherwise once expressions are parsed on the template element\n\t\t\t// we will not be able to pick them up from subsequent items\n\t\t\tthis.templateElement = this.templateElement.cloneNode(true);\n\t\t}\n\n\t\tif (this.likeNode) {\n\t\t\tthis.itemTemplate = this.likeNode;\n\t\t\tvar templateElement = $.value(this.likeNode.collection, \"templateElement\") || this.likeNode.element;\n\t\t\tthis.templateElement = templateElement.cloneNode(true);\n\t\t\tthis.templateElement.setAttribute(\"property\", this.property);\n\t\t\tthis.properties = this.likeNode.properties;\n\t\t}\n\t\telse if (!this.optional || !this.template) {\n\t\t\tvar item = this.createItem(this.element);\n\t\t\tthis.add(item, undefined, {silent: true});\n\n\t\t\tif (this.optional) {\n\t\t\t\tthis.delete(item, true);\n\t\t\t}\n\t\t}\n\n\t\tif (this.optional) {\n\t\t\tthis.element.remove();\n\t\t}\n\n\t\tthis.postInit();\n\n\t\tMavo.hooks.run(\"collection-init-end\", this);\n\t},\n\n\tget length() {\n\t\treturn this.children.length;\n\t},\n\n\tgetData: function(o = {}) {\n\t\tvar env = {\n\t\t\tcontext: this,\n\t\t\toptions: o,\n\t\t\tdata: this.liveData\n\t\t};\n\n\t\tif (env.options.live) {\n\t\t\tthis.proxyCache = {};\n\t\t}\n\n\t\tfor (var i = 0, j = 0; item = this.children[i]; i++) {\n\t\t\tif (!item.deleted || env.options.live) {\n\t\t\t\tvar itemData = item.getData(env.options);\n\n\t\t\t\tif (env.options.live || Mavo.value(itemData) !== null) {\n\t\t\t\t\tenv.data[j] = itemData;\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tenv.data.length = j;\n\n\t\tif (!this.mutable) {\n\t\t\t// If immutable, drop nulls\n\t\t\tMavo.filter(env.data, item => Mavo.value(item) !== null);\n\n\t\t\tif (env.options.live && env.data.length === 1) {\n\t\t\t\t// If immutable with only 1 item, return the item\n\t\t\t\t// See https://github.com/LeaVerou/mavo/issues/50#issuecomment-266079652\n\t\t\t\tenv.data = env.data[0];\n\t\t\t}\n\t\t\telse if (this.data && !env.options.live) {\n\t\t\t\tvar rendered = Mavo.subset(this.data, this.inPath);\n\t\t\t\tenv.data = env.data.concat(rendered.slice(env.data.length));\n\t\t\t}\n\t\t}\n\n\t\tif (!env.options.live) {\n\t\t\tenv.data = Mavo.subset(this.data, this.inPath, env.data);\n\t\t}\n\n\t\tMavo.hooks.run(\"node-getdata-end\", env);\n\n\t\treturn (env.options.live? env.data[Mavo.toProxy] : env.data) || env.data;\n\t},\n\n\t// Create item but don't insert it anywhere\n\t// Mostly used internally\n\tcreateItem: function (element) {\n\t\tif (!element) {\n\t\t\telement = this.templateElement.cloneNode(true);\n\t\t}\n\n\t\tvar template = this.itemTemplate || (this.template? this.template.itemTemplate : null);\n\n\t\tvar item = Mavo.Node.create(element, this.mavo, {\n\t\t\tcollection: this,\n\t\t\ttemplate,\n\t\t\tproperty: this.property,\n\t\t\ttype: this.type\n\t\t});\n\n\t\tif (!this.itemTemplate) {\n\t\t\tthis.itemTemplate = template || item;\n\t\t}\n\n\t\treturn item;\n\t},\n\n\t/**\n\t * Add a new item to this collection\n\t * @param item {Node|Mavo.Node} Optional. Element or Mavo object for the new item\n\t * @param index {Number} Optional. Index of existing item, will be added opposite to list direction\n\t * @param silent {Boolean} Optional. Throw a datachange event? Mainly used internally.\n\t */\n\tadd: function(item, index, o = {}) {\n\t\tif (item instanceof Node) {\n\t\t\titem = Mavo.Node.get(item) || this.createItem(item);\n\t\t}\n\t\telse {\n\t\t\titem = item || this.createItem();\n\t\t}\n\n\t\tif (item.collection != this) {\n\t\t\tthis.adopt(item);\n\t\t}\n\n\t\tif (this.mutable) {\n\t\t\t// Add it to the DOM, or fix its place\n\t\t\tvar rel = this.children[index]? this.children[index].element : this.marker;\n\t\t\t$[this.bottomUp? \"after\" : \"before\"](item.element, rel);\n\n\t\t\tif (index === undefined) {\n\t\t\t\tindex = this.bottomUp? 0 : this.length;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tindex = this.length;\n\t\t}\n\n\t\tvar env = {context: this, item};\n\n\t\tenv.previousIndex = item.index;\n\n\t\t// Update internal data model\n\t\tenv.changed = this.splice({\n\t\t\tremove: env.item\n\t\t}, {\n\t\t\tindex: index,\n\t\t\tadd: env.item\n\t\t});\n\n\t\tif (env.item.itembar) {\n\t\t\tenv.item.itembar.reposition();\n\t\t}\n\n\t\tif (this.mavo.expressions.active && !o.silent) {\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tenv.changed.forEach(i => {\n\t\t\t\t\ti.dataChanged(i == env.item && env.previousIndex === undefined? \"add\" : \"move\");\n\t\t\t\t\ti.unsavedChanges = true;\n\t\t\t\t});\n\n\t\t\t\tthis.unsavedChanges = this.mavo.unsavedChanges = true;\n\n\t\t\t\tthis.mavo.expressions.update(env.item);\n\t\t\t});\n\t\t}\n\n\t\tMavo.hooks.run(\"collection-add-end\", env);\n\n\t\treturn env.item;\n\t},\n\n\tsplice: function(...actions) {\n\t\tactions.forEach(action => {\n\t\t\tif (action.index === undefined && action.remove && isNaN(action.remove)) {\n\t\t\t\t// Remove is an item\n\t\t\t\taction.index = this.children.indexOf(action.remove);\n\t\t\t\taction.remove = 1;\n\t\t\t}\n\t\t});\n\n\t\t// Sort in reverse index order\n\t\tactions.sort((a, b) => b.index - a.index);\n\n\t\t// FIXME this could still result in buggy behavior.\n\t\t// Think of e.g. adding items on i, then removing > 1 items on i-1.\n\t\t// The new items would get removed instead of the old ones.\n\t\t// Not a pressing issue though since we always remove 1 max when adding things too.\n\t\tactions.forEach(action => {\n\t\t\tif (action.index > -1 && (action.remove || action.add)) {\n\t\t\t\taction.remove = action.remove || 0;\n\t\t\t\taction.add = Mavo.toArray(action.add);\n\n\t\t\t\tthis.children.splice(action.index, +action.remove, ...action.add);\n\t\t\t}\n\t\t});\n\n\t\tvar changed = [];\n\n\t\tfor (let i = 0; i < this.length; i++) {\n\t\t\tlet item = this.children[i];\n\n\t\t\tif (item && item.index !== i) {\n\t\t\t\titem.index = i;\n\t\t\t\tchanged.push(item);\n\t\t\t}\n\t\t}\n\n\t\treturn changed;\n\t},\n\n\tadopt: function(item) {\n\t\tif (item.collection) {\n\t\t\t// It belongs to another collection, delete from there first\n\t\t\titem.collection.splice({remove: item});\n\t\t\titem.collection.dataChanged(\"delete\");\n\t\t}\n\n\t\t // Update collection & closestCollection properties\n\t\tthis.walk(obj => {\n\t\t\tif (obj.closestCollection === item.collection) {\n\t\t\t\tobj.closestCollection = this;\n\t\t\t}\n\n\t\t\t// Belongs to another Mavo?\n\t\t\tif (item.mavo != this.mavo) {\n\t\t\t\titem.mavo = this.mavo;\n\t\t\t}\n\t\t});\n\n\t\titem.collection = this;\n\n\t\t// Adjust templates and their copies\n\t\tif (item.template) {\n\t\t\tMavo.delete(item.template.copies, item);\n\n\t\t\titem.template = this.itemTemplate;\n\t\t}\n\t},\n\n\tdelete: function(item, hard) {\n\t\tif (hard) {\n\t\t\t// Hard delete\n\t\t\t$.remove(item.element);\n\t\t\tthis.splice({remove: item});\n\t\t\titem.destroy();\n\t\t\treturn;\n\t\t}\n\n\t\treturn $.transition(item.element, {opacity: 0}).then(() => {\n\t\t\titem.deleted = true; // schedule for deletion\n\t\t\titem.element.style.opacity = \"\";\n\n\t\t\titem.dataChanged(\"delete\");\n\n\t\t\tthis.unsavedChanges = item.unsavedChanges = this.mavo.unsavedChanges = true;\n\t\t});\n\t},\n\n\t/**\n\t * Move existing item to a new position. Wraps around if position is out of bounds.\n\t * @offset relative position\n\t */\n\tmove: function(item, offset) {\n\t\tvar index = item.index + offset + (offset > 0);\n\n\t\tindex = Mavo.wrap(index, this.children.length + 1);\n\n\t\tthis.add(item, index);\n\n\t\tif (item instanceof Mavo.Primitive && item.itembar) {\n\t\t\titem.itembar.reposition();\n\t\t}\n\t},\n\n\teditItem: function(item, o = {}) {\n\t\tvar when = o.immediately? Promise.resolve() : Mavo.inView.when(item.element);\n\n\t\treturn when.then(() => {\n\t\t\tif (this.mutable) {\n\t\t\t\tif (!item.itembar) {\n\t\t\t\t\titem.itembar = new Mavo.UI.Itembar(item);\n\t\t\t\t}\n\n\t\t\t\titem.itembar.add();\n\t\t\t}\n\n\t\t\treturn item.edit(o);\n\t\t});\n\t},\n\n\tedit: function(o = {}) {\n\t\tif (this.super.edit.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.mutable) {\n\t\t\t// Insert the add button if it's not already in the DOM\n\t\t\tif (!this.addButton.parentNode) {\n\t\t\t\tvar tag = this.element.tagName.toLowerCase();\n\t\t\t\tvar containerSelector = Mavo.selectors.container[tag];\n\t\t\t\tvar rel = containerSelector? this.marker.parentNode.closest(containerSelector) : this.marker;\n\t\t\t\t$[this.bottomUp? \"before\" : \"after\"](this.addButton, rel);\n\t\t\t}\n\n\t\t\t// Set up drag & drop\n\t\t\t_.dragula.then(() => {\n\t\t\t\tthis.getDragula();\n\t\t\t});\n\t\t}\n\n\t\t// Edit items, maybe insert item bar\n\t\treturn Promise.all(this.children.map(item => this.editItem(item, o)));\n\t},\n\n\tdone: function() {\n\t\tif (this.super.done.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.mutable) {\n\t\t\tif (this.addButton.parentNode) {\n\t\t\t\tthis.addButton.remove();\n\t\t\t}\n\n\t\t\tthis.propagate(item => {\n\t\t\t\tif (item.itembar) {\n\t\t\t\t\titem.itembar.remove();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tdataChanged: function(action, o = {}) {\n\t\to.element = o.element || this.marker;\n\t\treturn this.super.dataChanged.call(this, action, o);\n\t},\n\n\tsave: function() {\n\t\tthis.children.forEach(item => {\n\t\t\tif (item.deleted) {\n\t\t\t\tthis.delete(item, true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\titem.unsavedChanges = false;\n\t\t\t}\n\t\t});\n\t},\n\n\tpropagated: [\"save\"],\n\n\tdataRender: function(data) {\n\t\tif (data === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tdata = data === null? [] : Mavo.toArray(data).filter(i => i !== null);\n\n\t\tif (!this.mutable) {\n\t\t\tthis.children.forEach((item, i) => item.render(data && data[i]));\n\t\t}\n\t\telse {\n\t\t\t// First render on existing items\n\t\t\tfor (var i = 0; i < this.children.length; i++) {\n\t\t\t\tvar item = this.children[i];\n\n\t\t\t\tif (i < data.length) {\n\t\t\t\t\titem.render(data[i]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\titem.dataChanged(\"delete\");\n\t\t\t\t\tthis.delete(item, true);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (data.length > i) {\n\t\t\t\t// There are still remaining items\n\t\t\t\t// Using document fragments improves performance by 60%\n\t\t\t\tvar fragment = document.createDocumentFragment();\n\n\t\t\t\tfor (var j = i; j < data.length; j++) {\n\t\t\t\t\tvar item = this.createItem();\n\n\t\t\t\t\titem.render(data[j]);\n\n\t\t\t\t\tthis.children.push(item);\n\t\t\t\t\titem.index = j;\n\n\t\t\t\t\tfragment.appendChild(item.element);\n\n\t\t\t\t\tvar env = {context: this, item};\n\t\t\t\t\tMavo.hooks.run(\"collection-add-end\", env);\n\t\t\t\t}\n\n\t\t\t\tif (this.bottomUp) {\n\t\t\t\t\t$.after(fragment, i > 0? this.children[i-1].element : this.marker);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$.before(fragment, this.marker);\n\t\t\t\t}\n\n\t\t\t\tfor (var j = i; j < this.children.length; j++) {\n\t\t\t\t\tthis.children[j].dataChanged(\"add\");\n\n\t\t\t\t\tif (this.mavo.expressions.active) {\n\t\t\t\t\t\trequestAnimationFrame(() => this.mavo.expressions.update(this.children[j]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.createLiveData(data|| []);\n\t},\n\n\tfind: function(property, o = {}) {\n\t\tif (o.exclude === this) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar items = this.children.filter(item => !item.deleted && !item.hidden);\n\n\t\tif (this.property == property) {\n\t\t\treturn o.collections? this : items;\n\t\t}\n\n\t\tif (this.properties.has(property)) {\n\t\t\tvar ret = items.map(item => item.find(property, o));\n\n\t\t\treturn Mavo.flatten(ret);\n\t\t}\n\t},\n\n\tisCompatible: function(c) {\n\t\treturn c && this.itemTemplate.nodeType == c.itemTemplate.nodeType && (c === this\n\t\t       || c.template == this || this.template == c || this.template && this.template == c.template\n\t\t       || this.accepts.indexOf(c.property) > -1);\n\t},\n\n\tlive: {\n\t\tmutable: function(value) {\n\t\t\tif (value && value !== this.mutable) {\n\t\t\t\t// Why is all this code here? Because we want it executed\n\t\t\t\t// every time mutable changes, not just in the constructor\n\t\t\t\t// (think multiple elements with the same property name, where only one has mv-multiple)\n\t\t\t\tthis._mutable = value;\n\n\t\t\t\t// Keep position of the template in the DOM, since we might remove it\n\t\t\t\tthis.marker = document.createComment(\"mv-marker\");\n\t\t\t\tMavo.data(this.marker, \"collection\", this);\n\n\t\t\t\tvar ref = this.templateElement.parentNode? this.templateElement : this.children[this.length - 1].element;\n\n\t\t\t\t$.after(this.marker, ref);\n\t\t\t}\n\t\t}\n\t},\n\n\t// Make sure to only call after dragula has loaded\n\tgetDragula: function() {\n\t\tif (this.dragula) {\n\t\t\treturn this.dragula;\n\t\t}\n\n\t\tif (this.template) {\n\t\t\tMavo.pushUnique(this.template.getDragula().containers, this.marker.parentNode);\n\t\t\treturn this.dragula = this.template.dragula || this.template.getDragula();\n\t\t}\n\n\t\tvar me = this;\n\t\tthis.dragula = dragula({\n\t\t\tcontainers: [this.marker.parentNode],\n\t\t\tisContainer: el => {\n\t\t\t\tif (this.accepts.length) {\n\t\t\t\t\treturn Mavo.flatten(this.accepts.map(property => this.mavo.root.find(property, {collections: true})))\n\t\t\t\t\t\t\t\t.filter(c => c && c instanceof _)\n\t\t\t\t\t\t\t\t.map(c => c.marker.parentNode)\n\t\t\t\t\t\t\t\t.indexOf(el) > -1;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tmoves: (el, container, handle) => {\n\t\t\t\treturn handle.classList.contains(\"mv-drag-handle\") && handle.closest(Mavo.selectors.multiple) == el;\n\t\t\t},\n\t\t\taccepts: function(el, target, source, next) {\n\t\t\t\tif (el.contains(target)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar previous = next? next.previousElementSibling : target.lastElementChild;\n\n\t\t\t\tvar collection = _.get(previous) || _.get(next);\n\n\t\t\t\tif (!collection) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar item = Mavo.Node.get(el);\n\n\t\t\t\treturn item && item.collection.isCompatible(collection);\n\t\t\t}\n\t\t});\n\n\t\tthis.dragula.on(\"drop\", (el, target, source) => {\n\t\t\tvar item = Mavo.Node.get(el);\n\t\t\tvar oldIndex = item && item.index;\n\t\t\tvar next = el.nextElementSibling;\n\t\t\tvar previous = el.previousElementSibling;\n\t\t\tvar collection = _.get(previous) || _.get(next);\n\t\t\tvar closestItem = Mavo.Node.get(previous) || Mavo.Node.get(next);\n\n\t\t\tif (closestItem && closestItem.collection != collection) {\n\t\t\t\tclosestItem = null;\n\t\t\t}\n\n\t\t\tif (item.collection.isCompatible(collection)) {\n\t\t\t\tvar index = closestItem? closestItem.index + (closestItem.element === previous) : collection.length;\n\t\t\t\tcollection.add(item, index);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.dragula.cancel(true);\n\t\t\t}\n\t\t});\n\n\t\t_.dragulas.push(this.dragula);\n\n\t\treturn this.dragula;\n\t},\n\n\tlazy: {\n\t\tbottomUp: function() {\n\t\t\t/*\n\t\t\t * Add new items at the top or bottom?\n\t\t\t */\n\n\t\t\tif (!this.mutable) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar order = this.templateElement.getAttribute(\"mv-order\");\n\n\t\t\tif (order !== null) {\n\t\t\t\t// Attribute has the highest priority and overrides any heuristics\n\t\t\t\treturn /^desc\\b/i.test(order);\n\t\t\t}\n\n\t\t\tif (!this.addButton.parentNode) {\n\t\t\t\t// If add button not in DOM, do the default\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// If add button is already in the DOM and *before* our template, then we default to prepending\n\t\t\treturn !!(this.addButton.compareDocumentPosition(this.marker) & Node.DOCUMENT_POSITION_FOLLOWING);\n\t\t},\n\n\t\tclosestCollection: function() {\n\t\t\tvar parent = this.marker? this.marker.parentNode : this.templateElement.parentNode;\n\n\t\t\treturn parent.closest(Mavo.selectors.multiple);\n\t\t},\n\n\t\taddButton: function() {\n\t\t\t// Find add button if provided, or generate one\n\t\t\tvar selector = `button.mv-add-${this.property}`;\n\t\t\tvar group = this.closestCollection || this.marker.parentNode.closest(Mavo.selectors.group);\n\n\t\t\tif (group) {\n\t\t\t\tvar button = $$(selector, group).filter(button => {\n\t\t\t\t\treturn !this.templateElement.contains(button)  // is outside the template element\n\t\t\t\t\t\t&& !Mavo.data(button, \"collection\"); // and does not belong to another collection\n\t\t\t\t})[0];\n\t\t\t}\n\n\t\t\tif (!button) {\n\t\t\t\tbutton = $.create(\"button\", {\n\t\t\t\t\tclassName: \"mv-add\",\n\t\t\t\t\ttextContent: this.mavo._(\"add-item\", this)\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tbutton.classList.add(\"mv-ui\", \"mv-add\");\n\t\t\tMavo.data(button, \"collection\", this);\n\n\t\t\tif (this.property) {\n\t\t\t\tbutton.classList.add(`mv-add-${this.property}`);\n\t\t\t}\n\n\t\t\tbutton.addEventListener(\"click\", evt => {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tthis.editItem(this.add());\n\t\t\t});\n\n\t\t\treturn button;\n\t\t},\n\n\t\tliveData: function() {\n\t\t\treturn this.createLiveData([]);\n\t\t}\n\t},\n\n\tstatic: {\n\t\tdragulas: [],\n\t\tget: element => {\n\t\t\t// Is it an add button or a marker?\n\t\t\tvar collection = Mavo.data(element, \"collection\");\n\n\t\t\tif (collection) {\n\t\t\t\treturn collection;\n\t\t\t}\n\n\t\t\t// Maybe it's a collection item?\n\t\t\tvar item = Mavo.Node.get(element);\n\n\t\t\treturn item && item.collection || null;\n\t\t},\n\n\t\tlazy: {\n\t\t\tdragula: () => $.include(self.dragula, \"https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.2/dragula.min.js\")\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nvar _ = Mavo.UI.Itembar = $.Class({\n\tconstructor: function(item) {\n\t\tthis.item = item;\n\n\t\tthis.element = $$(`.mv-item-bar:not([mv-rel]), .mv-item-bar[mv-rel=\"${this.item.property}\"]`, this.item.element).filter(el => {\n\t\t\t\t// Remove item controls meant for other collections\n\t\t\t\treturn el.closest(Mavo.selectors.multiple) == this.item.element && !Mavo.data(el, \"item\");\n\t\t\t})[0];\n\n\t\tif (!this.element && this.item.template && this.item.template.itembar) {\n\t\t\t// We can clone the buttons from the template\n\t\t\tthis.element = this.item.template.itembar.element.cloneNode(true);\n\t\t\tthis.dragHandle = $(\".mv-drag-handle\", this.element) || this.item.element;\n\t\t}\n\t\telse {\n\t\t\t// First item of this type\n\t\t\tthis.element = this.element || $.create({\n\t\t\t\tclassName: \"mv-item-bar mv-ui\"\n\t\t\t});\n\n\t\t\tvar buttons = [\n\t\t\t\t{\n\t\t\t\t\ttag: \"button\",\n\t\t\t\t\ttitle: this.mavo._(\"delete-item\", this.item),\n\t\t\t\t\tclassName: \"mv-delete\"\n\t\t\t\t}, {\n\t\t\t\t\ttag: \"button\",\n\t\t\t\t\ttitle: this.mavo._(`add-item-${this.collection.bottomUp? \"after\" : \"before\"}`, this.item),\n\t\t\t\t\tclassName: \"mv-add\"\n\t\t\t\t}\n\t\t\t];\n\n\t\t\tif (this.item instanceof Mavo.Group) {\n\t\t\t\tthis.dragHandle = $.create({\n\t\t\t\t\ttag: \"button\",\n\t\t\t\t\ttitle: this.mavo._(\"drag-to-reorder\", this.item),\n\t\t\t\t\tclassName: \"mv-drag-handle\"\n\t\t\t\t});\n\n\t\t\t\tbuttons.push(this.dragHandle);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.dragHandle = this.item.element;\n\t\t\t}\n\n\t\t\t$.set(this.element, {\n\t\t\t\t\"mv-rel\": this.item.property,\n\t\t\t\tcontents: buttons\n\t\t\t});\n\t\t}\n\n\t\tthis.element.setAttribute(\"hidden\", \"\");\n\n\t\t$.bind([this.item.element, this.element], \"focusin mouseover\", this);\n\n\t\t$.bind(this.element, {\n\t\t\tmouseenter: evt => {\n\t\t\t\tthis.item.element.classList.add(\"mv-highlight\");\n\t\t\t},\n\t\t\tmouseleave: evt => {\n\t\t\t\tthis.item.element.classList.remove(\"mv-highlight\");\n\t\t\t}\n\t\t});\n\n\t\tthis.dragHandle.addEventListener(\"keydown\", evt => {\n\t\t\tif (evt.target === this.dragHandle && this.item.editing && evt.keyCode >= 37 && evt.keyCode <= 40) {\n\t\t\t\t// Arrow keys\n\t\t\t\tthis.collection.move(this.item, evt.keyCode <= 38? -1 : 1);\n\n\t\t\t\tevt.stopPropagation();\n\t\t\t\tevt.preventDefault();\n\t\t\t\tevt.target.focus();\n\t\t\t}\n\t\t});\n\n\t\tvar selectors = {\n\t\t\tadd: this.buttonSelector(\"add\"),\n\t\t\tdelete: this.buttonSelector(\"delete\"),\n\t\t\tdrag: this.buttonSelector(\"drag\")\n\t\t};\n\n\t\tthis.element.addEventListener(\"click\", evt => {\n\t\t\tif (this.item.collection.editing) {\n\t\t\t\tif (evt.target.matches(selectors.add)) {\n\t\t\t\t\tvar newItem = this.collection.add(null, this.item.index);\n\n\t\t\t\t\tif (evt[Mavo.superKey]) {\n\t\t\t\t\t\tnewItem.render(this.item.getData());\n\t\t\t\t\t}\n\n\t\t\t\t\tMavo.scrollIntoViewIfNeeded(newItem.element);\n\n\t\t\t\t\treturn this.collection.editItem(newItem);\n\t\t\t\t}\n\t\t\t\telse if (evt.target.matches(selectors.delete)) {\n\t\t\t\t\tthis.item.collection.delete(item);\n\t\t\t\t}\n\t\t\t\telse if (evt.target.matches(selectors[\"drag-handle\"])) {\n\t\t\t\t\tevt => evt.target.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tMavo.data(this.element, \"item\", this.item);\n\t},\n\n\tdestroy: function() {\n\t\tthis.hide();\n\t},\n\n\tshow: function(sticky) {\n\t\t_.visible.forEach(instance => {\n\t\t\tif (instance != this && (!this.sticky || instance.sticky)) {\n\t\t\t\tclearTimeout(instance.hideTimeout);\n\t\t\t\tinstance.hide(sticky, _.DELAY);\n\t\t\t}\n\t\t});\n\n\t\t_.visible.add(this);\n\n\t\tif (this.element.hasAttribute(\"hidden\") || sticky && !this.sticky) {\n\t\t\tthis.element.removeAttribute(\"hidden\");\n\t\t\tthis.sticky = this.sticky || sticky;\n\t\t\t$.bind([this.item.element, this.element], \"focusout mouseleave\", this);\n\n\t\t\tif (this.adjacent) {\n\t\t\t\t// Position\n\t\t\t\t$.style(this.element, {\n\t\t\t\t\t\"--mv-item-width\": this.item.element.offsetWidth + \"px\",\n\t\t\t\t\t\"--mv-item-height\": this.item.element.offsetHeight + \"px\",\n\t\t\t\t\t\"--mv-item-left\": this.item.element.offsetLeft + \"px\",\n\t\t\t\t\t\"--mv-item-top\": this.item.element.offsetTop + \"px\"\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\thide: function(sticky, timeout = 0) {\n\t\tif (!this.sticky || sticky) {\n\t\t\tif (timeout) {\n\t\t\t\tthis.hideTimeout = setTimeout(() => this.hide(sticky), timeout);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.element.setAttribute(\"hidden\", \"\");\n\t\t\t\t$.unbind([this.item.element, this.element], \"focusout mouseleave\", this);\n\t\t\t\tthis.sticky = false;\n\t\t\t\t_.visible.delete(this);\n\t\t\t}\n\n\t\t}\n\t},\n\n\thandleEvent: function(evt) {\n\t\tvar sticky = evt.type.indexOf(\"mouse\") === -1;\n\n\t\tif (this.isWithinItem(evt.target)) {\n\t\t\tclearTimeout(this.hideTimeout);\n\n\t\t\tif ([\"mouseleave\", \"focusout\", \"blur\"].indexOf(evt.type) > -1) {\n\t\t\t\tif (!this.isWithinItem(evt.relatedTarget)) {\n\t\t\t\t\tthis.hide(sticky, _.DELAY);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.show(sticky);\n\t\t\t\tevt.stopPropagation();\n\t\t\t}\n\t\t}\n\t},\n\n\tisWithinItem: function(element) {\n\t\tif (!element) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar itemBar = element.closest(\".mv-item-bar\");\n\t\treturn itemBar? itemBar === this.element : element.closest(Mavo.selectors.item) === this.item.element;\n\t},\n\n\tadd: function() {\n\t\tif (!this.element.parentNode) {\n\t\t\tif (!Mavo.revocably.add(this.element)) {\n\t\t\t\tif (this.item instanceof Mavo.Primitive && !this.item.attribute) {\n\t\t\t\t\tthis.adjacent = true;\n\t\t\t\t\t$.after(this.element, this.item.element);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.item.element.appendChild(this.element);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.dragHandle == this.item.element) {\n\t\t\tthis.item.element.classList.add(\"mv-drag-handle\");\n\t\t}\n\t},\n\n\tremove: function() {\n\t\tMavo.revocably.remove(this.element);\n\n\t\tif (this.dragHandle == this.item.element) {\n\t\t\tthis.item.element.classList.remove(\"mv-drag-handle\");\n\t\t}\n\t},\n\n\treposition: function() {\n\t\tif (this.item instanceof Mavo.Primitive) {\n\t\t\t// This is only needed for lists of primitives, because the item element\n\t\t\t// does not contain the minibar. In lists of groups, this can be harmful\n\t\t\t// because it will remove custom positioning\n\t\t\tthis.element.remove();\n\t\t\tthis.add();\n\t\t}\n\t},\n\n\tbuttonSelector: function(type) {\n\t\treturn `.mv-${type}[mv-rel=\"${this.item.property}\"], [mv-rel=\"${this.item.property}\"] > .mv-${type}`;\n\t},\n\n\tlive: {\n\t\tsticky: function(v) {\n\t\t\tthis.element.classList.toggle(\"mv-sticky\", v);\n\t\t},\n\n\t\tadjacent: function(v) {\n\t\t\tthis.element.classList.toggle(\"mv-adjacent\", v);\n\t\t}\n\t},\n\n\tproxy: {\n\t\tcollection: \"item\",\n\t\tmavo: \"item\"\n\t},\n\n\tstatic: {\n\t\tDELAY: 100,\n\t\tvisible: new Set()\n\t}\n});\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nMavo.attributes.push(\"mv-expressions\");\n\nvar _ = Mavo.Expression = $.Class({\n\tconstructor: function(expression) {\n\t\tthis.expression = expression;\n\t},\n\n\teval: function(data) {\n\t\tMavo.hooks.run(\"expression-eval-beforeeval\", this);\n\n\t\ttry {\n\t\t\tif (!this.function) {\n\t\t\t\tthis.function = Mavo.Script.compile(this.expression);\n\t\t\t}\n\n\t\t\treturn this.function(data);\n\t\t}\n\t\tcatch (exception) {\n\t\t\tconsole.info(\"%cExpression error!\", \"color: red; font-weight: bold\", `${exception.message} in expression ${this.expression}`, `\nNot an expression? Use mv-expressions=\"none\" to disable expressions on an element and its descendants.`);\n\n\t\t\tMavo.hooks.run(\"expression-eval-error\", {context: this, exception});\n\n\t\t\treturn exception;\n\t\t}\n\t},\n\n\ttoString() {\n\t\treturn this.expression;\n\t},\n\n\tchangedBy: function(evt) {\n\t\treturn _.changedBy(this.identifiers, evt);\n\t},\n\n\tlive: {\n\t\texpression: function(value) {\n\t\t\tthis.function = null;\n\t\t\tthis.identifiers = value.match(/[$a-z][$\\w]*/ig) || [];\n\t\t}\n\t},\n\n\tstatic: {\n\t\tchangedBy: function(identifiers, evt) {\n\t\t\tif (!evt) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (!identifiers) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (identifiers.indexOf(evt.property) > -1) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (Mavo.Functions.intersects(evt.properties, identifiers)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (evt.action == \"propertychange\") {\n\t\t\t\treturn Mavo.Functions.intersects(identifiers, evt.node.path);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (Mavo.Functions.intersects([\"$index\", \"$previous\", \"$next\"], identifiers)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tvar collection = evt.node.collection || evt.node;\n\n\t\t\t\tif (Mavo.Functions.intersects(collection.properties, identifiers)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t}\n});\n\n_.Syntax = $.Class({\n\tconstructor: function(start, end) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t\tthis.regex = RegExp(`${Mavo.escapeRegExp(start)}([\\\\S\\\\s]+?)${Mavo.escapeRegExp(end)}`, \"gi\");\n\t},\n\n\ttest: function(str) {\n\t\tthis.regex.lastIndex = 0;\n\n\t\treturn this.regex.test(str);\n\t},\n\n\ttokenize: function(str) {\n\t\tvar match, ret = [], lastIndex = 0;\n\n\t\tthis.regex.lastIndex = 0;\n\n\t\twhile ((match = this.regex.exec(str)) !== null) {\n\t\t\t// Literal before the expression\n\t\t\tif (match.index > lastIndex) {\n\t\t\t\tret.push(str.substring(lastIndex, match.index));\n\t\t\t}\n\n\t\t\tlastIndex = this.regex.lastIndex;\n\n\t\t\tret.push(new Mavo.Expression(match[1]));\n\t\t}\n\n\t\t// Literal at the end\n\t\tif (lastIndex < str.length) {\n\t\t\tret.push(str.substring(lastIndex));\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tstatic: {\n\t\tcreate: function(element) {\n\t\t\tif (element) {\n\t\t\t\tvar syntax = element.getAttribute(\"mv-expressions\");\n\n\t\t\t\tif (syntax) {\n\t\t\t\t\tsyntax = syntax.trim();\n\t\t\t\t\treturn /\\s/.test(syntax)? new _.Syntax(...syntax.split(/\\s+/)) : _.Syntax.ESCAPE;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tESCAPE: -1\n\t}\n});\n\n_.Syntax.default = new _.Syntax(\"[\", \"]\");\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nvar _ = Mavo.DOMExpression = $.Class({\n\tconstructor: function(o = {}) {\n\t\tthis.mavo = o.mavo;\n\t\tthis.template = o.template && o.template.template || o.template;\n\n\t\tfor (let prop of [\"item\", \"path\", \"syntax\", \"fallback\", \"attribute\", \"originalAttribute\", \"expression\", \"parsed\"]) {\n\t\t\tthis[prop] = o[prop] === undefined && this.template? this.template[prop] : o[prop];\n\t\t}\n\n\t\tthis.node = o.node;\n\n\t\tif (!this.node) {\n\t\t\t// No node provided, figure it out from path\n\t\t\tthis.node = Mavo.elementPath(this.item.element, this.path);\n\t\t}\n\n\t\tthis.element = this.node;\n\t\tthis.attribute = this.attribute || null;\n\n\t\tMavo.hooks.run(\"domexpression-init-start\", this);\n\n\t\tif (this.attribute == \"mv-value\") {\n\t\t\tthis.originalAttribute = \"mv-value\";\n\t\t\tthis.attribute = Mavo.Primitive.getValueAttribute(this.element);\n\t\t\tthis.fallback = this.fallback || Mavo.Primitive.getValue(this.element, {attribute: this.attribute});\n\t\t\tvar expression = this.element.getAttribute(\"mv-value\");\n\t\t\tthis.element.removeAttribute(\"mv-value\");\n\t\t\tthis.parsed = [new Mavo.Expression(expression)];\n\t\t\tthis.expression = this.syntax.start + expression + this.syntax.end;\n\t\t}\n\n\t\tif (this.node.nodeType === 3 && this.element === this.node) {\n\t\t\tthis.element = this.node.parentNode;\n\n\t\t\t// If no element siblings make this.node the element, which is more robust\n\t\t\t// Same if attribute, there are no attributes on a text node!\n\t\t\tif (!this.node.parentNode.children.length || this.attribute) {\n\t\t\t\tthis.node = this.element;\n\t\t\t\tthis.element.normalize();\n\t\t\t}\n\t\t}\n\n\t\tif (!this.expression) { // Still unhandled?\n\t\t\tif (this.attribute) {\n\t\t\t\t// Some web components (e.g. AFrame) hijack getAttribute()\n\t\t\t\tvar value = Element.prototype.getAttribute.call(this.node, this.attribute);\n\n\t\t\t\tthis.expression = (value || \"\").trim();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Move whitespace outside to prevent it from messing with types\n\t\t\t\tthis.node.normalize();\n\n\t\t\t\tif (this.node.firstChild && this.node.childNodes.length === 1 && this.node.firstChild.nodeType === 3) {\n\t\t\t\t\tvar whitespace = this.node.firstChild.textContent.match(/^\\s*|\\s*$/g);\n\n\t\t\t\t\tif (whitespace[1]) {\n\t\t\t\t\t\tthis.node.firstChild.splitText(this.node.firstChild.textContent.length - whitespace[1].length);\n\t\t\t\t\t\t$.after(this.node.lastChild, this.node);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (whitespace[0]) {\n\t\t\t\t\t\tthis.node.firstChild.splitText(whitespace[0].length);\n\t\t\t\t\t\tthis.node.parentNode.insertBefore(this.node.firstChild, this.node);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.expression = this.node.textContent;\n\t\t\t}\n\n\t\t\tthis.parsed = o.template? o.template.parsed : this.syntax.tokenize(this.expression);\n\t\t}\n\n\t\tthis.oldValue = this.value = this.parsed.map(x => x instanceof Mavo.Expression? x.expression : x);\n\n\t\tthis.item = Mavo.Node.get(this.element.closest(Mavo.selectors.item));\n\n\t\tthis.mavo.treeBuilt.then(() => {\n\t\t\tif (!this.template && !this.item) {\n\t\t\t\t// Only collection items and groups can have their own expressions arrays\n\t\t\t\tthis.item = Mavo.Node.getClosest(this.element);\n\n\t\t\t\tif (this.item.nodeType === \"Primitive\" && !this.item.collection) {\n\t\t\t\t\tthis.item = this.item.parent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.originalAttribute == \"mv-value\" && this.mavoNode && this.mavoNode == this.item.collection) {\n\t\t\t\tMavo.delete(this.item.expressions, this);\n\t\t\t}\n\n\t\t\tMavo.hooks.run(\"domexpression-init-treebuilt\", this);\n\t\t});\n\n\t\tMavo.hooks.run(\"domexpression-init-end\", this);\n\n\t\t_.elements.set(this.element, [...(_.elements.get(this.element) || []), this]);\n\t},\n\n\tdestroy: function() {\n\t\t_.special.delete(this);\n\t},\n\n\tchangedBy: function(evt) {\n\t\tif (this.originalAttribute == \"mv-value\" && this.mavoNode && !(this.mavoNode instanceof Mavo.Primitive)) {\n\t\t\t// Just prevent the same node from triggering changes, everything else is game\n\t\t\treturn !evt || !this.mavoNode.contains(evt.node);\n\t\t}\n\n\t\tif (!this.identifiers) {\n\t\t\tthis.identifiers = Mavo.flatten(this.parsed.map(x => x.identifiers || []));\n\n\t\t\t// Any identifiers that need additional updating?\n\t\t\t_.special.add(this);\n\t\t}\n\n\t\treturn Mavo.Expression.changedBy(this.identifiers, evt);\n\t},\n\n\tupdate: function(data = this.data, event) {\n\t\tvar env = {context: this, event};\n\t\tvar parentEnv = env;\n\n\t\tthis.data = data;\n\n\t\tMavo.hooks.run(\"domexpression-update-start\", env);\n\n\t\tthis.oldValue = this.value;\n\t\tvar changed = false;\n\n\t\tenv.value = this.value = this.parsed.map((expr, i) => {\n\t\t\tif (expr instanceof Mavo.Expression) {\n\t\t\t\tif (expr.changedBy(parentEnv.event)) {\n\t\t\t\t\tvar env = {context: this, expr, parentEnv};\n\n\t\t\t\t\tMavo.hooks.run(\"domexpression-update-beforeeval\", env);\n\n\t\t\t\t\tenv.value = Mavo.value(env.expr.eval(data));\n\n\t\t\t\t\tMavo.hooks.run(\"domexpression-update-aftereval\", env);\n\n\t\t\t\t\tchanged = true;\n\n\t\t\t\t\tif (env.value instanceof Error) {\n\t\t\t\t\t\treturn this.fallback !== undefined? this.fallback : this.syntax.start + env.expr.expression + this.syntax.end;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (env.value === undefined || env.value === null) {\n\t\t\t\t\t\t// Dont print things like \"undefined\" or \"null\"\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\treturn env.value;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn this.oldValue[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn expr;\n\t\t});\n\n\t\tif (!changed) {\n\t\t\t// If nothing changed, no need to do anything\n\t\t\treturn;\n\t\t}\n\n\t\tif (env.value.length === 1) {\n\t\t\tenv.value = env.value[0];\n\t\t}\n\t\telse {\n\t\t\tenv.value = env.value.map(v => Mavo.Primitive.format(v, {\n\t\t\t\tattribute: this.attribute,\n\t\t\t\telement: this.element\n\t\t\t})).join(\"\");\n\t\t}\n\n\t\tthis.output(env.value);\n\n\t\tMavo.hooks.run(\"domexpression-update-end\", env);\n\t},\n\n\toutput: function(value) {\n\t\tif (this.primitive) {\n\t\t\tthis.primitive.value = value;\n\t\t}\n\t\telse if (this.mavoNode) {\n\t\t\tthis.mavoNode.render(value);\n\t\t}\n\t\telse {\n\t\t\tMavo.Primitive.setValue(this.node, value, {attribute: this.attribute});\n\t\t}\n\t},\n\n\tlive: {\n\t\titem: function(item) {\n\t\t\tif (item && this._item != item) {\n\t\t\t\tif (this._item) {\n\t\t\t\t\t// Previous item, delete from its expressions\n\t\t\t\t\tMavo.delete(this._item.expressions, this);\n\t\t\t\t}\n\n\t\t\t\titem.expressions = item.expressions || [];\n\t\t\t\titem.expressions.push(this);\n\t\t\t}\n\t\t}\n\t},\n\n\tstatic: {\n\t\telements: new WeakMap(),\n\n\t\t/**\n\t\t * Search for Mavo.DOMExpression object(s) associated with a given element\n\t\t * and optionally an attribute.\n\t\t *\n\t\t * @return If one argument, array of matching DOMExpression objects.\n\t\t *         If two arguments, the matching DOMExpression object or null\n\t\t */\n\t\tsearch: function (element, attribute) {\n\t\t\tif (element === null) {\n\t\t\t\treturn element;\n\t\t\t}\n\n\t\t\tvar all = _.elements.get(element) || [];\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tif (!all.length) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn all.filter(et => et.attribute === attribute)[0] || null;\n\t\t\t}\n\n\t\t\treturn all;\n\t\t},\n\n\t\tspecial: {\n\t\t\tadd: function(domexpression, name) {\n\t\t\t\tif (name) {\n\t\t\t\t\tvar o = this.vars[name];\n\n\t\t\t\t\tif (o && domexpression.identifiers.indexOf(name) > -1) {\n\t\t\t\t\t\to.all = o.all || new Set();\n\t\t\t\t\t\to.all.add(domexpression);\n\n\t\t\t\t\t\tif (o.all.size === 1) {\n\t\t\t\t\t\t\to.observe();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (!o.all.size) {\n\t\t\t\t\t\t\to.unobserve();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// All names\n\t\t\t\t\tfor (var name in this.vars) {\n\t\t\t\t\t\tthis.add(domexpression, name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdelete: function(domexpression, name) {\n\t\t\t\tif (name) {\n\t\t\t\t\tvar o = this.vars[name];\n\n\t\t\t\t\to.all = o.all || new Set();\n\t\t\t\t\to.all.delete(domexpression);\n\n\t\t\t\t\tif (!o.all.size) {\n\t\t\t\t\t\to.unobserve();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// All names\n\t\t\t\t\tfor (var name in this.vars) {\n\t\t\t\t\t\tthis.delete(domexpression, name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tupdate: function() {\n\t\t\t\tif (this.update) {\n\t\t\t\t\tthis.update(...arguments);\n\t\t\t\t}\n\n\t\t\t\tthis.all.forEach(domexpression => domexpression.update());\n\t\t\t},\n\n\t\t\tevent: function(name, {type, update, target = document} = {}) {\n\t\t\t\tthis.vars[name] = {\n\t\t\t\t\tobserve: function() {\n\t\t\t\t\t\tthis.callback = this.callback || _.special.update.bind(this);\n\t\t\t\t\t\ttarget.addEventListener(type, this.callback);\n\t\t\t\t\t},\n\t\t\t\t\tunobserve: function() {\n\t\t\t\t\t\ttarget.removeEventListener(type, this.callback);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tif (update) {\n\t\t\t\t\tthis.vars[name].update = function(evt) {\n\t\t\t\t\t\tMavo.Functions[name] = update(evt);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tvars: {\n\t\t\t\t\"$now\": {\n\t\t\t\t\tobserve: function() {\n\t\t\t\t\t\tvar callback = () => {\n\t\t\t\t\t\t\t_.special.update.call(this);\n\t\t\t\t\t\t\tthis.timer = requestAnimationFrame(callback);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.timer = requestAnimationFrame(callback);\n\t\t\t\t\t},\n\t\t\t\t\tunobserve: function() {\n\t\t\t\t\t\tcancelAnimationFrame(this.timer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n_.special.event(\"$mouse\", {\n\ttype: \"mousemove\",\n\tupdate: function(evt) {\n\t\treturn {x: evt.clientX, y: evt.clientY};\n\t}\n});\n\n_.special.event(\"$hash\", {\n\ttype: \"hashchange\",\n\ttarget: window\n});\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nvar _ = Mavo.Expressions = $.Class({\n\tconstructor: function(mavo) {\n\t\tthis.mavo = mavo;\n\t\tthis.active = true;\n\n\t\tthis.expressions = [];\n\n\t\tvar syntax = Mavo.Expression.Syntax.create(this.mavo.element.closest(\"[mv-expressions]\")) || Mavo.Expression.Syntax.default;\n\t\tthis.traverse(this.mavo.element, undefined, syntax);\n\n\t\tthis.scheduled = {};\n\n\t\tthis.mavo.treeBuilt.then(() => {\n\t\t\tthis.expressions = [];\n\n\t\t\t// Watch changes and update value\n\t\t\tdocument.documentElement.addEventListener(\"mv-change\", evt => {\n\t\t\t\tif (!this.active) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar scheduled = this.scheduled[evt.action] = this.scheduled[evt.action] || new Set();\n\n\t\t\t\tif (evt.node.template) {\n\t\t\t\t\t// Throttle events in collections and events from other Mavos\n\t\t\t\t\tif (!scheduled.has(evt.node.template)) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tscheduled.delete(evt.node.template);\n\t\t\t\t\t\t\tthis.update(evt);\n\t\t\t\t\t\t}, _.THROTTLE);\n\n\t\t\t\t\t\tscheduled.add(evt.node.template);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\trequestAnimationFrame(() => this.update(evt));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.update();\n\t\t});\n\t},\n\n\tupdate: function(evt) {\n\t\tif (!this.active) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar root, rootObject;\n\n\t\tif (evt instanceof Mavo.Node) {\n\t\t\trootObject = evt;\n\t\t\tevt = null;\n\t\t}\n\t\telse if (evt instanceof Element) {\n\t\t\troot = evt.closest(Mavo.selectors.item);\n\t\t\trootObject = Mavo.Node.get(root);\n\t\t\tevt = null;\n\t\t}\n\t\telse {\n\t\t\trootObject = this.mavo.root;\n\t\t}\n\n\t\tvar allData = rootObject.getData({live: true});\n\n\t\trootObject.walk((obj, path) => {\n\t\t\tif (obj.expressions && obj.expressions.length && !obj.isDeleted()) {\n\t\t\t\tvar data = $.value(allData, ...path);\n\n\t\t\t\tobj.expressions.forEach(et => {\n\t\t\t\t\tif (et.changedBy(evt)) {\n\t\t\t\t\t\tet.update(data, evt);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\textract: function(node, attribute, path, syntax = Mavo.Expression.Syntax.default) {\n\t\tif (attribute && attribute.name == \"mv-expressions\") {\n\t\t\treturn;\n\t\t}\n\n\t\tif (attribute && _.directives.indexOf(attribute.name) > -1 ||\n\t\t    syntax !== Mavo.Expression.Syntax.ESCAPE && syntax.test(attribute? attribute.value : node.textContent)\n\t\t) {\n\t\t\tif (path === undefined) {\n\t\t\t\tpath = Mavo.elementPath(node.closest(Mavo.selectors.item), node);\n\t\t\t}\n\n\t\t\tthis.expressions.push(new Mavo.DOMExpression({\n\t\t\t\tnode, syntax, path,\n\t\t\t\tattribute: attribute && attribute.name,\n\t\t\t\tmavo: this.mavo\n\t\t\t}));\n\t\t}\n\t},\n\n\t// Traverse an element, including attribute nodes, text nodes and all descendants\n\ttraverse: function(node, path = [], syntax) {\n\t\tif (node.nodeType === 8) {\n\t\t\t// We don't want expressions to be picked up from comments!\n\t\t\t// Commenting stuff out is a common debugging technique\n\t\t\treturn;\n\t\t}\n\n\t\tif (node.nodeType === 3) { // Text node\n\t\t\t// Leaf node, extract references from content\n\t\t\tthis.extract(node, null, path, syntax);\n\t\t}\n\t\telse {\n\t\t\tnode.normalize();\n\n\t\t\tsyntax = Mavo.Expression.Syntax.create(node) || syntax;\n\n\t\t\tif (Mavo.is(\"item\", node)) {\n\t\t\t\tpath = [];\n\t\t\t}\n\n\t\t\t$$(node.attributes).forEach(attribute => this.extract(node, attribute, path, syntax));\n\n\t\t\tvar index = -1, offset = 0;\n\n\t\t\tif (!node.matches(\"script:not([mv-expressions])\")) {\n\t\t\t\t$$(node.childNodes).forEach(child => {\n\t\t\t\t\tif (child.nodeType == 1) {\n\t\t\t\t\t\toffset = 0;\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\toffset++;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (child.nodeType == 1 || child.nodeType == 3) {\n\t\t\t\t\t\tvar segment = offset > 0? `${index}.${offset}` : index;\n\t\t\t\t\t\tthis.traverse(child, [...path || [], segment], syntax);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\tstatic: {\n\t\tdirectives: [\n\t\t\t\"mv-value\"\n\t\t],\n\n\t\tTHROTTLE: 50,\n\n\t\tdirective: function(name, o) {\n\t\t\t_.directives.push(name);\n\t\t\tMavo.attributes.push(name);\n\t\t\tMavo.Plugins.register(name, o);\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n","// mv-if plugin\n(function($, $$) {\n\nMavo.Expressions.directive(\"mv-if\", {\n\textend: {\n\t\t\"Primitive\": {\n\t\t\tlive: {\n\t\t\t\t\"hidden\": function(value) {\n\t\t\t\t\tif (this._hidden !== value) {\n\t\t\t\t\t\tthis._hidden = value;\n\t\t\t\t\t\tthis.dataChanged();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"DOMExpression\": {\n\t\t\tlazy: {\n\t\t\t\t\"childProperties\": function() {\n\t\t\t\t\tvar properties = $$(Mavo.selectors.property, this.element)\n\t\t\t\t\t\t\t\t\t.filter(el => el.closest(\"[mv-if]\") == this.element)\n\t\t\t\t\t\t\t\t\t.map(el => Mavo.Node.get(el));\n\n\t\t\t\t\t// When the element is detached, datachange events from properties\n\t\t\t\t\t// do not propagate up to the group so expressions do not recalculate.\n\t\t\t\t\t// We must do this manually.\n\t\t\t\t\tthis.element.addEventListener(\"mv-change\", evt => {\n\t\t\t\t\t\t// Cannot redispatch synchronously [why??]\n\t\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\t\tif (!this.element.parentNode) { // out of the DOM?\n\t\t\t\t\t\t\tthis.item.element.dispatchEvent(evt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\treturn properties;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\thooks: {\n\t\t\"domexpression-init-start\": function() {\n\t\t\tif (this.attribute != \"mv-if\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.expression = this.element.getAttribute(\"mv-if\");\n\t\t\tthis.parsed = [new Mavo.Expression(this.expression)];\n\t\t\tthis.expression = this.syntax.start + this.expression + this.syntax.end;\n\n\t\t\tthis.parentIf = this.element.parentNode && Mavo.DOMExpression.search(this.element.parentNode.closest(\"[mv-if]\"), \"mv-if\");\n\n\t\t\tif (this.parentIf) {\n\t\t\t\tthis.parentIf.childIfs = (this.parentIf.childIfs || new Set()).add(this);\n\t\t\t}\n\t\t},\n\t\t\"domexpression-update-end\": function() {\n\t\t\tif (this.attribute != \"mv-if\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar value = this.value[0];\n\t\t\tvar oldValue = this.oldValue[0];\n\n\t\t\t// Only apply this after the tree is built, otherwise any properties inside the if will go missing!\n\t\t\tthis.item.mavo.treeBuilt.then(() => {\n\t\t\t\tif (this.parentIf) {\n\t\t\t\t\tvar parentValue = this.parentIf.value[0];\n\t\t\t\t\tthis.value[0] = value = value && parentValue;\n\t\t\t\t}\n\n\t\t\t\tif (parentValue !== false) { // If parent if was false, it wouldn't matter whether this is in the DOM or not\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\t// Is removed from the DOM and needs to get back\n\t\t\t\t\t\tMavo.revocably.add(this.element);\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.element.parentNode) {\n\t\t\t\t\t\t// Is in the DOM and needs to be removed\n\t\t\t\t\t\tMavo.revocably.remove(this.element, \"mv-if\");\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (value !== oldValue) {\n\t\t\t\t\t// Mark any properties inside as hidden or not\n\t\t\t\t\tif (this.childProperties) {\n\t\t\t\t\t\tthis.childProperties.forEach(property => property.hidden = !value);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.childIfs) {\n\t\t\t\t\t\tthis.childIfs.forEach(childIf => childIf.update());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\"unit-isdatanull\": function(env) {\n\t\t\tenv.result = env.result || (this.hidden && env.options.live);\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n","/**\n * Functions available inside Mavo expressions\n */\n\n(function($, val) {\n\nvar _ = Mavo.Functions = {\n\toperators: {\n\t\t\"=\": \"eq\"\n\t},\n\n\t/**\n\t * Get a property of an object. Used by the . operator to prevent TypeErrors\n\t */\n\tget: function(obj, property, meta = {}) {\n\t\tproperty = meta.property = val(property);\n\t\tvar canonicalProperty = Mavo.getCanonicalProperty(obj, property);\n\n\t\tif (canonicalProperty !== undefined) {\n\t\t\tmeta.property = canonicalProperty;\n\t\t\tvar ret = obj[canonicalProperty];\n\n\t\t\tif (typeof ret === \"function\" && ret.name.indexOf(\"bound\") !== 0) {\n\t\t\t\treturn ret.bind(obj);\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\n\t\tif (Array.isArray(obj) && property && isNaN(property)) {\n\t\t\t// Array and non-numerical property\n\t\t\tvar eqIndex = property.indexOf(\"=\");\n\n\t\t\tif (eqIndex > -1) {\n\t\t\t\t// Property query\n\t\t\t\tmeta.query = {\n\t\t\t\t\tproperty: property.slice(0, eqIndex),\n\t\t\t\t\tvalue: property.slice(eqIndex + 1)\n\t\t\t\t};\n\n\t\t\t\tmeta.property = [];\n\n\t\t\t\tret = obj.filter((e, i) => {\n\t\t\t\t\tvar passes = _.get(e, meta.query.property) == meta.query.value;\n\n\t\t\t\t\tif (passes) {\n\t\t\t\t\t\tmeta.property.push(i);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn passes;\n\t\t\t\t});\n\n\t\t\t\tif (meta.query.property == \"id\") {\n\t\t\t\t\tmeta.property = meta.property[0];\n\t\t\t\t\tret = ret[0];\n\t\t\t\t}\n\n\t\t\t\tif (ret === undefined) {\n\t\t\t\t\tmeta.property = obj.length;\n\t\t\t\t}\n\t\t\t\telse if (ret.length === 0) {\n\t\t\t\t\tmeta.property = [obj.length];\n\t\t\t\t}\n\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Not a property query, get from objects inside\n\t\t\t\t// TODO meta.property = ??\n\t\t\t\treturn obj.map(e => _.get(e, property));\n\t\t\t}\n\t\t}\n\n\t\t// Not found :(\n\t\treturn null;\n\t},\n\n\turl: (id, url = location) => {\n\t\tif (id === undefined) {\n\t\t\treturn location.href;\n\t\t}\n\n\t\tif (id) {\n\t\t\tid = str(id).replace(/[^\\w-:]/g);\n\n\t\t\tvar ret = url.search.match(RegExp(`[?&]${id}(?:=(.+?))?(?=$|&)`))\n\t\t\t       || url.pathname.match(RegExp(`(?:^|\\\\/)${id}\\\\/([^\\\\/]*)`));\n\t\t}\n\n\t\treturn ret === null || !id? null : decodeURIComponent(ret[1]) || \"\";\n\t},\n\n\t// TODO return first/last non-null?\n\tfirst: arr => arr && arr[0] || \"\",\n\tlast: arr => arr && arr[arr.length - 1] || \"\",\n\n\tunique: function(arr) {\n\t\tif (!Array.isArray(arr)) {\n\t\t\treturn arr;\n\t\t}\n\n\t\treturn [...new Set(arr.map(val))];\n\t},\n\n\t/**\n\t * Do two arrays or sets have a non-empty intersection?\n\t * @return {Boolean}\n\t */\n\tintersects: function(arr1, arr2) {\n\t\tif (arr1 && arr2) {\n\t\t\tvar set2 = new Set(arr2.map? arr2.map(val): arr2);\n\t\t\tarr1 = arr1.map? arr1.map(val) : [...arr1];\n\n\t\t\treturn !arr1.every(el => !set2.has(el));\n\t\t}\n\t},\n\n\t/*********************\n\t * Number functions\n\t *********************/\n\n\t/**\n\t * Aggregate sum\n\t */\n\tsum: function(array) {\n\t\treturn $u.numbers(array, arguments).reduce((prev, current) => {\n\t\t\treturn +prev + (+current || 0);\n\t\t}, 0);\n\t},\n\n\t/**\n\t * Average of an array of numbers\n\t */\n\taverage: function(array) {\n\t\tarray = $u.numbers(array, arguments);\n\n\t\treturn array.length && _.sum(array) / array.length;\n\t},\n\n\t/**\n\t * Min of an array of numbers\n\t */\n\tmin: function(array) {\n\t\treturn Math.min(...$u.numbers(array, arguments));\n\t},\n\n\t/**\n\t * Max of an array of numbers\n\t */\n\tmax: function(array) {\n\t\treturn Math.max(...$u.numbers(array, arguments));\n\t},\n\n\tcount: function(array) {\n\t\treturn Mavo.toArray(array).filter(a => !empty(a)).length;\n\t},\n\n\treverse: function(array) {\n\t\treturn Mavo.toArray(array).slice().reverse();\n\t},\n\n\tround: function(num, decimals) {\n\t\tif (not(num) || not(decimals) || !isFinite(num)) {\n\t\t\treturn Math.round(num);\n\t\t}\n\n\t\treturn +num.toLocaleString(\"en-US\", {\n\t\t\tuseGrouping: false,\n\t\t\tmaximumFractionDigits: decimals\n\t\t});\n\t},\n\n\tordinal: function(num) {\n\t\tif (empty(num)) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (ord < 10 || ord > 20) {\n\t\t\tvar ord = [\"th\", \"st\", \"nd\", \"th\"][num % 10];\n\t\t}\n\n\t\treturn ord || \"th\";\n\t},\n\n\tiff: function(condition, iftrue=condition, iffalse=\"\") {\n\t\tif (Array.isArray(condition)) {\n\t\t\treturn condition.map((c, i) => {\n\t\t\t\tvar ret = val(c)? iftrue : iffalse;\n\n\t\t\t\treturn Array.isArray(ret)? ret[Math.min(i, ret.length - 1)] : ret;\n\t\t\t});\n\t\t}\n\n\t\treturn val(condition)? iftrue : iffalse;\n\t},\n\n\t/*********************\n\t * String functions\n\t *********************/\n\n\t/**\n\t * Replace all occurences of a string with another string\n\t */\n\treplace: function(haystack, needle, replacement = \"\", iterations = 1) {\n\t\tif (Array.isArray(haystack)) {\n\t\t\treturn haystack.map(item => _.replace(item, needle, replacement));\n\t\t}\n\n\t\t// Simple string replacement\n\t\tvar needleRegex = RegExp(Mavo.escapeRegExp(needle), \"g\");\n\t\tvar ret = haystack, prev;\n\t\tvar counter = 0;\n\n\t\twhile (ret != prev && (counter++ < iterations)) {\n\t\t\tprev = ret;\n\t\t\tret = ret.replace(needleRegex, replacement);\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tlen: text => str(text).length,\n\n\t/**\n\t * Case insensitive search\n\t */\n\tsearch: (haystack, needle) => haystack && needle? str(haystack).toLowerCase().indexOf((needle + \"\").toLowerCase()) : -1,\n\n\tstarts: (haystack, needle) => _.search(str(haystack), str(needle)) === 0,\n\tends: function(haystack, needle) {\n\t\t[haystack, needle] = [str(haystack), str(needle)];\n\n\t\tvar i = _.search(haystack, needle);\n\t\treturn  i > -1 && i === haystack.length - needle.length;\n\t},\n\n\tjoin: function(array, glue) {\n\t\treturn Mavo.toArray(array).join(str(glue));\n\t},\n\n\tidify: function(readable) {\n\t\treturn str(readable)\n\t\t\t.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\") // Convert accented letters to ASCII\n\t\t\t.replace(/[^\\w\\s-]/g, \"\") // Remove remaining non-ASCII characters\n\t\t\t.trim().replace(/\\s+/g, \"-\") // Convert whitespace to hyphens\n\t\t\t.toLowerCase();\n\t},\n\n\t// Convert an identifier to readable text that can be used as a label\n\treadable: function (identifier) {\n\t\t// Is it camelCase?\n\t\treturn str(identifier)\n\t\t\t\t.replace(/([a-z])([A-Z])(?=[a-z])/g, ($0, $1, $2) => $1 + \" \" + $2.toLowerCase()) // camelCase?\n\t\t\t\t.replace(/([a-z0-9])[_\\/-](?=[a-z0-9])/g, \"$1 \") // Hyphen-separated / Underscore_separated?\n\t\t\t\t.replace(/^[a-z]/, $0 => $0.toUpperCase()); // Capitalize\n\t},\n\n\tuppercase: text => str(text).toUpperCase(),\n\tlowercase: text => str(text).toLowerCase(),\n\n\tfrom: (haystack, needle) => _.between(haystack, needle),\n\tfromlast: (haystack, needle) => _.between(haystack, needle, \"\", true),\n\tto: (haystack, needle) => _.between(haystack, \"\", needle),\n\ttofirst: (haystack, needle) => _.between(haystack, \"\", needle, true),\n\n\tbetween: (haystack, from, to, tight) => {\n\t\t[haystack, from, to] = [str(haystack), str(from), str(to)];\n\n\t\tvar i1 = from? haystack[tight? \"lastIndexOf\" : \"indexOf\"](from) : -1;\n\t\tvar i2 = haystack[tight? \"indexOf\" : \"lastIndexOf\"](to);\n\n\t\tif (from && i1 === -1 || i2 === -1) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\treturn haystack.slice(i1 + 1, i2 === -1 || !to? haystack.length : i2);\n\t},\n\n\tfilename: url => Mavo.match(new URL(str(url), Mavo.base).pathname, /[^/]+?$/),\n\n\tjson: data => Mavo.safeToJSON(data),\n\n\t/*********************\n\t * Date functions\n\t *********************/\n\n\tget $now() {\n\t\treturn new Date();\n\t},\n\n\t$startup: new Date(), // Like $now, but doesn't update\n\n\tget $today() {\n\t\treturn _.date(new Date());\n\t},\n\n\tyear: getDateComponent(\"year\"),\n\tmonth: getDateComponent(\"month\"),\n\tday: getDateComponent(\"day\"),\n\tweekday: getDateComponent(\"weekday\"),\n\thour: getDateComponent(\"hour\"),\n\tminute: getDateComponent(\"minute\"),\n\tsecond: getDateComponent(\"second\"),\n\tms: getDateComponent(\"ms\"),\n\n\tdate: date => {\n\t\tdate = $u.date(date);\n\n\t\treturn date? `${_.year(date)}-${_.month(date).twodigit}-${_.day(date).twodigit}` : \"\";\n\t},\n\ttime: date => {\n\t\tdate = $u.date(date);\n\n\t\treturn date? `${_.hour(date).twodigit}:${_.minute(date).twodigit}:${_.second(date).twodigit}` : \"\";\n\t},\n\n\tminutes: seconds => Math.floor(Math.abs(seconds) / 60) || 0,\n\thours: seconds => Math.floor(Math.abs(seconds) / 3600) || 0,\n\tdays: seconds => Math.floor(Math.abs(seconds) / 86400) || 0,\n\tweeks: seconds => Math.floor(Math.abs(seconds) / 604800) || 0,\n\tmonths: seconds => Math.floor(Math.abs(seconds) / (30.4368 * 86400)) || 0,\n\tyears: seconds => Math.floor(Math.abs(seconds) / (30.4368 * 86400 * 12)) || 0,\n\n\tlocalTimezone: -(new Date()).getTimezoneOffset(),\n\n\t// Log to the console and return\n\tlog: (...args) => {\n\t\tconsole.log(...args.map(val));\n\t\treturn args[0];\n\t},\n\n\t// Other special variables (some updated via events)\n\t$mouse: {x: 0, y: 0},\n\n\tget $hash() {\n\t\treturn location.hash.slice(1);\n\t},\n\n\t// \"Private\" helpers\n\tutil: {\n\t\tnumbers: function(array, args) {\n\t\t\tarray = Array.isArray(array)? array : (args? $$(args) : [array]);\n\n\t\t\treturn array.filter(number => !isNaN(number) && val(number) !== \"\" && val(number) !== null).map(n => +n);\n\t\t},\n\n\t\tfixDateString: function(date) {\n\t\t\tdate = date.trim();\n\n\t\t\tvar hasDate = /^\\d{4}-\\d{2}(-\\d{2})?/.test(date);\n\t\t\tvar hasTime = date.indexOf(\":\") > -1;\n\n\t\t\tif (!hasDate && !hasTime) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Fix up time format\n\t\t\tif (!hasDate) {\n\t\t\t\t// No date, add todays\n\t\t\t\tdate = _.$today + \" \" + date;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Only year-month, add day\n\t\t\t\tdate = date.replace(/^(\\d{4}-\\d{2})(?!-\\d{2})/, \"$1-01\");\n\t\t\t}\n\n\t\t\tif (!hasTime) {\n\t\t\t\t// Add a time if one doesn't exist\n\t\t\t\tdate += \"T00:00:00\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Make sure time starts with T, due to Safari bug\n\t\t\t\tdate = date.replace(/\\-(\\d{2})\\s+(?=\\d{2}:)/, \"-$1T\");\n\t\t\t}\n\n\t\t\t// Remove all whitespace\n\t\t\tdate = date.replace(/\\s+/g, \"\");\n\n\t\t\treturn date;\n\t\t},\n\n\t\tdate: function(date) {\n\t\t\tdate = val(date);\n\n\t\t\tif (!date) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ($.type(date) === \"string\") {\n\t\t\t\tdate = $u.fixDateString(date);\n\n\t\t\t\tif (date === null) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tvar timezone = Mavo.match(date, /[+-]\\d{2}:?\\d{2}|Z$/);\n\n\t\t\t\tif (timezone) {\n\t\t\t\t\t// parse as ISO format\n\t\t\t\t\tdate = new Date(date);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// construct date in local timezone\n\t\t\t\t\tvar fields = date.match(/\\d+/g);\n\t\t\t\t\tdate = new Date(\n\t\t\t\t\t\t// year, month, date,\n\t\t\t\t\t\tfields[0], (fields[1] || 1) - 1, fields[2] || 1,\n\t\t\t\t\t\t// hours, minutes, seconds, milliseconds,\n\t\t\t\t\t\tfields[3] || 0, fields[4] || 0, fields[5] || 0, fields[6] || 0\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdate = new Date(date);\n\t\t\t}\n\n\t\t\tif (isNaN(date)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn date;\n\t\t}\n\t}\n};\n\nvar $u = _.util;\n\n// Make function names case insensitive\n_._Trap = self.Proxy? new Proxy(_, {\n\tget: (functions, property) => {\n\t\tvar ret;\n\n\t\tvar canonicalProperty = Mavo.getCanonicalProperty(functions, property)\n\t\t                     || Mavo.getCanonicalProperty(Math, property);\n\n\t\tif (canonicalProperty) {\n\t\t\tret = functions[canonicalProperty];\n\n\t\t\tif (ret === undefined) {\n\t\t\t\tret = Math[canonicalProperty];\n\t\t\t}\n\t\t}\n\n\t\tif (ret !== undefined) {\n\t\t\tif (typeof ret === \"function\") {\n\t\t\t\t// For when function names are used as unquoted strings, see #160\n\t\t\t\tret.toString = () => property;\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\n\t\t// Still not found? Maybe it's a global\n\t\tif (property in self) {\n\t\t\treturn self[property];\n\t\t}\n\n\t\t// Prevent undefined at all costs\n\t\treturn property;\n\t},\n\n\t// Super ugly hack, but otherwise data is not\n\t// the local variable it should be, but the string \"data\"\n\t// so all property lookups fail.\n\thas: (functions, property) => property != \"data\"\n}) : _;\n\n/**\n * Private helper methods\n */\n\n// Convert argument to string\nfunction str(str = \"\") {\n\tstr = val(str);\n\treturn !str && str !== 0? \"\" : str + \"\";\n}\n\nfunction empty(v) {\n\tv = Mavo.value(v);\n\treturn v === null || v === false || v === \"\";\n}\n\nfunction not(v) {\n\treturn !val(v);\n}\n\nfunction toLocaleString(date, options) {\n\tvar ret = date.toLocaleString(Mavo.locale, options);\n\n\tret = ret.replace(/\\u200e/g, \"\"); // Stupid Edge bug\n\n\treturn ret;\n}\n\nvar numeric = {\n\tyear: d => d.getFullYear(),\n\tmonth: d => d.getMonth() + 1,\n\tday: d => d.getDate(),\n\tweekday: d => d.getDay() || 7,\n\thour: d => d.getHours(),\n\tminute: d => d.getMinutes(),\n\tsecond: d => d.getSeconds(),\n\tms: d => d.getMilliseconds()\n};\n\nfunction getDateComponent(component) {\n\treturn function(date) {\n\t\tdate = $u.date(date);\n\n\t\tif (!date) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tvar ret = numeric[component](date);\n\n\t\t// We don't want years to be formatted like 2,017!\n\t\tret = new self[component == \"year\"? \"String\" : \"Number\"](ret);\n\n\t\tif (component == \"month\" || component == \"weekday\") {\n\t\t\tret.name = toLocaleString(date, {[component]: \"long\"});\n\t\t\tret.shortname = toLocaleString(date, {[component]: \"short\"});\n\t\t}\n\n\t\tif (component != \"weekday\") {\n\t\t\tret.twodigit = (ret % 100 < 10? \"0\" : \"\") + ret % 100;\n\t\t}\n\n\t\treturn ret;\n\t};\n}\n\n})(Bliss, Mavo.value);\n","(function($, val, $u) {\n\nvar _ = Mavo.Script = {\n\taddUnaryOperator: function(name, o) {\n\t\tif (o.symbol) {\n\t\t\t// Build map of symbols to function names for easy rewriting\n\t\t\tMavo.toArray(o.symbol).forEach(symbol => {\n\t\t\t\tMavo.Script.unarySymbols[symbol] = name;\n\t\t\t\tjsep.addUnaryOp(symbol);\n\t\t\t});\n\t\t}\n\n\t\treturn Mavo.Functions[name] = operand => Array.isArray(operand)? operand.map(val).map(o.scalar) : o.scalar(val(operand));\n\t},\n\n\t/**\n\t * Extend a scalar operator to arrays, or arrays and scalars\n\t * The operation between arrays is applied element-wise.\n\t * The operation operation between a scalar and an array will result in\n\t * the operation being applied between the scalar and every array element.\n\t */\n\taddBinaryOperator: function(name, o) {\n\t\tif (o.symbol) {\n\t\t\t// Build map of symbols to function names for easy rewriting\n\t\t\tMavo.toArray(o.symbol).forEach(symbol => {\n\t\t\t\tMavo.Script.symbols[symbol] = name;\n\n\t\t\t\tif (o.precedence) {\n\t\t\t\t\tjsep.addBinaryOp(symbol, o.precedence);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\to.identity = o.identity === undefined? 0 : o.identity;\n\n\t\treturn Mavo.Functions[name] = o.code || function(...operands) {\n\t\t\tif (operands.length === 1) {\n\t\t\t\tif (Array.isArray(operands[0])) {\n\t\t\t\t\t// Operand is an array of operands, expand it out\n\t\t\t\t\toperands = [...operands[0]];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!o.raw) {\n\t\t\t\toperands = operands.map(val);\n\t\t\t}\n\n\t\t\tvar prev = o.logical? o.identity : operands[0], result;\n\n\t\t\tfor (let i = 1; i < operands.length; i++) {\n\t\t\t\tlet a = o.logical? operands[i - 1] : prev;\n\t\t\t\tlet b = operands[i];\n\n\t\t\t\tif (Array.isArray(b)) {\n\t\t\t\t\tif (typeof o.identity == \"number\") {\n\t\t\t\t\t\tb = $u.numbers(b);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Array.isArray(a)) {\n\t\t\t\t\t\tresult = [\n\t\t\t\t\t\t\t...b.map((n, i) => o.scalar(a[i] === undefined? o.identity : a[i], n)),\n\t\t\t\t\t\t\t...a.slice(b.length)\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tresult = b.map(n => o.scalar(a, n));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (Array.isArray(a)) {\n\t\t\t\t\tresult = a.map(n => o.scalar(n, b));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresult = o.scalar(a, b);\n\t\t\t\t}\n\n\t\t\t\tif (o.reduce) {\n\t\t\t\t\tprev = o.reduce(prev, result, a, b);\n\t\t\t\t}\n\t\t\t\telse if (o.logical) {\n\t\t\t\t\tprev = prev && result;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tprev = result;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn prev;\n\t\t};\n\t},\n\n\t/**\n\t * Mapping of operator symbols to function name.\n\t * Populated via addOperator() and addLogicalOperator()\n\t */\n\tsymbols: {},\n\tunarySymbols: {},\n\n\tgetOperatorName: (op, unary) => Mavo.Script[unary? \"unarySymbols\" : \"symbols\"][op] || op,\n\n\t/**\n\t * Operations for elements and scalars.\n\t * Operations between arrays happen element-wise.\n\t * Operations between a scalar and an array will result in the operation being performed between the scalar and every array element.\n\t * Ordered by precedence (higher to lower)\n\t * @param scalar {Function} The operation between two scalars\n\t * @param identity The operations identity element. Defaults to 0.\n\t */\n\toperators: {\n\t\t\"not\": {\n\t\t\tsymbol: \"!\",\n\t\t\tscalar: a => !a\n\t\t},\n\t\t\"multiply\": {\n\t\t\tscalar: (a, b) => a * b,\n\t\t\tidentity: 1,\n\t\t\tsymbol: \"*\"\n\t\t},\n\t\t\"divide\": {\n\t\t\tscalar: (a, b) => a / b,\n\t\t\tidentity: 1,\n\t\t\tsymbol: \"/\"\n\t\t},\n\t\t\"add\": {\n\t\t\tscalar: (a, b) => +a + +b,\n\t\t\tsymbol: \"+\"\n\t\t},\n\t\t\"plus\": {\n\t\t\tscalar: a => +a,\n\t\t\tsymbol: \"+\"\n\t\t},\n\t\t\"subtract\": {\n\t\t\tscalar: (a, b) => {\n\t\t\t\tif (isNaN(a) || isNaN(b)) {\n\t\t\t\t\t// Handle dates\n\t\t\t\t\tvar dateA = $u.date(a), dateB = $u.date(b);\n\n\t\t\t\t\tif (dateA && dateB) {\n\t\t\t\t\t\treturn (dateA - dateB)/1000;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn a - b;\n\t\t\t},\n\t\t\tsymbol: \"-\"\n\t\t},\n\t\t\"minus\": {\n\t\t\tscalar: a => -a,\n\t\t\tsymbol: \"-\"\n\t\t},\n\t\t\"mod\": {\n\t\t\tscalar: (a, b) => {\n\t\t\t\tvar ret = a % b;\n\t\t\t\tret += ret < 0? b : 0;\n\t\t\t\treturn ret;\n\t\t\t},\n\t\t\tsymbol: \"mod\",\n\t\t\tprecedence: 6\n\t\t},\n\t\t\"lte\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => {\n\t\t\t\t[a, b] = Mavo.Script.getNumericalOperands(a, b);\n\t\t\t\treturn a <= b;\n\t\t\t},\n\t\t\tidentity: true,\n\t\t\tsymbol: \"<=\"\n\t\t},\n\t\t\"lt\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => {\n\t\t\t\t[a, b] = Mavo.Script.getNumericalOperands(a, b);\n\t\t\t\treturn a < b;\n\t\t\t},\n\t\t\tidentity: true,\n\t\t\tsymbol: \"<\"\n\t\t},\n\t\t\"gte\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => {\n\t\t\t\t[a, b] = Mavo.Script.getNumericalOperands(a, b);\n\t\t\t\treturn a >= b;\n\t\t\t},\n\t\t\tidentity: true,\n\t\t\tsymbol: \">=\"\n\t\t},\n\t\t\"gt\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => {\n\t\t\t\t[a, b] = Mavo.Script.getNumericalOperands(a, b);\n\t\t\t\treturn a > b;\n\t\t\t},\n\t\t\tidentity: true,\n\t\t\tsymbol: \">\"\n\t\t},\n\t\t\"eq\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => a == b,\n\t\t\tsymbol: [\"=\", \"==\"],\n\t\t\tidentity: true,\n\t\t\tprecedence: 6\n\t\t},\n\t\t\"neq\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => a != b,\n\t\t\tsymbol: [\"!=\"],\n\t\t\tidentity: true\n\t\t},\n\t\t\"and\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => !!a && !!b,\n\t\t\tidentity: true,\n\t\t\tsymbol: [\"&&\", \"and\"],\n\t\t\tprecedence: 2\n\t\t},\n\t\t\"or\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => a || b,\n\t\t\treduce: (p, r) => p || r,\n\t\t\tidentity: false,\n\t\t\tsymbol: [\"||\", \"or\"],\n\t\t\tprecedence: 2\n\t\t},\n\t\t\"concatenate\": {\n\t\t\tsymbol: \"&\",\n\t\t\tidentity: \"\",\n\t\t\tscalar: (a, b) => \"\" + (a || \"\") + (b || \"\"),\n\t\t\tprecedence: 10\n\t\t},\n\t\t// Filter is listed here because it's an easy way to handle multiple\n\t\t// array filters without having to code it\n\t\t\"filter\": {\n\t\t\tscalar: (a, b) => val(b)? a : null,\n\t\t\traw: true\n\t\t}\n\t},\n\n\tgetNumericalOperands: function(a, b) {\n\t\tif (isNaN(a) || isNaN(b)) {\n\t\t\t// Try comparing as dates\n\t\t\tvar da = $u.date(a), db = $u.date(b);\n\n\t\t\tif (da && db) {\n\t\t\t\t// Both valid dates\n\t\t\t\treturn [da, db];\n\t\t\t}\n\t\t}\n\n\t\treturn [a, b];\n\t},\n\n\t/**\n\t * These serializers transform the AST into JS\n\t */\n\tserializers: {\n\t\t\"BinaryExpression\": node => `${_.serialize(node.left)} ${node.operator} ${_.serialize(node.right)}`,\n\t\t\"UnaryExpression\": node => `${node.operator}${_.serialize(node.argument)}`,\n\t\t\"CallExpression\": node => `${_.serialize(node.callee)}(${node.arguments.map(_.serialize).join(\", \")})`,\n\t\t\"ConditionalExpression\": node => `${_.serialize(node.test)}? ${_.serialize(node.consequent)} : ${_.serialize(node.alternate)}`,\n\t\t\"MemberExpression\": node => {\n\t\t\tvar property = node.computed? _.serialize(node.property) : `\"${node.property.name}\"`;\n\t\t\treturn `get(${_.serialize(node.object)}, ${property})`;\n\t\t},\n\t\t\"ArrayExpression\": node => `[${node.elements.map(_.serialize).join(\", \")}]`,\n\t\t\"Literal\": node => node.raw,\n\t\t\"Identifier\": node => node.name,\n\t\t\"ThisExpression\": node => \"this\",\n\t\t\"Compound\": node => node.body.map(_.serialize).join(\" \")\n\t},\n\n\t/**\n\t * These are run before the serializers and transform the expression to support MavoScript\n\t */\n\ttransformations: {\n\t\t\"BinaryExpression\": node => {\n\t\t\tlet name = Mavo.Script.getOperatorName(node.operator);\n\n\t\t\t// Flatten same operator calls\n\t\t\tvar nodeLeft = node;\n\t\t\tvar args = [];\n\n\t\t\tdo {\n\t\t\t\targs.unshift(nodeLeft.right);\n\t\t\t\tnodeLeft = nodeLeft.left;\n\t\t\t} while (Mavo.Script.getOperatorName(nodeLeft.operator) === name);\n\n\t\t\targs.unshift(nodeLeft);\n\n\t\t\tif (args.length > 1) {\n\t\t\t\treturn `${name}(${args.map(_.serialize).join(\", \")})`;\n\t\t\t}\n\t\t},\n\t\t\"UnaryExpression\": node => {\n\t\t\tvar name = Mavo.Script.getOperatorName(node.operator, true);\n\n\t\t\tif (name) {\n\t\t\t\treturn `${name}(${_.serialize(node.argument)})`;\n\t\t\t}\n\t\t},\n\t\t\"CallExpression\": node => {\n\t\t\tif (node.callee.type == \"Identifier\") {\n\t\t\t\tif (node.callee.name == \"if\") {\n\t\t\t\t\tnode.callee.name = \"iff\";\n\t\t\t\t}\n\n\t\t\t\tnode.callee.name = \"Mavo.Functions._Trap.\" + node.callee.name;\n\t\t\t}\n\t\t}\n\t},\n\n\tserialize: node => {\n\t\tvar ret = _.transformations[node.type] && _.transformations[node.type](node);\n\n\t\tif (ret !== undefined) {\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn _.serializers[node.type](node);\n\t},\n\n\trewrite: function(code) {\n\t\ttry {\n\t\t\treturn _.serialize(_.parse(code));\n\t\t}\n\t\tcatch (e) {\n\t\t\t// Parsing as MavoScript failed, falling back to plain JS\n\t\t\treturn code;\n\t\t}\n\t},\n\n\tcompile: function(code) {\n\t\tcode = _.rewrite(code);\n\n\t\treturn new Function(\"data\", `with(Mavo.Functions._Trap)\n\t\t\t\twith (data || {}) {\n\t\t\t\t\treturn (${code});\n\t\t\t\t}`);\n\t},\n\n\tparse: self.jsep,\n};\n\n_.serializers.LogicalExpression = _.serializers.BinaryExpression;\n_.transformations.LogicalExpression = _.transformations.BinaryExpression;\n\nfor (let name in Mavo.Script.operators) {\n\tlet details = Mavo.Script.operators[name];\n\n\tif (details.scalar.length < 2) {\n\t\tMavo.Script.addUnaryOperator(name, details);\n\t}\n\telse {\n\t\tMavo.Script.addBinaryOperator(name, details);\n\t}\n}\n\nvar aliases = {\n\taverage: \"avg\",\n\tiff: \"iff IF\",\n\tmultiply: \"mult product\",\n\tdivide: \"div\",\n\tlt: \"smaller\",\n\tgt: \"larger bigger\",\n\teq: \"equal equality\",\n\tordinal: \"th\"\n};\n\nfor (let name in aliases) {\n\taliases[name].split(/\\s+/g).forEach(alias => Mavo.Functions[alias] = Mavo.Functions[name]);\n}\n\n})(Bliss, Mavo.value, Mavo.Functions.util);\n","(function($, $$) {\n\nvar _ = Mavo.Backend.register($.Class({\n\textends: Mavo.Backend,\n\tid: \"Dropbox\",\n\tconstructor: function() {\n\t\tthis.permissions.on([\"login\", \"read\"]);\n\n\t\tthis.key = this.mavo.element.getAttribute(\"mv-dropbox-key\") || \"2mx6061p054bpbp\";\n\n\t\tthis.login(true);\n\t},\n\n\tupdate: function(url, o) {\n\t\tthis.super.update.call(this, url, o);\n\n\t\tthis.url = _.fixShareURL(this.url);\n\t},\n\n\tupload: function(file, path) {\n\t\tpath = this.path.replace(/[^/]+$/, \"\") + path;\n\n\t\treturn this.put(file, path).then(fileInfo => this.getURL(path));\n\t},\n\n\tgetURL: function(path) {\n\t\treturn this.request(\"sharing/create_shared_link_with_settings\", {path}, \"POST\")\n\t\t\t.then(shareInfo => _.fixShareURL(shareInfo.url));\n\t},\n\n\t/**\n\t * Saves a file to the backend.\n\t * @param {Object} file - An object with name & data keys\n\t * @return {Promise} A promise that resolves when the file is saved.\n\t */\n\tput: function(serialized, path = this.path, o = {}) {\n\t\treturn this.request(\"https://content.dropboxapi.com/2/files/upload\", serialized, \"POST\", {\n\t\t\theaders: {\n\t\t\t\t\"Dropbox-API-Arg\": JSON.stringify({\n\t\t\t\t\tpath,\n\t\t\t\t\tmode: \"overwrite\"\n\t\t\t\t}),\n\t\t\t\t\"Content-Type\": \"application/octet-stream\"\n\t\t\t}\n\t\t});\n\t},\n\n\toAuthParams: () => `&redirect_uri=${encodeURIComponent(\"https://auth.mavo.io\")}&response_type=code`,\n\n\tgetUser: function() {\n\t\tif (this.user) {\n\t\t\treturn Promise.resolve(this.user);\n\t\t}\n\n\t\treturn this.request(\"users/get_current_account\", \"null\", \"POST\")\n\t\t\t.then(info => {\n\t\t\t\tthis.user = {\n\t\t\t\t\tusername: info.email,\n\t\t\t\t\tname: info.name.display_name,\n\t\t\t\t\tavatar: info.profile_photo_url,\n\t\t\t\t\tinfo\n\t\t\t\t};\n\n\t\t\t\t$.fire(this.mavo.element, \"mv-login\", { backend: this });\n\t\t\t});\n\t},\n\n\tlogin: function(passive) {\n\t\treturn this.oAuthenticate(passive)\n\t\t\t.then(() => this.getUser())\n\t\t\t.then(u => {\n\t\t\t\tif (this.user) {\n\t\t\t\t\tthis.permissions.logout = true;\n\n\t\t\t\t\t// Check if can actually edit the file\n\t\t\t\t\tthis.request(\"sharing/get_shared_link_metadata\", {\n\t\t\t\t\t\t\"url\": this.source\n\t\t\t\t\t}, \"POST\").then(info => {\n\t\t\t\t\t\tthis.path = info.path_lower;\n\t\t\t\t\t\tthis.permissions.on([\"edit\", \"save\"]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t},\n\n\tlogout: function() {\n\t\treturn this.oAuthLogout();\n\t},\n\n\tstatic: {\n\t\tapiDomain: \"https://api.dropboxapi.com/2/\",\n\t\toAuth: \"https://www.dropbox.com/oauth2/authorize\",\n\n\t\ttest: function(url) {\n\t\t\turl = new URL(url, Mavo.base);\n\t\t\treturn /dropbox.com/.test(url.host);\n\t\t},\n\n\t\t// Transform the dropbox shared URL into something raw and CORS-enabled\n\t\tfixShareURL: url => {\n\t\t\turl = new URL(url, Mavo.base);\n\t\t\turl.hostname = \"dl.dropboxusercontent.com\";\n\t\t\turl.search = url.search.replace(/\\bdl=0|^$/, \"raw=1\");\n\t\t\treturn url;\n\t\t}\n\t}\n}));\n\n})(Bliss, Bliss.$);\n","(function($, $$) {\n\nvar _ = Mavo.Backend.register($.Class({\n\textends: Mavo.Backend,\n\tid: \"Github\",\n\tconstructor: function() {\n\t\tthis.permissions.on([\"login\", \"read\"]);\n\n\t\tthis.key = this.mavo.element.getAttribute(\"mv-github-key\") || \"7e08e016048000bc594e\";\n\n\t\t// Extract info for username, repo, branch, filepath from URL\n\t\tvar extension = this.format.constructor.extensions[0] || \".json\";\n\n\t\tthis.defaults = {\n\t\t\trepo: \"mv-data\",\n\t\t\tfilename: `${this.mavo.id}${extension}`\n\t\t};\n\n\t\tthis.info = _.parseURL(this.source, this.defaults);\n\t\t$.extend(this, this.info);\n\n\t\tthis.login(true);\n\t},\n\n\tupdate: function(url, o) {\n\t\tthis.super.update.call(this, url, o);\n\n\t\tthis.info = _.parseURL(this.source, this.defaults);\n\t\t$.extend(this, this.info);\n\t},\n\n\tget: function(url) {\n\t\tif (this.isAuthenticated() || !this.path || url) {\n\t\t\t// Authenticated or raw API call\n\t\t\tvar info = url? _.parseURL(url) : this.info;\n\n\t\t\tif (info.apiData) {\n\t\t\t\t// GraphQL\n\t\t\t\treturn this.request(info.apiCall, info.apiData, \"POST\")\n\t\t\t\t\t.then(response => {\n\t\t\t\t\t\tif (response.errors && response.errors.length) {\n\t\t\t\t\t\t\treturn Promise.reject(response.errors.map(x => x.message).join(\"\\n\"));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn response.data;\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.request(info.apiCall, null, \"GET\", {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Accept\": \"application/vnd.github.squirrel-girl-preview\"\n\t\t\t\t\t}\n\t\t\t\t}).then(response => Promise.resolve(info.repo? _.atob(response.content) : response));\n\t\t}\n\t\telse {\n\t\t\t// Unauthenticated, use simple GET request to avoid rate limit\n\t\t\turl = new URL(`https://raw.githubusercontent.com/${this.username}/${this.repo}/${this.branch || \"master\"}/${this.path}`);\n\t\t\turl.searchParams.set(\"timestamp\", Date.now()); // ensure fresh copy\n\n\t\t\treturn $.fetch(url.href).then(xhr => Promise.resolve(xhr.responseText), () => Promise.resolve(null));\n\t\t}\n\t},\n\n\tupload: function(file, path = this.path) {\n\t\treturn Mavo.readFile(file).then(dataURL => {\n\t\t\t\tvar base64 = dataURL.slice(5); // remove data:\n\t\t\t\tvar media = base64.match(/^\\w+\\/[\\w+]+/)[0];\n\t\t\t\tbase64 = base64.replace(RegExp(`^${media}(;base64)?,`), \"\");\n\t\t\t\tpath = this.path.replace(/[^/]+$/, \"\") + path; // make upload path relative to existing path\n\n\t\t\t\treturn this.put(base64, path, {isEncoded: true});\n\t\t\t})\n\t\t\t.then(fileInfo => this.getURL(path, fileInfo.commit.sha));\n\t},\n\n\t/**\n\t * Saves a file to the backend.\n\t * @param {String} serialized - Serialized data\n\t * @param {String} path - Optional file path\n\t * @return {Promise} A promise that resolves when the file is saved.\n\t */\n\tput: function(serialized, path = this.path, o = {}) {\n\t\tif (!path) {\n\t\t\t// Raw API calls are read-only for now\n\t\t\treturn;\n\t\t}\n\n\t\tvar repoCall = `repos/${this.username}/${this.repo}`;\n\t\tvar fileCall = `${repoCall}/contents/${path}`;\n\t\tvar commitPrefix = this.mavo.element.getAttribute(\"mv-github-commit-prefix\") || \"\";\n\n\t\t// Create repo if it doesnt exist\n\t\tvar repoInfo = this.repoInfo || this.request(\"user/repos\", {name: this.repo}, \"POST\").then(repoInfo => this.repoInfo = repoInfo);\n\n\t\tserialized = o.isEncoded? serialized : _.btoa(serialized);\n\n\t\treturn Promise.resolve(repoInfo)\n\t\t\t.then(repoInfo => {\n\t\t\t\tif (!this.canPush()) {\n\t\t\t\t\t// Does not have permission to commit, create a fork\n\t\t\t\t\treturn this.request(`${repoCall}/forks`, {name: this.repo}, \"POST\")\n\t\t\t\t\t\t.then(forkInfo => {\n\t\t\t\t\t\t\tfileCall = `repos/${forkInfo.full_name}/contents/${path}`;\n\t\t\t\t\t\t\treturn this.forkInfo = forkInfo;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(forkInfo => {\n\t\t\t\t\t\t\t// Ensure that fork is created (they take a while)\n\t\t\t\t\t\t\tvar timeout;\n\t\t\t\t\t\t\tvar test = (resolve, reject) => {\n\t\t\t\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\t\t\t\tthis.request(`repos/${forkInfo.full_name}/commits`, {until: \"1970-01-01T00:00:00Z\"}, \"HEAD\")\n\t\t\t\t\t\t\t\t\t.then(x => {\n\t\t\t\t\t\t\t\t\t\tresolve(forkInfo);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.catch(x => {\n\t\t\t\t\t\t\t\t\t\t// Try again after 1 second\n\t\t\t\t\t\t\t\t\t\ttimeout = setTimeout(test, 1000);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\treturn new Promise(test);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn repoInfo;\n\t\t\t})\n\t\t\t.then(repoInfo => {\n\t\t\t\treturn this.request(fileCall, {\n\t\t\t\t\tref: this.branch\n\t\t\t\t}).then(fileInfo => this.request(fileCall, {\n\t\t\t\t\tmessage: commitPrefix + this.mavo._(\"gh-updated-file\", {name: fileInfo.name || \"file\"}),\n\t\t\t\t\tcontent: serialized,\n\t\t\t\t\tbranch: this.branch,\n\t\t\t\t\tsha: fileInfo.sha\n\t\t\t\t}, \"PUT\"), xhr => {\n\t\t\t\t\tif (xhr.status == 404) {\n\t\t\t\t\t\t// File does not exist, create it\n\t\t\t\t\t\treturn this.request(fileCall, {\n\t\t\t\t\t\t\tmessage: commitPrefix + \"Created file\",\n\t\t\t\t\t\t\tcontent: serialized,\n\t\t\t\t\t\t\tbranch: this.branch\n\t\t\t\t\t\t}, \"PUT\");\n\t\t\t\t\t}\n\n\t\t\t\t\treturn xhr;\n\t\t\t\t});\n\t\t\t})\n\t\t\t.then(fileInfo => {\n\t\t\t\tif (this.forkInfo) {\n\t\t\t\t\t// We saved in a fork, do we have a pull request?\n\t\t\t\t\tthis.request(`repos/${this.username}/${this.repo}/pulls`, {\n\t\t\t\t\t\thead: `${this.user.username}:${this.branch}`,\n\t\t\t\t\t\tbase: this.branch\n\t\t\t\t\t}).then(prs => {\n\t\t\t\t\t\tthis.pullRequest(prs[0]);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn fileInfo;\n\t\t\t});\n\t},\n\n\tpullRequest: function(existing) {\n\t\tvar previewURL = new URL(location);\n\t\tpreviewURL.searchParams.set(this.mavo.id + \"-storage\", `https://github.com/${this.forkInfo.full_name}/${this.path}`);\n\t\tvar message = this.mavo._(\"gh-edit-suggestion-saved-in-profile\", {previewURL});\n\n\t\tif (this.notice) {\n\t\t\tthis.notice.close();\n\t\t}\n\n\t\tif (existing) {\n\t\t\t// We already have a pull request, ask about closing it\n\t\t\tthis.notice = this.mavo.message(`${message}\n\t\t\t\t${this.mavo._(\"gh-edit-suggestion-notreviewed\")}\n\t\t\t\t<form onsubmit=\"return false\">\n\t\t\t\t\t<button class=\"mv-danger\">${this.mavo._(\"gh-edit-suggestion-revoke\")}</button>\n\t\t\t\t</form>`, {\n\t\t\t\t\tclasses: \"mv-inline\",\n\t\t\t\t\tdismiss: [\"button\", \"submit\"]\n\t\t\t\t});\n\n\t\t\tthis.notice.closed.then(form => {\n\t\t\t\tif (!form) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Close PR\n\t\t\t\tthis.request(`repos/${this.username}/${this.repo}/pulls/${existing.number}`, {\n\t\t\t\t\tstate: \"closed\"\n\t\t\t\t}, \"POST\").then(prInfo => {\n\t\t\t\t\tnew Mavo.UI.Message(this.mavo, `<a href=\"${prInfo.html_url}\">${this.mavo._(\"gh-edit-suggestion-cancelled\")}</a>`, {\n\t\t\t\t\t\tdismiss: [\"button\", \"timeout\"]\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.pullRequest();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\t// Ask about creating a PR\n\t\t\tthis.notice = this.mavo.message(`${message}\n\t\t\t\t${this.mavo._(\"gh-edit-suggestion-instructions\")}\n\t\t\t\t<form onsubmit=\"return false\">\n\t\t\t\t\t<textarea name=\"edits\" class=\"mv-autosize\" placeholder=\"${this.mavo._(\"gh-edit-suggestion-reason-placeholder\")}\"></textarea>\n\t\t\t\t\t<button>${this.mavo._(\"gh-edit-suggestion-send\")}</button>\n\t\t\t\t</form>`, {\n\t\t\t\t\tclasses: \"mv-inline\",\n\t\t\t\t\tdismiss: [\"button\", \"submit\"]\n\t\t\t\t});\n\n\t\t\tthis.notice.closed.then(form => {\n\t\t\t\tif (!form) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// We want to send a pull request\n\t\t\t\tthis.request(`repos/${this.username}/${this.repo}/pulls`, {\n\t\t\t\t\ttitle: this.mavo._(\"gh-edit-suggestion-title\"),\n\t\t\t\t\tbody: this.mavo._(\"gh-edit-suggestion-body\", {\n\t\t\t\t\t\tdescription: form.elements.edits.value,\n\t\t\t\t\t\tpreviewURL\n\t\t\t\t\t}),\n\t\t\t\t\thead: `${this.user.username}:${this.branch}`,\n\t\t\t\t\tbase: this.branch\n\t\t\t\t}, \"POST\").then(prInfo => {\n\t\t\t\t\tnew Mavo.UI.Message(this.mavo, `<a href=\"${prInfo.html_url}\">${this.mavo._(\"gh-edit-suggestion-sent\")}</a>`, {\n\t\t\t\t\t\tdismiss: [\"button\", \"timeout\"]\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.pullRequest(prInfo);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\tlogin: function(passive) {\n\t\treturn this.oAuthenticate(passive)\n\t\t\t.then(() => this.getUser())\n\t\t\t.catch(xhr => {\n\t\t\t\tif (xhr.status == 401) {\n\t\t\t\t\t// Unauthorized. Access token we have is invalid, discard it\n\t\t\t\t\tthis.logout();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(u => {\n\t\t\t\tif (this.user) {\n\t\t\t\t\tthis.permissions.on(\"logout\");\n\n\t\t\t\t\tif (this.info.path) {\n\t\t\t\t\t\tthis.permissions.on([\"edit\", \"save\"]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.repo) {\n\t\t\t\t\t\treturn this.request(`repos/${this.username}/${this.repo}`)\n\t\t\t\t\t\t\t.then(repoInfo => {\n\t\t\t\t\t\t\t\tif (this.branch === undefined) {\n\t\t\t\t\t\t\t\t\tthis.branch = repoInfo.default_branch;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn this.repoInfo = repoInfo;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t},\n\n\tcanPush: function() {\n\t\tif (this.repoInfo) {\n\t\t\treturn this.repoInfo.permissions.push;\n\t\t}\n\n\t\t// Repo does not exist so we can't check permissions\n\t\t// Just check if authenticated user is the same as our URL username\n\t\treturn this.user && this.user.username.toLowerCase() == this.username.toLowerCase();\n\t},\n\n\toAuthParams: () => \"&scope=repo,gist\",\n\n\tlogout: function() {\n\t\treturn this.oAuthLogout().then(() => {\n\t\t\tthis.user = null;\n\t\t});\n\t},\n\n\tgetUser: function() {\n\t\tif (this.user) {\n\t\t\treturn Promise.resolve(this.user);\n\t\t}\n\n\t\treturn this.request(\"user\").then(info => {\n\t\t\tthis.user = {\n\t\t\t\tusername: info.login,\n\t\t\t\tname: info.name || info.login,\n\t\t\t\tavatar: info.avatar_url,\n\t\t\t\turl: \"https://github.com/\" + info.login,\n\t\t\t\tinfo\n\t\t\t};\n\n\t\t\t$.fire(this.mavo.element, \"mv-login\", { backend: this });\n\t\t});\n\t},\n\n\tgetURL: function(path = this.path, sha) {\n\t\tvar repoInfo = this.forkInfo || this.repoInfo;\n\t\tvar repo = repoInfo.full_name;\n\t\tpath = path.replace(/ /g, \"%20\");\n\n\t\trepoInfo.pagesInfo = repoInfo.pagesInfo || this.request(`repos/${repo}/pages`, {}, \"GET\", {\n\t\t\theaders: {\n\t\t\t\t\"Accept\": \"application/vnd.github.mister-fantastic-preview+json\"\n\t\t\t}\n\t\t});\n\n\t\treturn repoInfo.pagesInfo.then(pagesInfo => pagesInfo.html_url + path)\n\t\t\t.catch(xhr => {\n\t\t\t\t// No Github Pages, return rawgit URL\n\t\t\t\tif (sha) {\n\t\t\t\t\treturn `https://cdn.rawgit.com/${repo}/${sha}/${path}`;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn `https://rawgit.com/${repo}/${this.branch}/${path}`;\n\t\t\t\t}\n\t\t\t});\n\t},\n\n\tstatic: {\n\t\tapiDomain: \"https://api.github.com/\",\n\t\toAuth: \"https://github.com/login/oauth/authorize\",\n\n\t\ttest: function(url) {\n\t\t\turl = new URL(url, Mavo.base);\n\t\t\treturn /\\bgithub.com|raw.githubusercontent.com/.test(url.host);\n\t\t},\n\n\t\t/**\n\t\t * Parse Github URLs, return username, repo, branch, path\n\t\t */\n\t\tparseURL: function(source, defaults = {}) {\n\t\t\tvar ret = {};\n\t\t\tvar url = new URL(source, Mavo.base);\n\t\t\tvar path = url.pathname.slice(1).split(\"/\");\n\n\t\t\tret.username = path.shift();\n\t\t\tret.repo = path.shift() || defaults.repo;\n\n\t\t\tif (/raw.githubusercontent.com$/.test(url.host)) {\n\t\t\t\tret.branch = path.shift();\n\t\t\t}\n\t\t\telse if (/api.github.com$/.test(url.host)) {\n\t\t\t\t// Raw API call\n\t\t\t\tvar apiCall = url.pathname.slice(1) + url.search;\n\t\t\t\tvar data = Mavo.Functions.from(source, \"#\"); // url.* drops line breaks\n\n\t\t\t\treturn {\n\t\t\t\t\tapiCall,\n\t\t\t\t\tapiData: apiCall == \"graphql\"? {query: data} : data\n\t\t\t\t};\n\t\t\t}\n\t\t\telse if (path[0] == \"blob\") {\n\t\t\t\tpath.shift();\n\t\t\t\tret.branch = path.shift();\n\t\t\t}\n\n\t\t\tvar lastSegment = path[path.length - 1];\n\n\t\t\tif (/\\.\\w+$/.test(lastSegment)) {\n\t\t\t\tret.filename = lastSegment;\n\t\t\t\tpath.splice(path.length - 1, 1);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tret.filename = defaults.filename;\n\t\t\t}\n\n\t\t\tret.filepath = path.join(\"/\") || defaults.filepath || \"\";\n\t\t\tret.path = (ret.filepath? ret.filepath + \"/\" : \"\") + ret.filename;\n\n\t\t\tret.apiCall = `repos/${ret.username}/${ret.repo}/contents/${ret.path}`;\n\n\t\t\treturn ret;\n\t\t},\n\n\t\t// Fix atob() and btoa() so they can handle Unicode\n\t\tbtoa: str => btoa(unescape(encodeURIComponent(str))),\n\t\tatob: str => decodeURIComponent(escape(window.atob(str)))\n\t}\n}));\n\n})(Bliss, Bliss.$);\n"]}